(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return m});var n=a(0),r=a.n(n),l=a(245),o=a(248),c=a(213),i=(a(180),a(28)),s=e.window.innerWidth,u=Object(l.a)(function(e){return{root:{"& > *":{margin:e.spacing(1),width:s/5}}}});function m(e){var t=u();return r.a.createElement("div",{className:"input-text-field"},"   ",r.a.createElement("form",{className:t.root,noValidate:!0,autoComplete:"off"},r.a.createElement(o.a,{theme:i.a},r.a.createElement(c.a,{onChange:e.onChange,onKeyPress:e.onKeyDown,id:"standard-basic",label:"Search"}))))}}).call(this,a(51))},135:function(e,t,a){e.exports=a(211)},140:function(e,t,a){},142:function(e,t,a){},146:function(e,t,a){},165:function(e,t,a){},167:function(e,t,a){},169:function(e,t,a){},173:function(e,t,a){},175:function(e,t,a){},178:function(e,t,a){},180:function(e,t,a){},182:function(e,t,a){},184:function(e,t,a){},186:function(e,t,a){},188:function(e,t,a){},190:function(e,t,a){},193:function(e,t,a){},197:function(e,t,a){},199:function(e,t,a){},201:function(e,t,a){},203:function(e,t,a){},211:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),o=a.n(l),c=(a(140),a(9)),i=a(10),s=a(12),u=a(11),m=a(13),d=a(20),h=(a(142),a(146),a(267)),p=a(259),f=a(22),g=a(243),v=a(18),b=a.n(v),E=function e(){var t=this;Object(c.a)(this,e),this.signup=function(e,a){return t.service.post("/signup",{username:e,password:a}).then(function(e){return e.data})},this.login=function(e,a){return t.service.post("/login",{username:e,password:a}).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/currentUser").then(function(e){return e.data})},this.logout=function(){return t.service.get("/logout").then(function(e){return e.data})},this.service=b.a.create({baseURL:"".concat("https://mn3m0s1n3.herokuapp.com/api","/auth"),withCredentials:!0})},y=(a(165),a(21)),k=(a(167),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;a.service.login(t,n).then(function(e){a.setState({username:t,password:n,error:!1}),a.props.getUser(e)}).catch(function(e){a.setState({username:t,password:n,error:!0})})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(y.a)({},n,r))},a.state={username:"",password:""},a.service=new E,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login-form"},r.a.createElement("p",null,this.state.error?"error ":""),r.a.createElement("form",{className:"loginForm",onSubmit:this.handleFormSubmit},r.a.createElement("input",{autoComplete:"off",type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)},placeholder:"name:"}),r.a.createElement("input",{autoComplete:"off",type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)},placeholder:"| password:"}),r.a.createElement("input",{type:"submit",value:"Login"})))}}]),t}(n.Component)),O=(a(169),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;a.service.signup(t,n).then(function(e){a.setState({username:"",password:""}),a.props.getUser(e.user)}).catch(function(e){a.setState({username:t,password:n,error:!0})})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(y.a)({},n,r))},a.state={username:"",password:""},a.service=new E,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"signup-form"},r.a.createElement("p",null,this.state.error?"error ":""),r.a.createElement("form",{className:"signupForm",onSubmit:this.handleFormSubmit},r.a.createElement("input",{autoComplete:"off",type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)},placeholder:"name:"}),r.a.createElement("input",{autoComplete:"off",type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)},placeholder:"| password:"}),r.a.createElement("input",{type:"submit",value:"Sign up"})))}}]),t}(n.Component)),j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleLogout=function(e){a.props.logout()},a.state={loggedInUser:null,isSignup:!1},a.service=new E,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(f.a)({},this.state,{loggedInUser:e.userInSession}))}},{key:"changeState",value:function(){this.setState({isSignup:!this.state.isSignup})}},{key:"render",value:function(){var e=this;return r.a.createElement("nav",{className:"nav-style"},this.state.loggedInUser?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"profile-navbar"}," ",r.a.createElement(g.a,{to:"/profile"}," ",r.a.createElement("h1",{id:"loggedname"},this.state.loggedInUser.username)),r.a.createElement("a",{id:"logoutlink",onClick:this.handleLogout},"logout"))):r.a.createElement("ul",null,this.state.isSignup?r.a.createElement("div",{className:"user-buttons"},r.a.createElement(k,{getUser:this.props.getUser}),r.a.createElement("button",{className:"change-style",onClick:function(){return e.changeState()}},"or signup")):r.a.createElement("div",{className:"user-buttons"},r.a.createElement(O,{getUser:this.props.getUser}),r.a.createElement("button",{className:"change-style",onClick:function(){return e.changeState()}},"or login"))))}}]),t}(n.Component),C=(a(173),a(44)),w=a(245),N=a(248),S=a(249),x=a(266),I=(a(175),a(28)),U=Object(w.a)({root:{width:200}});function D(e){return"".concat(e,"\xb0C")}function M(e){var t=U(),a=r.a.useState([500,1500]),n=Object(C.a)(a,2),l=n[0],o=n[1];return r.a.createElement("div",{className:t.root},r.a.createElement(N.a,{theme:I.a},r.a.createElement(S.a,{id:"range-slider",gutterBottom:!0},"Year range"),r.a.createElement(x.a,{min:0,max:2020,value:l,onChange:function(t,a){o(a),e.changeRange(a)},valueLabelDisplay:"auto","aria-labelledby":"range-slider",getAriaValueText:D})))}var P=a(99),R=a(100),A=a(256),F=(a(182),Object(w.a)(function(e){return{root:{"& > *":{margin:e.spacing(1)}},input:{display:"none"}}}));function L(e){var t=F();return r.a.createElement("div",{className:t.root},r.a.createElement("label",{htmlFor:"outlined-button-file"},r.a.createElement(N.a,{theme:I.a},r.a.createElement(A.a,{onClick:e.sendResults,variant:"outlined",component:"span"},"FIND"))))}var z=a(253),_=a(251),W=a(257),T=a(258),B=a(262),V=(a(184),Object(w.a)(function(e){return{root:{display:"flex"},formControl:{margin:e.spacing(3)}}}));function K(){var e,t,a,n=V(),l=r.a.useState({gilad:!0,jason:!1,antoine:!1}),o=Object(C.a)(l,2),c=o[0],i=o[1],s=function(e){return function(t){i(Object(f.a)({},c,Object(y.a)({},e,t.target.checked)))}},u=c.rijks,m=c.met,d=c.moma,h=c.prado,p=c.louvre;[u,m,d,h,p,c.british].filter(function(e){return e}).length;return r.a.createElement("div",{className:n.root},r.a.createElement(N.a,{theme:I.a},r.a.createElement(_.a,{component:"fieldset",className:n.formControl},r.a.createElement(z.a,{component:"legend"},"Pick Database"),r.a.createElement(W.a,null,r.a.createElement("div",{className:"two-columns"}," ",r.a.createElement("div",{className:"one-column"}," ",r.a.createElement(T.a,{className:"check-label",control:r.a.createElement(B.a,(e={checked:u,onChange:s("rijks"),value:"rijks"},Object(y.a)(e,"checked",!0),Object(y.a)(e,"disabled",!0),e)),label:"Rijks"}),r.a.createElement(T.a,{className:"check-label",control:r.a.createElement(B.a,(t={checked:m,onChange:s("met"),value:"met"},Object(y.a)(t,"checked",!0),Object(y.a)(t,"disabled",!0),t)),label:"MET"})),r.a.createElement("div",{className:"one-column"},r.a.createElement(T.a,{className:"check-label",control:r.a.createElement(B.a,{checked:p,onChange:s("louvre"),value:"louvre",disabled:!0}),label:"Louvre"})," ",r.a.createElement(T.a,{className:"check-label",control:r.a.createElement(B.a,(a={checked:d,onChange:s("moma"),value:"moma"},Object(y.a)(a,"checked",!0),Object(y.a)(a,"disabled",!0),a)),label:"MoMA"})))))))}var Y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={loggedInUser:null,isSignup:!1,tags:[],textFieldValue:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"footer-style"},r.a.createElement("img",{className:"mnemosine-logo",src:"/images/logo-mnemosine.png"}),r.a.createElement(K,null),r.a.createElement(R.a,{onChange:function(t){return e.props.saveSearch(t)},onKeyDown:function(t){return e.props.searchMongo(t)}}),r.a.createElement(P.a,{onSelectTag:function(t){return e.props.multipleSelectResult(t)}}),r.a.createElement(M,{changeRange:function(t){return e.props.sliderResult(t)}}),r.a.createElement(L,{sendResults:this.props.sendResults}))}}]),t}(n.Component),q=a(87);function J(e){var t={name:"search",value:"",children:[]};return["MET","MOMA","RMA"].forEach(function(a){var n=e.filter(function(e){return e.museum===a}),r=n[0]&&n[0].imageUrl,l=n.length?function(e){var t=function(e){var t=e.map(function(e){return Math.abs(e.year)}),a=t.filter(function(e){return Number.isInteger(e)}).sort(function(e,t){return e-t}),n=t.filter(function(e){return!Number.isInteger(e)}),r=[];if(a.length>=4){for(var l=Math.floor(a.length/3),o=0;o<a.length;o+=l)a[o]&&r.push(a[o]);r.push(a[a.length-1])}else r.push.apply(r,Object(q.a)(a));n.length&&r.push("noDate");return Object(q.a)(new Set(r))}(e);console.log("mainDates",t);var a=[];return t.forEach(function(n,r){var l=e.filter(function(e){return"noDate"===n?!Number.isInteger(e.year):e.year>=n&&(!t[r+1]||e.year<t[r+1])}),o=l[0]&&l[0].imageUrl,c=l.length>0?function(e){var t=["noOrigin"],a=[];return e.forEach(function(e){if(e.origin.length){var a=e.origin[0];t.includes(a)||t.push(a),t.sort()}}),t.forEach(function(n,r){r>0&&t.slice(0,r);var l=e.filter(function(e){return e.origin.length<=0&&"noOrigin"===n||e.origin[0]===n}),o=l[0]&&l[0].imageUrl,c=l.length?function(e){var t=[],a=[];return e.forEach(function(e){e.author&&!t.includes(e.author)&&t.push(e.author)}),t.forEach(function(t,n){var r=e.filter(function(e){return e.author===t}).map(function(e){return e.value=e.imageUrl,e.size=.1*e.rating,e}),l=r[0]&&r[0].imageUrl,o={name:t,value:l,children:r||[],size:r.length};r.length>0&&a.push(o)}),a}(l):[],i={name:n,value:o,children:c||[],size:l.length};c.length>0&&a.push(i)}),a}(l):[],i={name:n,value:o,children:c,size:l.length};c.length&&a.push(i)}),a}(n):[],o={name:a,value:r,children:l,size:n.length};l.length&&t.children.push(o)}),console.log("tree",t),t}var $,G=a(265),H=(a(186),a(188),a(190),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"deleteCollection",value:function(){var e=this;console.log("delete",this.props.collection._id),console.log(this.props),b.a.delete("".concat("https://mn3m0s1n3.herokuapp.com/api","/collection/").concat(this.props.collection._id)).then(function(){console.log("callingrefetchcollection",e.props.reFetch),e.props.reFetch&&e.props.reFetch()})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"collectionCard"},r.a.createElement("div",{className:"collectionButtons"},r.a.createElement("h1",null,this.props.collection.name),r.a.createElement("button",{className:"button-moved-right",onClick:function(){return e.deleteCollection()}},"delete")),r.a.createElement(g.a,{to:"/collection/".concat(this.props.collection._id)}," ",r.a.createElement("div",{className:"collectionImages"},this.props.collection.pieces.slice(0,4).map(function(e){return r.a.createElement("div",{className:"imageSquare",style:{backgroundImage:"url(".concat(e.imageUrl,")")}})}))))}}]),t}(n.Component)),X=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={newCollection:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"updateNewCollection",value:function(e){this.setState(Object(f.a)({},this.state,{newCollection:e.target.value}))}},{key:"checkEnter",value:function(e){13===e.keyCode&&this.sendName()}},{key:"sendName",value:function(){var e=this;b.a.post("".concat("https://mn3m0s1n3.herokuapp.com/api","/collection/").concat(this.props.user._id),{name:this.state.newCollection}).then(function(t){return e.props.reFetch(t.data)})}},{key:"render",value:function(){var e=this;return console.log("num collections",this.props.collections.length),r.a.createElement("div",{className:"collections-style"},r.a.createElement("div",{className:"add-field"},r.a.createElement("input",{autoComplete:"off",type:"text",placeholder:"create new collection",id:"create-collection",value:this.state.newCollection,onChange:function(t){return e.updateNewCollection(t)},onKeyDown:function(t){return e.checkEnter(t)}}),r.a.createElement("button",{onClick:function(){return e.sendName()}},"add")),this.props.collections.map(function(t){return r.a.createElement(H,{collection:t,reFetch:e.props.reFetch})}))}}]),t}(n.Component),Q=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={profile:{}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"getProfile",value:function(e){var t=this;console.log("callingrefetchprofile",e,this.props.user);var a=e||this.props.user;a&&b.a.get("".concat("https://mn3m0s1n3.herokuapp.com/api","/profile/").concat(a._id)).then(function(e){t.setUserProfile(e.data)})}},{key:"setUserProfile",value:function(e){this.setState(Object(f.a)({},this.state,{profile:e})),console.log("collections from back",e&&e.collections&&e.collections.length)}},{key:"componentWillReceiveProps",value:function(e){this.getProfile(e.user)}},{key:"componentDidMount",value:function(){this.getProfile(this.props.user)}},{key:"render",value:function(){var e=this,t=this.state.profile;return console.log("profile collections",t&&t.collections&&t.collections.length),this.props.user?r.a.createElement("div",{className:"Profile-style"},r.a.createElement("div",{className:"Profile-top"},r.a.createElement("div",{className:"Profile-name"}," ",r.a.createElement("h1",null,"Profile of ",this.props.user.username),r.a.createElement("button",{onClick:this.props.history.goBack},"Close")),r.a.createElement("div",null,t&&t.collections&&r.a.createElement(X,{user:this.props.user,collections:t.collections,reFetch:function(){return e.getProfile()}})))):r.a.createElement("div",{className:"Profile-style"},r.a.createElement("div",{className:"Profile-top"},r.a.createElement("h1",null,"Profile of "),r.a.createElement(g.a,{to:"/"},r.a.createElement("h1",null,"X"))),r.a.createElement("div",{className:"Profile-body"}))}}]),t}(n.Component),Z=Object(G.a)(Q),ee=(a(193),a(103)),te=a(104),ae=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={piece:{},user:{},isSaved:!1,imageClass:""},a.addLike=a.addLike.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"getProfile",value:function(e){var t=this,a=e||this.props.user;a&&b.a.get("".concat("https://mn3m0s1n3.herokuapp.com/api","/profile/").concat(a._id)).then(function(e){t.setUserProfile(e.data)})}},{key:"setUserProfile",value:function(e){var t=this,a=e.collections&&e.collections.some(function(e){return e.pieces.find(function(e){return e._id===t.props.match.params.id})});this.setState(Object(f.a)({},this.state,{user:e,isSaved:a}))}},{key:"componentWillReceiveProps",value:function(e){this.getProfile(e.user)}},{key:"componentDidMount",value:function(){var e=this;this.getProfile(this.props.user),b.a.get("".concat("https://mn3m0s1n3.herokuapp.com/api","/piece/").concat(this.props.match.params.id)).then(function(t){var a="",n=new Image;n.src=t.data.imageUrl,n.onload=function(){var r=n.height/n.width;r>.9&&r<1.1?a="square-img":r>=1.1?a="vertical-img":r<=.9&&(a="horizontal-img"),e.setState(Object(f.a)({},e.state,{piece:t.data,imageClass:a}))},console.log("state",e.state)})}},{key:"addLike",value:function(){var e=this;b.a.put("".concat("https://mn3m0s1n3.herokuapp.com/api","/piece/like/").concat(this.state.piece._id)).then(function(t){e.setState({piece:t.data})})}},{key:"addCollection",value:function(e){var t=this;b.a.put("".concat("https://mn3m0s1n3.herokuapp.com/api","/collection/add/").concat(e,"&").concat(this.state.piece._id)).then(function(e){console.log("pieceAdded",e.data),t.getProfile(t.state.user)})}},{key:"deleteCollection",value:function(e){var t=this;b.a.put("".concat("https://mn3m0s1n3.herokuapp.com/api","/collection/del/").concat(e,"&").concat(this.state.piece._id)).then(function(e){console.log("pieceDeleted",e.data),t.getProfile(t.state.user)})}},{key:"render",value:function(){var e=this,t=this.state.piece,a=t.origin,n=t.technic,l=t.tags,o=t.museum,c=t.name,i=t.imageUrl,s=t.description,u=t.author,m=t.year,d=t.culture,h=t.classification,p=t.rating,f=t.department,g=t.museumId;return r.a.createElement("div",{className:"detailPiece"},r.a.createElement("div",{className:"detail-card"},r.a.createElement("div",{className:"detail-top"},r.a.createElement("h1",null,"Detail view"),r.a.createElement("button",{onClick:this.props.history.goBack},"Close")),r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{className:this.state.imageClass,src:i})),r.a.createElement("div",{className:"detail-buttons"},r.a.createElement("h1",null,r.a.createElement(ee.a,{icon:te.a}),p),r.a.createElement("button",{onClick:this.addLike},"like"),r.a.createElement("div",{class:"dropdown"},r.a.createElement("button",{class:"dropbtn"},"Add"),r.a.createElement("div",{class:"dropdown-content"},this.state&&this.state.user&&this.state.user.collections&&this.state.user.collections.filter(function(t){return t.pieces.every(function(t){return t._id!==e.props.match.params.id})}).map(function(t){return r.a.createElement("button",{onClick:function(){return e.addCollection(t._id)},class:"droppedbtn"},t.name)}))),this.state.isSaved&&r.a.createElement("div",{class:"dropdown"},r.a.createElement("button",{class:"dropbtn"},"Delete"),r.a.createElement("div",{class:"dropdown-content"},this.state&&this.state.user&&this.state.user.collections&&this.state.user.collections.filter(function(t){return t.pieces.some(function(t){return t._id===e.props.match.params.id})}).map(function(t){return r.a.createElement("button",{onClick:function(){return e.deleteCollection(t._id)},class:"droppedbtn"},t.name)})))),r.a.createElement("div",{className:"detail-text"}," ",r.a.createElement("h1",null,c),u&&r.a.createElement("p",null,"author: ",u),m&&r.a.createElement("p",null,"year: ",m),"RMA"===o?r.a.createElement("p",null,"Rijksmuseum of Amsterdam"):"MOMA"===o?r.a.createElement("p",null,"MoMA New York"):r.a.createElement("p",null,"Metropolitan Museum of Art"),g&&r.a.createElement("p",null,"museumId: ",g),n&&r.a.createElement("p",null,"technic: ",n),a&&r.a.createElement("p",null,"origin:",a&&r.a.createElement("p",null,a[0])),l&&r.a.createElement("p",null,"tags:",l&&l.map(function(e){return r.a.createElement("p",null,e)})),s&&r.a.createElement("p",null,"description: ",s),d&&r.a.createElement("p",null,"culture: ",d),h&&r.a.createElement("p",null,"classification: ",h),f&&r.a.createElement("p",null,"department: ",f))))}}]),t}(n.Component),ne=Object(G.a)(ae),re=a(16),le=(a(197),a(67));($=a.n(le).a).fn.bgLoaded=function(e){var t=$.extend({},{afterLoaded:function(){this.addClass("bg-loaded")}},e);console.log("hola"),this.each(function(){var e=$(this),a=e.css("background-image").split(", ");e.data("loaded-count",0),$.each(a,function(n,r){var l=r.replace(/^url\(["']?/,"").replace(/["']?\)$/,"");$("<img/>").attr("src",l).load(function(){$(this).remove(),e.data("loaded-count",e.data("loaded-count")+1),e.data("loaded-count")>=a.length&&t.afterLoaded.call(e)})})})};var oe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).goDetail=a.goDetail.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){re.e("#chart").selectAll("*").remove()}},{key:"goDetail",value:function(e){var t="/detail/".concat(e.data._id);return this.props.history.push(t)}},{key:"render",value:function(){var e,t=this.props.data,a=re.d().domain([0,100]).range([0,100]),n=re.d().domain([0,100]).range([0,100]),l=re.c,o=re.g().size([100,100]).paddingInner(0).round(!1),c=re.b(t).sum(function(e){return e.value?1:0});o(c);var i=re.e("#chart").selectAll(".node").data(c.descendants()).enter().append("div").attr("class",function(e){return"node level-"+e.depth}).attr("title",function(e){return e.data.name?e.data.name:"null"});i.style("left",function(e){return a(e.x0)+"%"}).style("top",function(e){return n(e.y0)+"%"}).style("width",function(e){return a(e.x1)-a(e.x0)+"%"}).style("height",function(e){return n(e.y1)-n(e.y0)+"%"}).style("background-image",function(e){return e.value?"url(".concat(e.data.value,")"):"none"}).style("background-color",function(e){for(;e.depth>2;)e=e.parent;return l(e.data.name)}).on("click",u).append("p").attr("class","label").text(function(e){return e.data.name?e.data.name:"---"}),i.filter(function(e){return e.depth>=5}).append("button").html("&#65291;").attr("class","button-detail").on("click",this.goDetail);var s=re.e(".up").datum(c).on("click",u);function u(t){e=t.depth;var r=re.e(".up").text(e<=0?"nested by museum":e<=1?"zoom out - nested by time":e<=2?"zoom out - nested by origin":e<=3?"zoom out - nested by author":"zoom out - single piece");console.log("button",r),s.datum(t.parent||c),a.domain([t.x0,t.x1]),n.domain([t.y0,t.y1]);var l=re.f().duration(1200).ease(re.a);i.transition(l).style("left",function(e){return a(e.x0)+"%"}).style("top",function(e){return n(e.y0)+"%"}).style("width",function(e){return a(e.x1)-a(e.x0)+"%"}).style("height",function(e){return n(e.y1)-n(e.y0)+"%"}),i.filter(function(e){return e.ancestors()}).classed("hide",function(e){return!!e.children}),i.filter(function(t){return t.depth>e}).classed("hide",!1)}return r.a.createElement("div",{className:"father"},r.a.createElement("nav",{className:"nav-bar-d3"},r.a.createElement("div",{className:"up"},"nested by museum")),r.a.createElement("div",{className:"feature",id:"chart"}))}}]),t}(n.Component),ce=Object(G.a)(oe),ie=(a(199),a(201),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).goDetail=a.goDetail.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){re.e("#chart-small").selectAll("*").remove()}},{key:"goDetail",value:function(e){var t="/detail/".concat(e.data._id);return this.props.history.push(t)}},{key:"render",value:function(){var e,t=this.props.data,a=re.d().domain([0,80]).range([0,80]),n=re.d().domain([0,80]).range([0,80]),l=re.c,o=re.g().size([80,80]).paddingInner(0).round(!1),c=re.b(t).sum(function(e){return e.value?1:0});o(c);var i=re.e("#chart-small").selectAll(".node").data(c.descendants()).enter().append("div").attr("class",function(e){return"node-small level-small-"+e.depth}).attr("title",function(e){return e.data.name?e.data.name:"null"}).attr("transform","translate(90 90)");i.attr("transform","translate(90 90)").style("left",function(e){return a(e.x0)+"%"}).style("top",function(e){return n(e.y0)+"%"}).style("width",function(e){return a(e.x1)-a(e.x0)+"%"}).style("height",function(e){return n(e.y1)-n(e.y0)+"%"}).style("background-image",function(e){return e.value?"url(".concat(e.data.value,")"):"none"}).style("background-color",function(e){for(;e.depth>2;)e=e.parent;return l(e.data.name)}).on("click",u).append("p").attr("class","label").text(function(e){return e.data.name?e.data.name:"---"}),i.filter(function(e){return e.depth>=5}).append("button").attr("class","button-detail").on("click",this.goDetail).html("&#65291;");var s=re.e(".up-small").datum(c).on("click",u);function u(t){e=t.depth;re.e(".up-small").text(e<=0?"":"zoom out");s.datum(t.parent||c),a.domain([t.x0,t.x1]),n.domain([t.y0,t.y1]);var r=re.f().duration(1200).ease(re.a);i.transition(r).style("left",function(e){return a(e.x0)+"%"}).style("top",function(e){return n(e.y0)+"%"}).style("width",function(e){return a(e.x1)-a(e.x0)+"%"}).style("height",function(e){return n(e.y1)-n(e.y0)+"%"}),i.filter(function(e){return e.ancestors()}).classed("hide",function(e){return!!e.children}),i.filter(function(t){return t.depth>e}).classed("hide",!1)}return r.a.createElement("div",{className:"father-small"},r.a.createElement("nav",{className:"nav-bar-d3-small"},r.a.createElement("div",{className:"up-small"})),r.a.createElement("div",{className:"feature-small",id:"chart-small"}))}}]),t}(n.Component)),se=Object(G.a)(ie),ue=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={collection:{},treeData:{},data:{children:[{name:"Photo 1",value:"cgi-1.jpg"},{name:"Photo 1",value:"cgi-1.jpg"}]}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this;b.a.get("".concat("https://mn3m0s1n3.herokuapp.com/api","/collection/").concat(this.props.match.params.id)).then(function(t){var a=J(t.data.pieces);e.setState(Object(f.a)({},e.state,{collection:t.data,treeData:a}))})}},{key:"render",value:function(){return console.log(this.props),r.a.createElement("div",{className:"CollectionDetail-style"},r.a.createElement("div",{className:"CollectionDetail-top"},r.a.createElement("div",{className:"CollectionDetail-buttons"},r.a.createElement("h1",null,this.state.collection.name),r.a.createElement("button",{onClick:this.props.history.goBack},"Close")),r.a.createElement("div",null,r.a.createElement(se,{data:this.state.treeData}))))}}]),t}(n.Component),me=Object(G.a)(ue),de=(a(203),function(e){function t(e){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"initialcard"},r.a.createElement("button",{onClick:this.props.closeInitialCard},"\u2015"),r.a.createElement("p",null,r.a.createElement("span",{className:"bold-text"},"mnemosine")," is a tool for browsing media databases"," "),r.a.createElement("br",null),r.a.createElement("p",null,"At the beggining, random sample of the archive from the Metropolitan Museum of Art, Museum of Modern Art and Rijksmuseum of Amsterdam are showed. In total there are more than 1.230.000 pieces of art reachable through their APIs and databases."),r.a.createElement("br",null),r.a.createElement("p",null,"You can use the search bar in combination with the selector of tags and the range of years to find more results according to your interests."),r.a.createElement("br",null),r.a.createElement("ul",null,r.a.createElement("li",null,"The results are nested in 5 levels:"),r.a.createElement("li",null,r.a.createElement("span",{className:"bold-text"},"1")," Database to which they belong"),r.a.createElement("li",null,r.a.createElement("span",{className:"bold-text"},"2")," Year of creation"),r.a.createElement("li",null,r.a.createElement("span",{className:"bold-text"},"3")," Geographical origin"),r.a.createElement("li",null,r.a.createElement("span",{className:"bold-text"},"4")," Author"),r.a.createElement("li",null,r.a.createElement("span",{className:"bold-text"},"5")," Single piece")),r.a.createElement("br",null),r.a.createElement("p",null,"In the last level, you can open a new tab and get full info of the piece."),r.a.createElement("br",null),r.a.createElement("p",null,"Sign up and create your own collections adding pieces to them."),r.a.createElement("br",null),r.a.createElement("p",null,"You can like any item! They are showed bigger when they gain likes."),r.a.createElement("br",null),r.a.createElement("p",null,"The aim of the project is make possible connect more and more media databases."))}}]),t}(n.Component)),he=a(205),pe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).getUser=function(e){a.setState({loggedInUser:e})},a.logout=function(){a.service.logout().then(function(){a.setState({loggedInUser:null})})},a.state={loggedInUser:null,search:"",searchText:"",filters:[],yearRange:[],dataBases:["RMA","MOMA","MET"],resultsId:[],resultsDetail:[],tree:{},isLoaded:!0,introOpen:!0},a.service=new E,a.fetchUser(),a.sendSearch=a.sendSearch.bind(Object(d.a)(Object(d.a)(a))),a.closeInitialCard=a.closeInitialCard.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.randomSearch()}},{key:"randomSearch",value:function(){var e=this;b.a.get("".concat("https://mn3m0s1n3.herokuapp.com/api","/piecesrandom")).then(function(t){if(t=t.data){var a=t;console.log("results filteredResults",t,a);var n=J(a,e.nodeLength);console.log(n),e.setState({resultsDetail:a,tree:n})}})}},{key:"fetchUser",value:function(){var e=this;return this.service.loggedin().then(function(t){e.setState({loggedInUser:t})}).catch(function(t){e.setState({loggedInUser:!1})})}},{key:"setLoaded",value:function(){console.log("isloaded",this.state.loaded),this.setState({loaded:!0})}},{key:"searchMongo",value:function(e){var t=this;"Enter"===e.key&&(this.setState({isLoaded:!1}),setTimeout(function(){this.setState({isLoaded:!0})}.bind(this),4e3),e.preventDefault(),b.a.get("".concat("https://mn3m0s1n3.herokuapp.com/api","/pieces/").concat(e.target.value)).then(function(e){if(e=e.data){var a=e;console.log("results filteredResults",e,a);var n=J(a,t.nodeLength);console.log(n),t.setState({resultsDetail:a,tree:n})}}))}},{key:"sliderResult",value:function(e){this.setState({yearRange:e})}},{key:"saveSearch",value:function(e){this.setState({searchText:e.target.value})}},{key:"multipleSelectResult",value:function(e){this.setState({filters:e.target.value})}},{key:"sendSearch",value:function(){console.log("send",this.state.yearRange,this.state.searchText,this.state.filters,this.state.dataBases)}},{key:"closeInitialCard",value:function(){console.log("close"),this.setState({introOpen:!1})}},{key:"render",value:function(){var e=this;return console.log("app render",this.state.loaded),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"App"},this.state.introOpen&&r.a.createElement(de,{closeInitialCard:this.closeInitialCard}),r.a.createElement(he,{loaded:this.state.isLoaded,options:{lines:13,length:62,width:19,radius:39,scale:.2,corners:1,color:"#ffffff",fadeColor:"transparent",speed:.8,rotate:0,animation:"spinner-line-fade-default",direction:1,zIndex:2e9,className:"spinner",top:"48%",left:"50%",shadow:"0 0 5px black",position:"absolute"}}),r.a.createElement(ce,{setLoaded:this.setLoaded,data:this.state.tree}),r.a.createElement(j,{userInSession:this.state.loggedInUser,logout:this.logout,getUser:this.getUser}),r.a.createElement(h.a,null,r.a.createElement(p.a,{path:"/detail/:id",render:function(t){var a=t.match;return r.a.createElement(ne,{user:e.state.loggedInUser,match:a})}}),r.a.createElement(p.a,{path:"/collection/:id",render:function(t){var a=t.match;return r.a.createElement(me,{user:e.state.loggedInUser,match:a})}}),r.a.createElement(p.a,{path:"/profile",render:function(t){return r.a.createElement(Z,Object.assign({user:e.state.loggedInUser},t))}})),r.a.createElement(Y,{sendResults:this.sendSearch,sliderResult:function(t){return e.sliderResult(t)},multipleSelectResult:function(t){return e.multipleSelectResult(t)},saveSearch:function(t){return e.saveSearch(t)},searchMongo:function(t){return e.searchMongo(t)},tags:this.state.resultsDetail?this.state.resultsDetail:[]})))}}]),t}(n.Component),fe=a(264);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(fe.a,null,r.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},28:function(e,t,a){"use strict";var n=a(86),r=Object(n.a)({palette:{type:"dark",primary:{light:"#7986cb",main:"#FFFFFF",dark:"#303f9f"},secondary:{light:"#7986cb",main:"#7986cb",dark:"#7986cb"},typography:{htmlFontSize:1,fontSize:1},h1:{fontsize:"5rem"}},status:{}});t.a=r},99:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return k});var n=a(44),r=a(0),l=a.n(r),o=(a(4),a(245)),c=a(33),i=a(248),s=a(254),u=a(252),m=a(212),d=a(251),h=a(260),p=a(214),f=(a(178),a(28)),g=e.window.innerWidth,v=Object(o.a)(function(e){return{formControl:{margin:e.spacing(1),minWidth:g/4,maxWidth:g/4},chips:{display:"flex"},chip:{margin:0},noLabel:{marginTop:e.spacing(0)}}}),b={PaperProps:{style:{maxHeight:180,width:g/4}}},E=["Oliver","Van","April","Ralph","Omar","Carlos","Miriam","Bradley","Virginia","Kelly"];function y(e,t,a){return{fontWeight:-1===t.indexOf(e)?a.typography.fontWeightRegular:a.typography.fontWeightMedium}}function k(e){var t=v(),a=Object(c.a)(),r=l.a.useState([]),o=Object(n.a)(r,2),g=o[0],k=o[1];return l.a.createElement("div",null,l.a.createElement(i.a,{theme:f.a},l.a.createElement(d.a,{className:t.formControl},l.a.createElement(u.a,{id:"demo-mutiple-chip-label"},"Filters"),l.a.createElement(h.a,{labelId:"demo-mutiple-chip-label",id:"demo-mutiple-chip",multiple:!0,value:g,onChange:function(t){k(t.target.value),e.onSelectTag(t)},input:l.a.createElement(s.a,{id:"select-multiple-chip"}),renderValue:function(e){return l.a.createElement("div",{className:t.chips},e.map(function(e){return l.a.createElement(p.a,{key:e,label:e,className:t.chip})}))},MenuProps:b},E.map(function(e){return l.a.createElement(m.a,{key:e,value:e,style:y(e,g,a)},e)})))))}}).call(this,a(51))}},[[135,2,1]]]);
//# sourceMappingURL=main.7e3529e4.chunk.js.map