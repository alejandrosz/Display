{"version":3,"sources":["components/auth/AuthService.js","components/auth/Login.js","components/auth/Signup.js","components/navbar/Navbar.js","components/slider/Slider.js","components/footer/Footer.js","nestData.js","components/collection/Collection.js","components/collection/Collections.js","components/profile/Profile.js","components/detailPiece/DetailPiece.js","components/D3Test/D3Test2.js","components/D3Test/D3Test2small.js","components/CollectionDetail/CollectionDetail.js","App.js","serviceWorker.js","index.js"],"names":["AuthService","_this","this","Object","classCallCheck","signup","username","password","service","post","then","response","data","login","loggedin","get","logout","axios","create","baseURL","concat","process","withCredentials","Login","props","possibleConstructorReturn","getPrototypeOf","call","handleFormSubmit","event","preventDefault","state","setState","error","getUser","catch","handleChange","_event$target","target","name","value","defineProperty","_this2","react_default","a","createElement","className","onSubmit","autoComplete","type","onChange","e","placeholder","Component","Signup","user","Navbar","handleLogout","loggedInUser","isSignup","nextProps","objectSpread","Fragment","Link","to","onClick","components_auth_Login","changeState","components_auth_Signup","useStyles","makeStyles","theme","root","width","spacing","margin","height","iOSBoxShadow","AirbnbSlider","withStyles","color","padding","thumb","backgroundColor","boxShadow","marginTop","marginLeft","&:focus,&:hover,&$active","@media (hover: none)","active","valueLabel","left","top","& *","background","track","rail","opacity","mark","markActive","Slider","border","borderRadius","& .bar","marginRight","AirbnbThumbComponent","CustomizedSlider","classes","ThumbComponent","getAriaLabel","index","defaultValue","Footer","tags","onKeyDown","searchMongo","form","id","min","max","step","nestByMuseum","pieces","tree","children","forEach","m","museumPieces","filter","p","museum","bestImg","imageUrl","nestedMuseum","length","mainDates","allYears","map","year","piecesWithDate","y","Number","isInteger","sort","b","piecesWithNoDate","years","Math","floor","i","push","console","log","getDatesFromPieces","d","datePieces","nestedDates","origins","origin","newOrigin","includes","o","slice","originPieces","nestedOrigins","authors","author","authorPieces","size","rating","childDate","nestByAuthor","nestByOrigin","nestByDate","childMuseum","Collection","collection","_id","Axios","delete","reFetch","deleteCollection","piece","style","backgroundImage","Collections","newCollection","keyCode","sendName","updatedUser","_this3","collections","updateNewCollection","checkEnter","components_collection_Collection","Profile","profile","useUser","gotUser","setUserProfile","userData","next","getProfile","history","goBack","components_collection_Collections","withRouter","DetailPiece","isSaved","imageClass","addLike","bind","assertThisInitialized","some","find","match","params","_this4","pieceFound","aspectRatio","img","Image","src","onload","relation","_this5","put","pieceLiked","collectionId","_this6","pieceAdded","_this7","pieceDeleted","_this8","_this$state$piece","technic","description","culture","classification","department","class","every","addCollection","tag","D3Test2","goDetail","d3","selectAll","remove","url","currentDepth","x","domain","range","treemap","paddingInner","round","nodes","sum","cells","descendants","enter","append","attr","depth","x0","y0","x1","y1","parent","on","zoom","text","datum","t","duration","ease","transition","ancestors","classed","CollectionDetail","treeData","collectionFound","treeCollection","D3Test_D3Test2small","App","require","userObj","search","resultsId","resultsDetail","loaded","fetchUser","err","key","results","filteredResults","components_D3Test_D3Test2","components_navbar_Navbar","userInSession","Switch","Route","path","render","_ref","components_detailPiece_DetailPiece","_ref2","components_CollectionDetail_CollectionDetail","components_profile_Profile","assign","components_footer_Footer","Boolean","window","location","hostname","ReactDOM","BrowserRouter","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b99ae891.chunk.js","sourcesContent":["// auth/auth-service.js\nimport axios from 'axios';\n// require('dotenv').config();\n\nclass AuthService {\n  constructor() {\n    this.service = axios.create({\n      baseURL: `${process.env.REACT_APP_API_URL}/auth`,\n      // baseURL: `http://localhost:3010/api/auth`,\n      withCredentials: true\n    });\n  }\n\n  signup = (username, password) => {\n    return this.service.post('/signup', {username, password})\n    .then(response => response.data)\n  }\n\n  login = (username, password) => {\n    return this.service.post('/login', {username, password})\n    .then(response => response.data)\n  }\n\n  loggedin = () => {\n    return this.service.get('/currentUser',)\n    .then(response => response.data)\n  }\n\n  logout = () => {\n    return this.service.get('/logout',)\n    .then(response => response.data)\n  }\n}\n\nexport default AuthService;","// auth/Signup.js\nimport React, { Component } from \"react\";\n// import { Link } from \"react-router-dom\";\nimport AuthService from \"./AuthService\";\nimport \"./Login.scss\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { username: \"\", password: \"\" };\n    this.service = new AuthService();\n  }\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    const username = this.state.username;\n    const password = this.state.password;\n\n    this.service\n      .login(username, password)\n      .then(response => {\n        this.setState({\n          username: username,\n          password: password,\n          error: false\n        });\n\n        this.props.getUser(response);\n      })\n      .catch(error => {\n        this.setState({\n          username: username,\n          password: password,\n          error: true\n        });\n      });\n  };\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  render() {\n    return (\n      <div className=\"login-form\">\n        <p>{this.state.error ? \"error \" : \"\"}</p>\n        <form className=\"loginForm\" onSubmit={this.handleFormSubmit}>\n          {/* <label>name</label> */}\n          <input\n            autoComplete=\"off\"\n            type=\"text\"\n            name=\"username\"\n            value={this.state.username}\n            onChange={e => this.handleChange(e)}\n            placeholder=\"name:\"\n          />\n\n          {/* <label>pass</label> */}\n          <input\n            autoComplete=\"off\"\n            type=\"password\"\n            name=\"password\"\n            value={this.state.password}\n            onChange={e => this.handleChange(e)}\n            placeholder=\"| password:\"\n          />\n\n          <input type=\"submit\" value=\"Login\" />\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","// auth/Signup.js\nimport React, { Component } from \"react\";\nimport AuthService from \"./AuthService\";\nimport \"./Signup.scss\";\n\n//signup y login son iguales a excepción de el html renderizado y el endpoint de nuestra API rest a la que llamamos\n//uno llama a /signup y el otro a /login usando nuestro AuthService\nclass Signup extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { username: \"\", password: \"\" };\n    this.service = new AuthService();\n  }\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    const username = this.state.username;\n    const password = this.state.password;\n\n    //aquí llamamos al endpoint /signup de nuestra API Rest usando nuestro AuthService\n    this.service\n      .signup(username, password)\n      .then(response => {\n        this.setState({\n          username: \"\",\n          password: \"\"\n        });\n        //aquí elevamos el nuevo usuario una vez creado a App usando getUser via props\n        //por tanto, informamos a App de que el nuevo usuario ha sido creado, provocando un re-render\n        //y mostrando la parte de contenidos. Mira la función getUser de App para más info (date cuenta de que establece el state de App)\n        this.props.getUser(response.user);\n      })\n      .catch(error => {\n        this.setState({\n          username: username,\n          password: password,\n          error: true\n        });\n      });\n  };\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  render() {\n    return (\n      <div className=\"signup-form\">\n        <p>{this.state.error ? \"error \" : \"\"}</p>\n        <form className=\"signupForm\" onSubmit={this.handleFormSubmit}>\n          {/* <label>name</label> */}\n          <input\n            autoComplete=\"off\"\n            type=\"text\"\n            name=\"username\"\n            value={this.state.username}\n            onChange={e => this.handleChange(e)}\n            placeholder=\"name:\"\n          />\n\n          {/* <label>pass</label> */}\n          <input\n            autoComplete=\"off\"\n            type=\"password\"\n            name=\"password\"\n            value={this.state.password}\n            onChange={e => this.handleChange(e)}\n            placeholder=\"| password:\"\n          />\n\n          <input type=\"submit\" value=\"Sign up\" />\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Signup;\n","// navbar/Navbar.js\n\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport AuthService from \"../auth/AuthService\";\nimport \"./Navbar.scss\";\nimport Login from \"../auth/Login\";\nimport Signup from \"../auth/Signup\";\n\nclass Navbar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loggedInUser: null, isSignup: false };\n    this.service = new AuthService();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ ...this.state, loggedInUser: nextProps[\"userInSession\"] });\n  }\n\n  handleLogout = e => {\n    this.props.logout();\n  };\n\n  changeState() {\n    this.setState({\n      isSignup: !this.state.isSignup\n    });\n  }\n\n  render() {\n    // this.state.loggedInUser &&\n    //   console.log(\"navbar\", this.state.loggedInUser._id);\n    return (\n      <nav className=\"nav-style\">\n        {/* <input\n          type=\"text\"\n          onKeyDown={e => this.props.searchBar(e)}\n          placeholder=\"searchapi\"\n        ></input> */}\n\n        {this.state.loggedInUser ? (\n          <React.Fragment>\n            <div className=\"profile-navbar\">\n              {\" \"}\n              {/* <Link to={`/profile/${this.state.loogedInUser._id}`}> */}\n              <Link to=\"/profile\">\n                {\" \"}\n                <h1>{this.state.loggedInUser.username}</h1>\n              </Link>\n              <a onClick={this.handleLogout}>logout</a>\n            </div>\n          </React.Fragment>\n        ) : (\n          <ul>\n            {this.state.isSignup ? (\n              <div className=\"user-buttons\">\n                <Login getUser={this.props.getUser} />\n                <button\n                  className=\"change-style\"\n                  onClick={() => this.changeState()}\n                >\n                  or signup\n                </button>\n              </div>\n            ) : (\n              <div className=\"user-buttons\">\n                <Signup getUser={this.props.getUser} />\n                <button\n                  className=\"change-style\"\n                  onClick={() => this.changeState()}\n                >\n                  or login\n                </button>\n              </div>\n            )}\n          </ul>\n        )}\n      </nav>\n    );\n  }\n}\n\nexport default Navbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\nimport Slider from '@material-ui/core/Slider';\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: 300 + theme.spacing(3) * 2,\n  },\n  margin: {\n    height: theme.spacing(3),\n  },\n}));\n\nfunction ValueLabelComponent(props) {\n  const { children, open, value } = props;\n\n  return (\n    <Tooltip open={open} enterTouchDelay={0} placement=\"top\" title={value}>\n      {children}\n    </Tooltip>\n  );\n}\n\nValueLabelComponent.propTypes = {\n  children: PropTypes.element.isRequired,\n  open: PropTypes.bool.isRequired,\n  value: PropTypes.number.isRequired,\n};\n\nconst iOSBoxShadow =\n  '0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)';\n\nconst marks = [\n  {\n    value: 0,\n  },\n  {\n    value: 20,\n  },\n  {\n    value: 37,\n  },\n  {\n    value: 100,\n  },\n];\n\nconst IOSSlider = withStyles({\n  root: {\n    color: '#3880ff',\n    height: 2,\n    padding: '15px 0',\n  },\n  thumb: {\n    height: 28,\n    width: 28,\n    backgroundColor: '#fff',\n    boxShadow: iOSBoxShadow,\n    marginTop: -14,\n    marginLeft: -14,\n    '&:focus,&:hover,&$active': {\n      boxShadow: '0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)',\n      // Reset on touch devices, it doesn't add specificity\n      '@media (hover: none)': {\n        boxShadow: iOSBoxShadow,\n      },\n    },\n  },\n  active: {},\n  valueLabel: {\n    left: 'calc(-50% + 11px)',\n    top: -22,\n    '& *': {\n      background: 'transparent',\n      color: '#000',\n    },\n  },\n  track: {\n    height: 2,\n  },\n  rail: {\n    height: 2,\n    opacity: 0.5,\n    backgroundColor: '#bfbfbf',\n  },\n  mark: {\n    backgroundColor: '#bfbfbf',\n    height: 8,\n    width: 1,\n    marginTop: -3,\n  },\n  markActive: {\n    opacity: 1,\n    backgroundColor: 'currentColor',\n  },\n})(Slider);\n\nconst PrettoSlider = withStyles({\n  root: {\n    color: '#52af77',\n    height: 8,\n  },\n  thumb: {\n    height: 24,\n    width: 24,\n    backgroundColor: '#fff',\n    border: '2px solid currentColor',\n    marginTop: -8,\n    marginLeft: -12,\n    '&:focus,&:hover,&$active': {\n      boxShadow: 'inherit',\n    },\n  },\n  active: {},\n  valueLabel: {\n    left: 'calc(-50% + 4px)',\n  },\n  track: {\n    height: 8,\n    borderRadius: 4,\n  },\n  rail: {\n    height: 8,\n    borderRadius: 4,\n  },\n})(Slider);\n\nconst AirbnbSlider = withStyles({\n  root: {\n    color: '#3a8589',\n    height: 3,\n    padding: '13px 0',\n  },\n  thumb: {\n    height: 27,\n    width: 27,\n    backgroundColor: '#fff',\n    border: '1px solid currentColor',\n    marginTop: -12,\n    marginLeft: -13,\n    boxShadow: '#ebebeb 0px 2px 2px',\n    '&:focus,&:hover,&$active': {\n      boxShadow: '#ccc 0px 2px 3px 1px',\n    },\n    '& .bar': {\n      // display: inline-block !important;\n      height: 9,\n      width: 1,\n      backgroundColor: 'currentColor',\n      marginLeft: 1,\n      marginRight: 1,\n    },\n  },\n  active: {},\n  valueLabel: {\n    left: 'calc(-50% + 4px)',\n  },\n  track: {\n    height: 3,\n  },\n  rail: {\n    color: '#d8d8d8',\n    opacity: 1,\n    height: 3,\n  },\n})(Slider);\n\nfunction AirbnbThumbComponent(props) {\n  return (\n    <span {...props}>\n      <span className=\"bar\" />\n      <span className=\"bar\" />\n      <span className=\"bar\" />\n    </span>\n  );\n}\n\nexport default function CustomizedSlider() {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <AirbnbSlider\n        ThumbComponent={AirbnbThumbComponent}\n        getAriaLabel={index => (index === 0 ? 'Minimum price' : 'Maximum price')}\n        defaultValue={[20, 40]}\n      />\n    </div>\n  );\n}","import React, { Component } from \"react\";\n// import { Link } from \"react-router-dom\";\nimport \"./Footer.scss\";\n// import { Slider } from \"@material-ui/core\";\n// import noUiSlider from \"noUiSlider\"\n// import Nouislider from \"nouislider-react\";\n// import \"nouislider/distribute/nouislider.css\";\nimport Slider from \"../slider/Slider\";\n\nclass Footer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loggedInUser: null, isSignup: false, tags: [] };\n  }\n\n  // componentWillReceiveProps() {\n  //   this.getTags();\n  // }\n\n  // getTags() {\n  //   console.log(\"tags\", this.props.tags)\n  //   const tags = [];\n  //   this.props.tags.forEach(function(item) {\n  //     item.tags.forEach(function(tag) {\n  //       tags.push(tag.term);\n  //     });\n  //   });\n  //   const uniqueTags = [...new Set(tags)];\n  //   this.setState({ ...this.state, tags: uniqueTags });\n  // }\n\n  render() {\n    return (\n      <div className=\"footer-style\">\n        <input className=\"search-bar\"\n          type=\"text\"\n          onKeyDown={e => this.props.searchMongo(e)}\n          placeholder=\"search\"\n        ></input>\n        <select name=\"filterlist\" form=\"filterform\">\n          <option value=\"1\">Filters</option>\n          {/* {this.state.tags.map(tag => (\n            <option value={tag}>{tag}</option>\n          ))} */}\n        </select>\n        {/* const Slider = () => (\n        <Nouislider range={{ min: 0, max: 100 }} start={[20, 80]} connect />\n        ); */}\n        <input id=\"slider1\" type=\"range\" min=\"0\" max=\"2000\" step=\"1\"></input>\n        <Slider></Slider>\n      </div>\n    );\n\n    // let slider = document.getElementById(\"slider1\");\n\n    // noUiSlider.create(slider, {\n    //   start: [20, 80],\n    //   connect: true,\n    //   range: {\n    //     min: 0,\n    //     max: 100\n    //   }\n    // });\n  }\n}\n\nexport default Footer;\n","// export function filterResults(results) {\n//   const limit = 100;\n//   let filterResults = sortByRating(results).filter(p => !!p.imageUrl);\n//   if (results.length > limit) {\n//     filterResults = results.slice(0, limit + 1);\n//   }\n//   return filterResults;\n// }\n// export function sortByRating(pieces) {\n//   const ratedPieces = pieces.sort((a, b) => b.rating - a.rating);\n//   return ratedPieces;\n// }\nexport function nestByMuseum(pieces) {\n  const tree = { name: \"search\", value: \"\", children: [] };\n  const museums = [\"MET\", \"MOMA\", \"RMA\"];\n  museums.forEach(m => {\n    const museumPieces = pieces.filter(p => p.museum === m);\n    const bestImg = museumPieces[0] && museumPieces[0].imageUrl;\n    const nestedMuseum = museumPieces.length\n      ? nestByDate(museumPieces)\n      : [];\n    // console.log('nestByMuseum', nestedMuseum);\n    const childMuseum = {\n      name: m,\n      value: bestImg,\n      children: nestedMuseum,\n      size: museumPieces.length\n    };\n    tree.children.push(childMuseum);\n    // setState({ tree });\n  });\n  console.log(\"tree\", tree);\n  return tree;\n}\n\nexport function nestByDate(museumPieces) {\n  const mainDates = getDatesFromPieces(museumPieces);\n  // console.log('mainDates', mainDates);\n  const nestedMuseum = [];\n  mainDates.forEach((d, i) => {\n    const datePieces = museumPieces.filter(p => {\n      if (d === \"noDate\") {\n        return !Number.isInteger(p.year);\n      }\n      return (\n        p.year >= d && (mainDates[i + 1] ? p.year < mainDates[i + 1] : true)\n      );\n    });\n    const bestImg = datePieces[0] && datePieces[0].imageUrl;\n    const nestedDates = datePieces.length\n      ? nestByOrigin(datePieces)\n      : [];\n    // console.log('nestedDates', nestedDates);\n    const childDate = {\n      name: d,\n      value: bestImg,\n      children: nestedDates || [],\n      size: datePieces.length\n    };\n    nestedMuseum.push(childDate);\n  });\n  return nestedMuseum;\n}\nexport function getDatesFromPieces(museumPieces) {\n  const allYears = museumPieces.map(p => p.year);\n  const piecesWithDate = allYears\n    .filter(y => Number.isInteger(y))\n    .sort((a, b) => a - b);\n  const piecesWithNoDate = allYears.filter(y => !Number.isInteger(y));\n  // console.log('piecesWithDate', piecesWithDate, piecesWithNoDate);\n  const number = 4;\n  const years = [];\n  if (piecesWithDate.length >= number) {\n    const step = Math.floor(piecesWithDate.length / (number - 1));\n    for (let i = 0; i < piecesWithDate.length; i += step) {\n      if (piecesWithDate[i]) {\n        years.push(piecesWithDate[i]);\n      }\n    }\n    years.push(piecesWithDate[piecesWithDate.length - 1]);\n  }\n  if (piecesWithNoDate.length) {\n    years.push(\"noDate\");\n  }\n  console.log(\"years\", years);\n  return years;\n}\nexport function nestByOrigin(datePieces) {\n  const origins = [\"noOrigin\"];\n  const nestedDates = [];\n  datePieces.forEach(p => {\n    if (p.origin.length) {\n      p.origin.forEach(newOrigin => {\n        if (!origins.includes(newOrigin)) {\n          origins.push(newOrigin);\n        }\n      });\n      origins.sort();\n    }\n  });\n  // console.log('--- origins', origins);\n  console.log(\"nestByOrigin All\", datePieces.length);\n  origins.forEach((o, i) => {\n    const prevOrigins = i > 0 ? origins.slice(0, i) : [];\n    const originPieces = datePieces.filter(p => {\n      if (p.origin.length <= 0 && o === \"noOrigin\") {\n        return true;\n      }\n      return p.origin.includes(\n        o\n      ) /* &&\n        !p.origin.reduce((ac, or) => ac || prevOrigins.includes[or]) */;\n    });\n    /* console.log('-- currOrigin', o, 'prevOrigins', prevOrigins, 'filtered', [\n      ...originPieces.map(p => p.origin)\n    ]); */\n    const bestImg = originPieces[0] && originPieces[0].imageUrl;\n    const nestedOrigins = originPieces.length\n      ? nestByAuthor(originPieces)\n      : [];\n    console.log(\"nestByOrigin\", nestedOrigins.length, o);\n    const childDate = {\n      name: o,\n      value: bestImg,\n      children: nestedOrigins || [],\n      size: originPieces.length\n    };\n    if (nestedOrigins.length > 0) {\n      nestedDates.push(childDate);\n    }\n  });\n  return nestedDates;\n}\nexport function nestByAuthor(originPieces) {\n  const authors = [];\n  const nestedDates = [];\n  originPieces.forEach(p => {\n    if (p.author && !authors.includes(p.author)) {\n      authors.push(p.author);\n    }\n  });\n  authors.forEach((a, i) => {\n    const authorPieces = originPieces\n      .filter(p => p.author)\n      .map(p => {\n        p.value = p.imageUrl;\n        p.size = p.rating * 0.1;\n        // p.size = 1;\n        return p;\n      });\n    // console.log('nestByAuthor', authorPieces);\n    const bestImg = authorPieces[0] && authorPieces[0].imageUrl;\n    const childDate = {\n      name: a,\n      value: bestImg,\n      children: authorPieces || [],\n      size: authorPieces.length\n    };\n    if (authorPieces.length > 0) {\n      nestedDates.push(childDate);\n    }\n  });\n  return nestedDates;\n}\n\nexport default {nestByMuseum}","import React, { Component } from \"react\";\nimport \"./Collection.scss\";\nimport Axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n\nclass Collection extends Component {\n  // constructor(props) {}\n  deleteCollection() {\n    console.log(\"delete\", this.props.collection._id);\n    console.log(this.props);\n    Axios.delete(\n      `${process.env.REACT_APP_API_URL}/collection/${this.props.collection._id}`\n    ).then(() => {\n      console.log(\"callingrefetchcollection\", this.props.reFetch);\n      if (this.props.reFetch) {\n        this.props.reFetch();\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"collectionCard\">\n        <div className=\"collectionButtons\">\n          <h1>{this.props.collection.name}</h1>\n          <button className=\"button-moved-right\" onClick={() => this.deleteCollection()}>delete</button>\n        </div>\n        <Link to={`/collection/${this.props.collection._id}`}>\n          {\" \"}\n          <div className=\"collectionImages\">\n            {this.props.collection.pieces.slice(0, 4).map(piece => (\n              <div\n                className=\"imageSquare\"\n                style={{ backgroundImage: `url(${piece.imageUrl})` }}\n              ></div>\n            ))}\n          </div>\n        </Link>\n      </div>\n    );\n  }\n}\n\nexport default Collection;\n","import React, { Component } from \"react\";\nimport \"./Collections.scss\";\nimport Collection from \"./Collection\";\nimport Axios from \"axios\";\n\nclass Collections extends Component {\n  // constructor(props) {}\n  state = { newCollection: \"\" };\n\n  updateNewCollection(e) {\n    this.setState({\n      ...this.state,\n      newCollection: e.target.value\n    });\n  }\n\n  checkEnter(e) {\n    if (e.keyCode === 13) {\n      this.sendName();\n    }\n  }\n\n  sendName() {\n    Axios.post(\n      `${process.env.REACT_APP_API_URL}/collection/${this.props.user._id}`,\n      {\n        name: this.state.newCollection\n      }\n    ).then(updatedUser => this.props.reFetch(updatedUser.data));\n  }\n\n  render() {\n    console.log(\"num collections\", this.props.collections.length);\n    return (\n      <div className=\"collections-style\">\n        <div className=\"add-field\">\n          <input\n            autoComplete=\"off\"\n            type=\"text\"\n            placeholder=\"create new collection\"\n            id=\"create-collection\"\n            value={this.state.newCollection}\n            onChange={e => this.updateNewCollection(e)}\n            onKeyDown={e => this.checkEnter(e)}\n          />\n          <button onClick={() => this.sendName()}>add</button>\n        </div>\n        {this.props.collections.map(collection => (\n          <Collection\n            collection={collection}\n            reFetch={this.props.reFetch}\n          ></Collection>\n        ))}\n      </div>\n    );\n  }\n}\n\nexport default Collections;\n","import React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport \"./Profile.scss\";\nimport Axios from \"axios\";\nimport Collections from \"../collection/Collections\";\n// import * as IndexService from \"../../services/service\";\n\nclass Profile extends Component {\n  // constructor(props) {\n  //   super(props);\n  //   this.state = { profile: {} };\n  // }\n  state = { profile: {} };\n\n  getProfile(user) {\n    console.log(\"callingrefetchprofile\", user, this.props.user);\n    let useUser = user || this.props.user;\n    if (useUser) {\n      Axios.get(`${process.env.REACT_APP_API_URL}/profile/${useUser._id}`).then(\n        gotUser => {\n          this.setUserProfile(gotUser.data);\n        }\n      );\n    }\n  }\n\n  setUserProfile(userData) {\n    this.setState({ ...this.state, profile: userData });\n    console.log(\n      \"collections from back\",\n      userData && userData.collections && userData.collections.length\n    );\n  }\n\n  componentWillReceiveProps(next) {\n    this.getProfile(next.user);\n  }\n\n  componentDidMount() {\n    this.getProfile(this.props.user);\n  }\n\n  render() {\n    const { profile } = this.state;\n    // console.log(\"user\", this.props.user);\n    console.log(\n      \"profile collections\",\n      profile && profile.collections && profile.collections.length\n    );\n\n    if (this.props.user) {\n      return (\n        <div className=\"Profile-style\">\n          <div className=\"Profile-top\">\n            <div className=\"Profile-name\">\n              {\" \"}\n              <h1>Profile of {this.props.user.username}</h1>\n              <button onClick={this.props.history.goBack}>Close</button>\n\n            </div>\n            <div>\n              {profile && profile.collections && (\n                <Collections\n                  user={this.props.user}\n                  collections={profile.collections}\n                  reFetch={() => this.getProfile()}\n                ></Collections>\n              )}\n            </div>\n          </div>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"Profile-style\">\n          <div className=\"Profile-top\">\n            <h1>Profile of </h1>\n            <Link to=\"/\">\n              <h1>X</h1>\n            </Link>\n          </div>\n          \n          <div className=\"Profile-body\"></div>\n        </div>\n      );\n    }\n  }\n}\n\nexport default withRouter(Profile);\n","import React, { Component } from \"react\";\nimport \"./DetailPiece.scss\";\nimport { Link, useRouteMatch, withRouter } from \"react-router-dom\";\nimport Axios from \"axios\";\n\nclass DetailPiece extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { piece: {}, user: {}, isSaved: false, imageClass: \"\" };\n    this.addLike = this.addLike.bind(this);\n  }\n\n  getProfile(user) {\n    let useUser = user || this.props.user;\n    if (useUser) {\n      Axios.get(`${process.env.REACT_APP_API_URL}/profile/${useUser._id}`).then(\n        gotUser => {\n          this.setUserProfile(gotUser.data);\n        }\n      );\n    }\n  }\n\n  setUserProfile(userData) {\n    let isSaved =\n      userData.collections &&\n      userData.collections.some(collection =>\n        collection.pieces.find(\n          piece => piece._id === this.props.match.params.id\n        )\n      );\n\n    this.setState({ ...this.state, user: userData, isSaved });\n  }\n\n  componentWillReceiveProps(next) {\n    this.getProfile(next.user);\n  }\n\n  componentDidMount() {\n    this.getProfile(this.props.user);\n    Axios.get(\n      `${process.env.REACT_APP_API_URL}/piece/${this.props.match.params.id}`\n    ).then(pieceFound => {\n      let aspectRatio = \"\";\n      var img = new Image();\n      img.src = pieceFound.data.imageUrl;\n      img.onload = () => {\n        let height = img.height;\n        let width = img.width;\n        let relation = height / width;\n        if (relation > 0.9 && relation < 1.1) {\n          aspectRatio = \"square-img\";\n        } else if (relation >= 1.1) {\n          aspectRatio = \"vertical-img\";\n        } else if (relation <= 0.9) {\n          aspectRatio = \"horizontal-img\";\n        }\n\n        this.setState({\n          ...this.state,\n          piece: pieceFound.data,\n          imageClass: aspectRatio\n        });\n      };\n\n      console.log(\"state\", this.state);\n    });\n  }\n\n  addLike() {\n    Axios.put(\n      `${process.env.REACT_APP_API_URL}/piece/like/${this.state.piece._id}`\n    ).then(pieceLiked => {\n      this.setState({ piece: pieceLiked.data });\n    });\n  }\n  addCollection(collectionId) {\n    Axios.put(\n      `${process.env.REACT_APP_API_URL}/collection/add/${collectionId}&${this.state.piece._id}`\n    ).then(pieceAdded => {\n      console.log(\"pieceAdded\", pieceAdded.data);\n      this.getProfile(this.state.user);\n    });\n  }\n\n  deleteCollection(collectionId) {\n    Axios.put(\n      `${process.env.REACT_APP_API_URL}/collection/del/${collectionId}&${this.state.piece._id}`\n    ).then(pieceDeleted => {\n      console.log(\"pieceDeleted\", pieceDeleted.data);\n      this.getProfile(this.state.user);\n    });\n  }\n\n  render() {\n    let {\n      origin,\n      technic,\n      tags,\n      museum,\n      name,\n      imageUrl,\n      description,\n      author,\n      year,\n      culture,\n      classification,\n      rating,\n      department\n    } = this.state.piece;\n\n    return (\n      <div className=\"detailPiece\">\n        <div className=\"detail-card\">\n          <div className=\"detail-top\">\n            <h1>Detail view</h1>\n            <button onClick={this.props.history.goBack}>Close</button>\n          </div>\n          <div className=\"image-container\">\n            <img className={this.state.imageClass} src={imageUrl} />\n          </div>\n          <div className=\"detail-buttons\">\n            <h1>&hearts;{rating}</h1>\n            {/* {this.state.isSaved ? <h1> saved</h1> : <h1>not saved</h1>} */}\n            <button onClick={this.addLike}>like</button>\n            <div class=\"dropdown\">\n              <button class=\"dropbtn\">Add</button>\n              <div class=\"dropdown-content\">\n                {this.state &&\n                  this.state.user &&\n                  this.state.user.collections &&\n                  this.state.user.collections\n                    .filter(collection =>\n                      collection.pieces.every(\n                        p => p._id !== this.props.match.params.id\n                      )\n                    )\n                    .map(collection => (\n                      <button\n                        onClick={() => this.addCollection(collection._id)}\n                        class=\"droppedbtn\"\n                      >\n                        {collection.name}\n                      </button>\n                    ))}\n              </div>\n            </div>\n            {this.state.isSaved && (\n              <div class=\"dropdown\">\n                <button class=\"dropbtn\">Delete</button>\n                <div class=\"dropdown-content\">\n                  {this.state &&\n                    this.state.user &&\n                    this.state.user.collections &&\n                    this.state.user.collections\n                      .filter(collection =>\n                        collection.pieces.some(\n                          p => p._id === this.props.match.params.id\n                        )\n                      )\n                      .map(collection => (\n                        <button\n                          onClick={() => this.deleteCollection(collection._id)}\n                          class=\"droppedbtn\"\n                        >\n                          {collection.name}\n                        </button>\n                      ))}\n                </div>\n              </div>\n            )}\n          </div>\n          <div className=\"detail-text\">\n            {\" \"}\n            {<h1>{name}</h1>}\n            {author && <p>author {author}</p>}\n            {year && <p>year {year}</p>}\n            {museum === \"RMA\" ? (\n              <p>Rijksmuseum of Amsterdam</p>\n            ) : museum === \"MOMA\" ? (\n              <p>MoMA New York</p>\n            ) : (\n              <p>Metropolitan Museum of Art</p>\n            )}\n            {technic && <p>technic {technic}</p>}\n            {origin && (\n              <p>\n                origin\n                {origin && <p>{origin[0]}</p>}\n              </p>\n            )}\n            {tags && (\n              <p>\n                tags\n                {tags && tags.map(tag => <p>{tag}</p>)}\n              </p>\n            )}\n            {description && <p>description{description}</p>}\n            {culture && <p>culture{culture}</p>}\n            {classification && <p>classification{classification}</p>}\n            {department && <p>department{department}</p>}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(DetailPiece);\n","import React, { Component } from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport * as d3 from \"d3\";\nimport \"./D3Test2.scss\";\nimport { withRouter } from \"react-router-dom\";\n\n// import data from \"./Dataset1\";\n// import data2 from \"./Dataset2\";\n// import data from \"./Dataset3\";\n// import data from \"./Dataset4\";\n\n// import * as data2 from './Dataset2'\n\nclass D3Test2 extends Component {\n  constructor(props) {\n    super(props);\n    this.goDetail = this.goDetail.bind(this);\n  }\n  componentWillReceiveProps(nextProps) {\n    var chart = d3.select(\"#chart\");\n    chart.selectAll(\"*\").remove();\n  }\n\n  goDetail(d) {\n    let url = `/detail/${d.data._id}`;\n    return this.props.history.push(url);\n    // return <Route render={() => <Redirect to={url} />} />;\n  }\n\n  render() {\n    let data = this.props.data;\n    var width = 100, // % of the parent element\n      height = 100,\n      x = d3\n        .scaleLinear()\n        .domain([0, width])\n        .range([0, width]),\n      y = d3\n        .scaleLinear()\n        .domain([0, height])\n        .range([0, height]),\n      color = d3.rgb\n      // d3.scaleOrdinal().range(\n      //   // d3.schemeGreys.map(function(c) {\n      //   d3.schemeSet1.map(function(c) {\n      //     // d3.schemeSet1.map(function(c) {\n      //     c = d3.rgb(c);\n      //     //c.opacity = 0.5;\n      //     return c;\n      //   })\n      // )\n      ,\n      treemap = d3\n        .treemap()\n        .size([width, height])\n        //.tile(d3.treemapResquarify) // doesn't work - height & width is 100%\n        .paddingInner(0)\n        .round(false), //true\n      nodes = d3.hierarchy(data).sum(function(d) {\n        return d.value ? 1 : 0;\n      }),\n      //.sort(function(a, b) { return b.height - a.height || b.value - a.value });\n\n      currentDepth;\n\n    treemap(nodes);\n\n    var chart = d3.select(\"#chart\");\n    var cells = chart\n      .selectAll(\".node\")\n      .data(nodes.descendants())\n      .enter()\n      .append(\"div\")\n      .attr(\"class\", function(d) {\n        return \"node level-\" + d.depth;\n      })\n      .attr(\"title\", function(d) {\n        return d.data.name ? d.data.name : \"null\";\n      });\n\n    cells\n      .style(\"left\", function(d) {\n        return x(d.x0) + \"%\";\n      })\n      .style(\"top\", function(d) {\n        return y(d.y0) + \"%\";\n      })\n      .style(\"width\", function(d) {\n        return x(d.x1) - x(d.x0) + \"%\";\n      })\n      .style(\"height\", function(d) {\n        return y(d.y1) - y(d.y0) + \"%\";\n      })\n      //.style(\"background-image\", function(d) { return d.value ? imgUrl + d.value : \"\"; })\n      .style(\"background-image\", function(d) {\n        return d.value ? `url(${d.data.value})` : \"none\";\n      })\n\n      // .style(\"background-image\", function(d) { return d.value ? \"url(http://placekitten.com/g/300/300)\" : \"none\"; })\n      .style(\"background-color\", function(d) {\n        while (d.depth > 2) d = d.parent;\n        return color(d.data.name);\n      })\n      .on(\"click\", zoom)\n      .append(\"p\")\n      .attr(\"class\", \"label\")\n      .text(function(d) {\n        return d.data.name ? d.data.name : \"---\";\n      });\n    //.style(\"font-size\", \"\")\n    //.style(\"opacity\", function(d) { return isOverflowed( d.parent ) ? 1 : 0; });\n\n    // function goDetail(d) {\n    //   console.log(\"detail\", `${process.env.REACT_APP_URL}/detail/${d.data._id}`);\n    //   let url = `${process.env.REACT_APP_URL}/detail/${d.data._id}`;\n    //   return <Redirect to={url} />;\n    // }\n\n    cells // show this depth + 1 and below\n      .filter(function(d) {\n        return d.depth >= 5;\n      })\n      // .attr(\"class\", \"laultima\")\n      .append(\"button\") \n      .text(\"detail\")\n      .attr(\"class\", \"button-detail\")\n      .on(\"click\", this.goDetail)\n      // .style(\"border\", \"4px solid #000000\");\n\n      // cells // show this depth + 1 and below\n      // .filter(function(d) {\n      //   return d.depth >= 5;\n      // })\n      // .attr(\"class\", \"laultima\")\n    \n\n    // .append(\"a\")\n\n    // .append(\"rect\")\n    // .attr(\"x\", 50)\n    // .attr(\"y\", 50)\n    // .attr(\"height\", 50)\n    // .attr(\"width\", 50)\n    // .style(\"fill\", \"lightgreen\")\n    // .style(\"border\", \"50px solid #0000FF\");\n\n    // <Link to=`/detail/${d.data._id}`>\n    //   {\" \"}\n    // </Link>;\n\n    var parent = d3\n      .select(\".up\")\n      .datum(nodes)\n      .on(\"click\", zoom);\n    function zoom(d) {\n      // http://jsfiddle.net/ramnathv/amszcymq/\n\n      // console.log(\"clicked: \" + d.data.name + \", depth: \" + d.depth);\n\n      currentDepth = d.depth;\n\n      parent.datum(d.parent || nodes);\n\n      x.domain([d.x0, d.x1]);\n      y.domain([d.y0, d.y1]);\n\n      var t = d3\n        .transition()\n        // .duration(Math.floor(Math.random() * 2200) + 1200)\n        .duration(1200)\n\n        .ease(d3.easeCubicOut);\n\n      cells\n        .transition(t)\n        .style(\"left\", function(d) {\n          return x(d.x0) + \"%\";\n        })\n        .style(\"top\", function(d) {\n          return y(d.y0) + \"%\";\n        })\n        .style(\"width\", function(d) {\n          return x(d.x1) - x(d.x0) + \"%\";\n        })\n        .style(\"height\", function(d) {\n          return y(d.y1) - y(d.y0) + \"%\";\n        });\n\n      cells // hide this depth and above\n        .filter(function(d) {\n          return d.ancestors();\n        })\n        .classed(\"hide\", function(d) {\n          return d.children ? true : false;\n        });\n\n      cells // show this depth + 1 and below\n        .filter(function(d) {\n          return d.depth > currentDepth;\n        })\n        .classed(\"hide\", false);\n    }\n\n    return (\n      <div className=\"father\">\n        <nav className=\"nav-bar-d3\">\n          <div className=\"up\">mnemosine</div>\n        </nav>\n        <div className=\"feature\" id=\"chart\"></div>\n      </div>\n    );\n  }\n}\nexport default withRouter(D3Test2);\n","import React, { Component } from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport * as d3 from \"d3\";\nimport \"./D3Test2small.scss\";\nimport { withRouter } from \"react-router-dom\";\n\n// import data from \"./Dataset1\";\n// import data2 from \"./Dataset2\";\n// import data from \"./Dataset3\";\n// import data from \"./Dataset4\";\n\n// import * as data2 from './Dataset2'\n\nclass D3Test2 extends Component {\n  constructor(props) {\n    super(props);\n    this.goDetail = this.goDetail.bind(this);\n  }\n  componentWillReceiveProps(nextProps) {\n    var chart = d3.select(\"#chart\");\n    chart.selectAll(\"*\").remove();\n  }\n\n  goDetail(d) {\n    let url = `/detail/${d.data._id}`;\n    return this.props.history.push(url);\n    // return <Route render={() => <Redirect to={url} />} />;\n  }\n\n  render() {\n    let data = this.props.data;\n    var width = 80, // % of the parent element\n      height = 80,\n      x = d3\n        .scaleLinear()\n        .domain([0, width])\n        .range([0, width]),\n      y = d3\n        .scaleLinear()\n        .domain([0, height])\n        .range([0, height]),\n      color =  d3.rgb\n      // d3.scaleOrdinal().range(\n      //   // d3.schemeGreys.map(function(c) {\n      //   d3.schemeSet1.map(function(c) {\n      //     // d3.schemeSet1.map(function(c) {\n      //     c = d3.rgb(c);\n      //     //c.opacity = 0.5;\n      //     return c;\n      //   })\n      // )\n      ,\n      treemap = d3\n        .treemap()\n        .size([width, height])\n        //.tile(d3.treemapResquarify) // doesn't work - height & width is 100%\n        .paddingInner(0)\n        .round(false), //true\n      nodes = d3.hierarchy(data).sum(function(d) {\n        return d.value ? 1 : 0;\n      }),\n      //.sort(function(a, b) { return b.height - a.height || b.value - a.value });\n\n      currentDepth;\n\n    treemap(nodes)\n    ;\n\n    var chart = d3.select(\"#chart\");\n    var cells = chart\n    .selectAll(\".node\")\n    .data(nodes.descendants())\n    .enter()\n    .append(\"div\")\n    \n    .attr(\"class\", function(d) {\n      return \"node-small level-small-\" + d.depth;\n    })\n    .attr(\"title\", function(d) {\n      return d.data.name ? d.data.name : \"null\";\n    })\n    .attr(\"transform\", \"translate(90 90)\")\n    \n    ;\n    \n    cells\n    .attr(\"transform\", \"translate(90 90)\")\n    .style(\"left\", function(d) {\n      return x(d.x0) + \"%\";\n      })\n      .style(\"top\", function(d) {\n        return y(d.y0) + \"%\";\n      })\n      .style(\"width\", function(d) {\n        return x(d.x1) - x(d.x0) + \"%\";\n      })\n      .style(\"height\", function(d) {\n        return y(d.y1) - y(d.y0) + \"%\";\n      })\n      //.style(\"background-image\", function(d) { return d.value ? imgUrl + d.value : \"\"; })\n      .style(\"background-image\", function(d) {\n        return d.value ? `url(${d.data.value})` : \"none\";\n      })\n\n\n      // .style(\"background-image\", function(d) { return d.value ? \"url(http://placekitten.com/g/300/300)\" : \"none\"; })\n      .style(\"background-color\", function(d) {\n        while (d.depth > 2) d = d.parent;\n        return color(d.data.name);\n      })\n      .on(\"click\", zoom)\n      .append(\"p\")\n      .attr(\"class\", \"label\")\n      .text(function(d) {\n        return d.data.name ? d.data.name : \"---\";\n      });\n\n    cells // show this depth + 1 and below\n    .filter(function(d) {\n      return d.depth >= 5;\n    })\n    \n    .append(\"button\")\n    .attr(\"class\", \"button-detail\")\n    .on(\"click\", this.goDetail)\n    .style(\"border\", \"50px solid #FFFFFF\");\n    \n    var parent = d3\n    .select(\".up\")\n    .datum(nodes)\n    .on(\"click\", zoom);\n    function zoom(d) {\n      // http://jsfiddle.net/ramnathv/amszcymq/\n      \n      // console.log(\"clicked: \" + d.data.name + \", depth: \" + d.depth);\n      \n      currentDepth = d.depth;\n      \n      parent.datum(d.parent || nodes);\n      \n      x.domain([d.x0, d.x1]);\n      y.domain([d.y0, d.y1]);\n      \n      var t = d3\n      .transition()\n      // .duration(Math.floor(Math.random() * 2200) + 1200)\n        .duration(1200)\n\n        .ease(d3.easeCubicOut);\n\n      cells\n        .transition(t)\n        .style(\"left\", function(d) {\n          return x(d.x0) + \"%\";\n        })\n        .style(\"top\", function(d) {\n          return y(d.y0) + \"%\";\n        })\n        .style(\"width\", function(d) {\n          return x(d.x1) - x(d.x0) + \"%\";\n        })\n        .style(\"height\", function(d) {\n          return y(d.y1) - y(d.y0) + \"%\";\n        });\n\n      cells // hide this depth and above\n        .filter(function(d) {\n          return d.ancestors();\n        })\n        .classed(\"hide\", function(d) {\n          return d.children ? true : false;\n        });\n\n      cells // show this depth + 1 and below\n        .filter(function(d) {\n          return d.depth > currentDepth;\n        })\n        .classed(\"hide\", false);\n    }\n\n    return (\n      <div className=\"father-small\">\n        <nav className=\"nav-bar-d3-small\">\n          <div className=\"up-small\">mnemosine</div>\n        </nav>\n        <div className=\"feature-small\" id=\"chart-small\"></div>\n      </div>\n    );\n  }\n}\nexport default withRouter(D3Test2);\n","import React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport \"./CollectionDetail.scss\";\nimport Axios from \"axios\";\nimport D3Test2small from \"../../components/D3Test/D3Test2small\";\nimport { nestByMuseum } from \"../../nestData\";\n\nclass CollectionDetail extends Component {\n  state = {\n    collection: {},\n    treeData: {},\n    // name: \"Identity\",\n    data: {\n      children: [\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 5\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 5\", value: \"cgi-2.jpg\" }\n      ]\n    }\n  };\n\n  componentWillMount() {\n    console.log(this.props.match.params.id);\n    Axios.get(\n      `${process.env.REACT_APP_API_URL}/collection/${this.props.match.params.id}`\n    ).then(collectionFound => {\n      console.log(collectionFound.data)\n      const treeCollection = nestByMuseum(collectionFound.data.pieces);\n      console.log(treeCollection)\n      this.setState({\n        ...this.state,\n        collection: collectionFound.data,\n        treeData: treeCollection\n      });\n      console.log(\"state\", this.state);\n    });\n  }\n\n  render() {\n    console.log(this.props);\n    return (\n      <div className=\"CollectionDetail-style\">\n        {\" \"}\n        <div className=\"CollectionDetail-top\">\n          {\" \"}\n          <div className=\"CollectionDetail-buttons\">\n            <h1>{this.state.collection.name}</h1>\n            <button onClick={this.props.history.goBack}>Close</button>\n\n          </div>\n          <div>\n            <D3Test2small data={this.state.treeData}></D3Test2small>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(CollectionDetail);\n","import React, { Component } from \"react\";\nimport \"./App.scss\";\nimport \"../src/components/treeStyles.css\";\nimport { Switch, Route } from \"react-router-dom\";\nimport Navbar from \"./components/navbar/Navbar\";\nimport AuthService from \"./components/auth/AuthService\";\nimport axios from \"axios\";\nimport Footer from \"./components/footer/Footer\";\nimport {nestByMuseum} from \"./nestData\"\n// import * as d3 from \"d3\";\n// import \"../treeStyles.css\"\nimport Profile from \"./components/profile/Profile\";\nimport DetailPiece from \"./components/detailPiece/DetailPiece\";\nimport D3Test2 from \"./components/D3Test/D3Test2\";\nimport CollectionDetail from \"./components/CollectionDetail/CollectionDetail\";\nvar Loader = require('react-loader');\n\n\n// d3.select(this.refs.myDiv).style(“background-color”, “blue”)\n// render(<div ref=”myDiv”></div>)\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loggedInUser: null,\n      search: \"\",\n      resultsId: [],\n      resultsDetail: [],\n      tree: {},\n      loaded: false\n    };\n    this.service = new AuthService();\n    this.fetchUser();\n  }\n\n  getUser = userObj => {\n    this.setState({\n      loggedInUser: userObj\n    });\n  };\n  logout = () => {\n    this.service.logout().then(() => {\n      this.setState({ loggedInUser: null });\n    });\n  };\n  fetchUser() {\n    return this.service\n      .loggedin()\n      .then(response => {\n        this.setState({\n          loggedInUser: response\n        });\n      })\n      .catch(err => {\n        this.setState({\n          loggedInUser: false\n        });\n      });\n  }\n\n  // searchBar(e) {\n  //   if (e.key === \"Enter\") {\n  //     axios\n  //       .get(\n  //         `https://collectionapi.metmuseum.org/public/collection/v1/search?q=${e.target.value}`\n  //       )\n  //       .then(results => {\n  //         results = results.data.objectIDs;\n  //         if (results) {\n  //           this.setState({ resultsId: results }, () => {\n  //             this.getResultsDetail(0);\n  //           });\n  //         }\n  //       });\n  //   }\n  // }\n\n  searchMongo(e) {\n    if (e.key === \"Enter\") {\n      axios\n        .get(`${process.env.REACT_APP_API_URL}/pieces/${e.target.value}`)\n        .then(results => {\n          results = results.data;\n          if (results) {\n            const filteredResults = results; //this.filterResults(results);\n            console.log(\"results filteredResults\", results, filteredResults);\n            const tree = nestByMuseum(filteredResults);\n            this.setState({ resultsDetail: filteredResults, tree: tree, loaded: true });\n          }\n        });\n    }\n  }\n  // /////////////////////////////\n  \n\n  // getData(results) {\n  //   let data = results.map(result => ({\n  //     name: result.name,\n  //     value: result.imageUrl\n  //   }));\n  //   this.setState({ resultsDetail: { children: data } });\n  //   console.log(\"state\", this.state.resultsDetail);\n  // }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"App\">\n          {/* <Loader loaded={this.state.loaded}> */}\n          <D3Test2 data={this.state.tree}></D3Test2>\n          {/* </Loader> */}\n          <Navbar\n            // searchBar={e => this.searchBar(e)}\n            userInSession={this.state.loggedInUser}\n            logout={this.logout}\n            getUser={this.getUser}\n          />\n          <Switch>\n            <Route\n              path=\"/detail/:id\"\n              render={({ match }) => (\n                <DetailPiece user={this.state.loggedInUser} match={match} />\n              )}\n            />\n            <Route\n              path=\"/collection/:id\"\n              render={({ match }) => (\n                <CollectionDetail\n                  user={this.state.loggedInUser}\n                  match={match}\n                />\n              )}\n            />\n            {/* <Route  path=\"/\" /> */}\n            <Route\n              // path=\"/profile/:id\"\n              path=\"/profile\"\n              render={props => (\n                <Profile user={this.state.loggedInUser} {...props} />\n              )}\n            />\n          </Switch>\n          <Footer\n            searchMongo={e => this.searchMongo(e)}\n            tags={this.state.resultsDetail ? this.state.resultsDetail : []}\n          ></Footer>\n        </div>\n        {/* <SimpleTreemapExample></SimpleTreemapExample> */}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Router><App /></Router>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}