(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,n){},122:function(e,t,n){},124:function(e,t,n){},126:function(e,t,n){},130:function(e,t,n){},135:function(e,t,n){},137:function(e,t,n){},139:function(e,t,n){},142:function(e,t,n){},144:function(e,t,n){},146:function(e,t,n){},148:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),c=n.n(o),i=(n(97),n(3)),l=n(5),s=n(7),u=n(6),h=n(8),m=(n(99),n(102),n(182)),p=n(177),d=n(17),f=n(174),g=n(10),v=n.n(g),b=function e(){var t=this;Object(i.a)(this,e),this.signup=function(e,n){return t.service.post("/signup",{username:e,password:n}).then(function(e){return e.data})},this.login=function(e,n){return t.service.post("/login",{username:e,password:n}).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/currentUser").then(function(e){return e.data})},this.logout=function(){return t.service.get("/logout").then(function(e){return e.data})},this.service=v.a.create({baseURL:"".concat("https://mn3m0s1n3.herokuapp.com/api","/auth"),withCredentials:!0})},E=(n(122),n(25)),y=(n(124),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=n.state.username,a=n.state.password;n.service.login(t,a).then(function(e){n.setState({username:t,password:a,error:!1}),n.props.getUser(e)}).catch(function(e){n.setState({username:t,password:a,error:!0})})},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(E.a)({},a,r))},n.state={username:"",password:""},n.service=new b,n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login-form"},r.a.createElement("p",null,this.state.error?"error ":""),r.a.createElement("form",{className:"loginForm",onSubmit:this.handleFormSubmit},r.a.createElement("input",{autoComplete:"off",type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)},placeholder:"name:"}),r.a.createElement("input",{autoComplete:"off",type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)},placeholder:"| password:"}),r.a.createElement("input",{type:"submit",value:"Login"})))}}]),t}(a.Component)),k=(n(126),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=n.state.username,a=n.state.password;n.service.signup(t,a).then(function(e){n.setState({username:"",password:""}),n.props.getUser(e.user)}).catch(function(e){n.setState({username:t,password:a,error:!0})})},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(E.a)({},a,r))},n.state={username:"",password:""},n.service=new b,n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"signup-form"},r.a.createElement("p",null,this.state.error?"error ":""),r.a.createElement("form",{className:"signupForm",onSubmit:this.handleFormSubmit},r.a.createElement("input",{autoComplete:"off",type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)},placeholder:"name:"}),r.a.createElement("input",{autoComplete:"off",type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)},placeholder:"| password:"}),r.a.createElement("input",{type:"submit",value:"Sign up"})))}}]),t}(a.Component)),j=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleLogout=function(e){n.props.logout()},n.state={loggedInUser:null,isSignup:!1},n.service=new b,n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(d.a)({},this.state,{loggedInUser:e.userInSession}))}},{key:"changeState",value:function(){this.setState({isSignup:!this.state.isSignup})}},{key:"render",value:function(){var e=this;return r.a.createElement("nav",{className:"nav-style"},this.state.loggedInUser?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"profile-navbar"}," ",r.a.createElement(f.a,{to:"/profile"}," ",r.a.createElement("h1",null,this.state.loggedInUser.username)),r.a.createElement("a",{onClick:this.handleLogout},"logout"))):r.a.createElement("ul",null,this.state.isSignup?r.a.createElement("div",{className:"user-buttons"},r.a.createElement(y,{getUser:this.props.getUser}),r.a.createElement("button",{className:"change-style",onClick:function(){return e.changeState()}},"or signup")):r.a.createElement("div",{className:"user-buttons"},r.a.createElement(k,{getUser:this.props.getUser}),r.a.createElement("button",{className:"change-style",onClick:function(){return e.changeState()}},"or login"))))}}]),t}(a.Component),O=(n(130),n(175)),C=n(45),w=n(180),x=(n(179),Object(O.a)(function(e){return{root:{width:300+2*e.spacing(3)},margin:{height:e.spacing(3)}}}));var N="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",S=(Object(C.a)({root:{color:"#3880ff",height:2,padding:"15px 0"},thumb:{height:28,width:28,backgroundColor:"#fff",boxShadow:N,marginTop:-14,marginLeft:-14,"&:focus,&:hover,&$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:N}}},active:{},valueLabel:{left:"calc(-50% + 11px)",top:-22,"& *":{background:"transparent",color:"#000"}},track:{height:2},rail:{height:2,opacity:.5,backgroundColor:"#bfbfbf"},mark:{backgroundColor:"#bfbfbf",height:8,width:1,marginTop:-3},markActive:{opacity:1,backgroundColor:"currentColor"}})(w.a),Object(C.a)({root:{color:"#52af77",height:8},thumb:{height:24,width:24,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-12,"&:focus,&:hover,&$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}})(w.a),Object(C.a)({root:{color:"#3a8589",height:3,padding:"13px 0"},thumb:{height:27,width:27,backgroundColor:"#fff",border:"1px solid currentColor",marginTop:-12,marginLeft:-13,boxShadow:"#ebebeb 0px 2px 2px","&:focus,&:hover,&$active":{boxShadow:"#ccc 0px 2px 3px 1px"},"& .bar":{height:9,width:1,backgroundColor:"currentColor",marginLeft:1,marginRight:1}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:3},rail:{color:"#d8d8d8",opacity:1,height:3}})(w.a));function P(e){return r.a.createElement("span",e,r.a.createElement("span",{className:"bar"}),r.a.createElement("span",{className:"bar"}),r.a.createElement("span",{className:"bar"}))}function U(){var e=x();return r.a.createElement("div",{className:e.root},r.a.createElement(S,{ThumbComponent:P,getAriaLabel:function(e){return 0===e?"Minimum price":"Maximum price"},defaultValue:[20,40]}))}var D=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={loggedInUser:null,isSignup:!1,tags:[]},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"footer-style"},r.a.createElement("input",{className:"search-bar",type:"text",onKeyDown:function(t){return e.props.searchMongo(t)},placeholder:"search"}),r.a.createElement("select",{name:"filterlist",form:"filterform"},r.a.createElement("option",{value:"1"},"Filters")),r.a.createElement("input",{id:"slider1",type:"range",min:"0",max:"2000",step:"1"}),r.a.createElement(U,null))}}]),t}(a.Component);function I(e){var t={name:"search",value:"",children:[]};return["MET","MOMA","RMA"].forEach(function(n){var a=e.filter(function(e){return e.museum===n}),r=a[0]&&a[0].imageUrl,o=a.length?function(e){var t=function(e){var t=e.map(function(e){return e.year}),n=t.filter(function(e){return Number.isInteger(e)}).sort(function(e,t){return e-t}),a=t.filter(function(e){return!Number.isInteger(e)}),r=[];if(n.length>=4){for(var o=Math.floor(n.length/3),c=0;c<n.length;c+=o)n[c]&&r.push(n[c]);r.push(n[n.length-1])}a.length&&r.push("noDate");return console.log("years",r),r}(e),n=[];return t.forEach(function(a,r){var o=e.filter(function(e){return"noDate"===a?!Number.isInteger(e.year):e.year>=a&&(!t[r+1]||e.year<t[r+1])}),c=o[0]&&o[0].imageUrl,i=o.length?function(e){var t=["noOrigin"],n=[];return e.forEach(function(e){e.origin.length&&(e.origin.forEach(function(e){t.includes(e)||t.push(e)}),t.sort())}),console.log("nestByOrigin All",e.length),t.forEach(function(a,r){r>0&&t.slice(0,r);var o=e.filter(function(e){return e.origin.length<=0&&"noOrigin"===a||e.origin.includes(a)}),c=o[0]&&o[0].imageUrl,i=o.length?function(e){var t=[],n=[];return e.forEach(function(e){e.author&&!t.includes(e.author)&&t.push(e.author)}),t.forEach(function(t,a){var r=e.filter(function(e){return e.author}).map(function(e){return e.value=e.imageUrl,e.size=.1*e.rating,e}),o={name:t,value:r[0]&&r[0].imageUrl,children:r||[],size:r.length};r.length>0&&n.push(o)}),n}(o):[];console.log("nestByOrigin",i.length,a);var l={name:a,value:c,children:i||[],size:o.length};i.length>0&&n.push(l)}),n}(o):[],l={name:a,value:c,children:i||[],size:o.length};n.push(l)}),n}(a):[],c={name:n,value:r,children:o,size:a.length};t.children.push(c)}),console.log("tree",t),t}var F=n(184),M=(n(135),n(137),n(139),function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"deleteCollection",value:function(){var e=this;console.log("delete",this.props.collection._id),console.log(this.props),v.a.delete("".concat("https://mn3m0s1n3.herokuapp.com/api","/collection/").concat(this.props.collection._id)).then(function(){console.log("callingrefetchcollection",e.props.reFetch),e.props.reFetch&&e.props.reFetch()})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"collectionCard"},r.a.createElement("div",{className:"collectionButtons"},r.a.createElement("h1",null,this.props.collection.name),r.a.createElement("button",{className:"button-moved-right",onClick:function(){return e.deleteCollection()}},"delete")),r.a.createElement(f.a,{to:"/collection/".concat(this.props.collection._id)}," ",r.a.createElement("div",{className:"collectionImages"},this.props.collection.pieces.slice(0,4).map(function(e){return r.a.createElement("div",{className:"imageSquare",style:{backgroundImage:"url(".concat(e.imageUrl,")")}})}))))}}]),t}(a.Component)),A=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={newCollection:""},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"updateNewCollection",value:function(e){this.setState(Object(d.a)({},this.state,{newCollection:e.target.value}))}},{key:"checkEnter",value:function(e){13===e.keyCode&&this.sendName()}},{key:"sendName",value:function(){var e=this;v.a.post("".concat("https://mn3m0s1n3.herokuapp.com/api","/collection/").concat(this.props.user._id),{name:this.state.newCollection}).then(function(t){return e.props.reFetch(t.data)})}},{key:"render",value:function(){var e=this;return console.log("num collections",this.props.collections.length),r.a.createElement("div",{className:"collections-style"},r.a.createElement("div",{className:"add-field"},r.a.createElement("input",{autoComplete:"off",type:"text",placeholder:"create new collection",id:"create-collection",value:this.state.newCollection,onChange:function(t){return e.updateNewCollection(t)},onKeyDown:function(t){return e.checkEnter(t)}}),r.a.createElement("button",{onClick:function(){return e.sendName()}},"add")),this.props.collections.map(function(t){return r.a.createElement(M,{collection:t,reFetch:e.props.reFetch})}))}}]),t}(a.Component),L=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={profile:{}},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"getProfile",value:function(e){var t=this;console.log("callingrefetchprofile",e,this.props.user);var n=e||this.props.user;n&&v.a.get("".concat("https://mn3m0s1n3.herokuapp.com/api","/profile/").concat(n._id)).then(function(e){t.setUserProfile(e.data)})}},{key:"setUserProfile",value:function(e){this.setState(Object(d.a)({},this.state,{profile:e})),console.log("collections from back",e&&e.collections&&e.collections.length)}},{key:"componentWillReceiveProps",value:function(e){this.getProfile(e.user)}},{key:"componentDidMount",value:function(){this.getProfile(this.props.user)}},{key:"render",value:function(){var e=this,t=this.state.profile;return console.log("profile collections",t&&t.collections&&t.collections.length),this.props.user?r.a.createElement("div",{className:"Profile-style"},r.a.createElement("div",{className:"Profile-top"},r.a.createElement("div",{className:"Profile-name"}," ",r.a.createElement("h1",null,"Profile of ",this.props.user.username),r.a.createElement("button",{onClick:this.props.history.goBack},"Close")),r.a.createElement("div",null,t&&t.collections&&r.a.createElement(A,{user:this.props.user,collections:t.collections,reFetch:function(){return e.getProfile()}})))):r.a.createElement("div",{className:"Profile-style"},r.a.createElement("div",{className:"Profile-top"},r.a.createElement("h1",null,"Profile of "),r.a.createElement(f.a,{to:"/"},r.a.createElement("h1",null,"X"))),r.a.createElement("div",{className:"Profile-body"}))}}]),t}(a.Component),_=Object(F.a)(L),R=n(18),z=(n(142),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={piece:{},user:{},isSaved:!1,imageClass:""},n.addLike=n.addLike.bind(Object(R.a)(Object(R.a)(n))),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"getProfile",value:function(e){var t=this,n=e||this.props.user;n&&v.a.get("".concat("https://mn3m0s1n3.herokuapp.com/api","/profile/").concat(n._id)).then(function(e){t.setUserProfile(e.data)})}},{key:"setUserProfile",value:function(e){var t=this,n=e.collections&&e.collections.some(function(e){return e.pieces.find(function(e){return e._id===t.props.match.params.id})});this.setState(Object(d.a)({},this.state,{user:e,isSaved:n}))}},{key:"componentWillReceiveProps",value:function(e){this.getProfile(e.user)}},{key:"componentDidMount",value:function(){var e=this;this.getProfile(this.props.user),v.a.get("".concat("https://mn3m0s1n3.herokuapp.com/api","/piece/").concat(this.props.match.params.id)).then(function(t){var n="",a=new Image;a.src=t.data.imageUrl,a.onload=function(){var r=a.height/a.width;r>.9&&r<1.1?n="square-img":r>=1.1?n="vertical-img":r<=.9&&(n="horizontal-img"),e.setState(Object(d.a)({},e.state,{piece:t.data,imageClass:n}))},console.log("state",e.state)})}},{key:"addLike",value:function(){var e=this;v.a.put("".concat("https://mn3m0s1n3.herokuapp.com/api","/piece/like/").concat(this.state.piece._id)).then(function(t){e.setState({piece:t.data})})}},{key:"addCollection",value:function(e){var t=this;v.a.put("".concat("https://mn3m0s1n3.herokuapp.com/api","/collection/add/").concat(e,"&").concat(this.state.piece._id)).then(function(e){console.log("pieceAdded",e.data),t.getProfile(t.state.user)})}},{key:"deleteCollection",value:function(e){var t=this;v.a.put("".concat("https://mn3m0s1n3.herokuapp.com/api","/collection/del/").concat(e,"&").concat(this.state.piece._id)).then(function(e){console.log("pieceDeleted",e.data),t.getProfile(t.state.user)})}},{key:"render",value:function(){var e=this,t=this.state.piece,n=t.origin,a=t.technic,o=t.tags,c=t.museum,i=t.name,l=t.imageUrl,s=t.description,u=t.author,h=t.year,m=t.culture,p=t.classification,d=t.rating,f=t.department;return r.a.createElement("div",{className:"detailPiece"},r.a.createElement("div",{className:"detail-card"},r.a.createElement("div",{className:"detail-top"},r.a.createElement("h1",null,"Detail view"),r.a.createElement("button",{onClick:this.props.history.goBack},"Close")),r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{className:this.state.imageClass,src:l})),r.a.createElement("div",{className:"detail-buttons"},r.a.createElement("h1",null,"\u2665",d),r.a.createElement("button",{onClick:this.addLike},"like"),r.a.createElement("div",{class:"dropdown"},r.a.createElement("button",{class:"dropbtn"},"Add"),r.a.createElement("div",{class:"dropdown-content"},this.state&&this.state.user&&this.state.user.collections&&this.state.user.collections.filter(function(t){return t.pieces.every(function(t){return t._id!==e.props.match.params.id})}).map(function(t){return r.a.createElement("button",{onClick:function(){return e.addCollection(t._id)},class:"droppedbtn"},t.name)}))),this.state.isSaved&&r.a.createElement("div",{class:"dropdown"},r.a.createElement("button",{class:"dropbtn"},"Delete"),r.a.createElement("div",{class:"dropdown-content"},this.state&&this.state.user&&this.state.user.collections&&this.state.user.collections.filter(function(t){return t.pieces.some(function(t){return t._id===e.props.match.params.id})}).map(function(t){return r.a.createElement("button",{onClick:function(){return e.deleteCollection(t._id)},class:"droppedbtn"},t.name)})))),r.a.createElement("div",{className:"detail-text"}," ",r.a.createElement("h1",null,i),u&&r.a.createElement("p",null,"author ",u),h&&r.a.createElement("p",null,"year ",h),"RMA"===c?r.a.createElement("p",null,"Rijksmuseum of Amsterdam"):"MOMA"===c?r.a.createElement("p",null,"MoMA New York"):r.a.createElement("p",null,"Metropolitan Museum of Art"),a&&r.a.createElement("p",null,"technic ",a),n&&r.a.createElement("p",null,"origin",n&&r.a.createElement("p",null,n[0])),o&&r.a.createElement("p",null,"tags",o&&o.map(function(e){return r.a.createElement("p",null,e)})),s&&r.a.createElement("p",null,"description",s),m&&r.a.createElement("p",null,"culture",m),p&&r.a.createElement("p",null,"classification",p),f&&r.a.createElement("p",null,"department",f))))}}]),t}(a.Component)),B=Object(F.a)(z),W=n(9),T=(n(144),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).goDetail=n.goDetail.bind(Object(R.a)(Object(R.a)(n))),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){W.e("#chart").selectAll("*").remove()}},{key:"goDetail",value:function(e){var t="/detail/".concat(e.data._id);return this.props.history.push(t)}},{key:"render",value:function(){var e,t=this.props.data,n=W.d().domain([0,100]).range([0,100]),a=W.d().domain([0,100]).range([0,100]),o=W.c,c=W.g().size([100,100]).paddingInner(0).round(!1),i=W.b(t).sum(function(e){return e.value?1:0});c(i);var l=W.e("#chart").selectAll(".node").data(i.descendants()).enter().append("div").attr("class",function(e){return"node level-"+e.depth}).attr("title",function(e){return e.data.name?e.data.name:"null"});l.style("left",function(e){return n(e.x0)+"%"}).style("top",function(e){return a(e.y0)+"%"}).style("width",function(e){return n(e.x1)-n(e.x0)+"%"}).style("height",function(e){return a(e.y1)-a(e.y0)+"%"}).style("background-image",function(e){return e.value?"url(".concat(e.data.value,")"):"none"}).style("background-color",function(e){for(;e.depth>2;)e=e.parent;return o(e.data.name)}).on("click",u).append("p").attr("class","label").text(function(e){return e.data.name?e.data.name:"---"}),l.filter(function(e){return e.depth>=5}).append("button").text("detail").attr("class","button-detail").on("click",this.goDetail);var s=W.e(".up").datum(i).on("click",u);function u(t){e=t.depth,s.datum(t.parent||i),n.domain([t.x0,t.x1]),a.domain([t.y0,t.y1]);var r=W.f().duration(1200).ease(W.a);l.transition(r).style("left",function(e){return n(e.x0)+"%"}).style("top",function(e){return a(e.y0)+"%"}).style("width",function(e){return n(e.x1)-n(e.x0)+"%"}).style("height",function(e){return a(e.y1)-a(e.y0)+"%"}),l.filter(function(e){return e.ancestors()}).classed("hide",function(e){return!!e.children}),l.filter(function(t){return t.depth>e}).classed("hide",!1)}return r.a.createElement("div",{className:"father"},r.a.createElement("nav",{className:"nav-bar-d3"},r.a.createElement("div",{className:"up"},"mnemosine")),r.a.createElement("div",{className:"feature",id:"chart"}))}}]),t}(a.Component)),$=Object(F.a)(T),q=(n(146),n(148),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).goDetail=n.goDetail.bind(Object(R.a)(Object(R.a)(n))),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){W.e("#chart").selectAll("*").remove()}},{key:"goDetail",value:function(e){var t="/detail/".concat(e.data._id);return this.props.history.push(t)}},{key:"render",value:function(){var e,t=this.props.data,n=W.d().domain([0,80]).range([0,80]),a=W.d().domain([0,80]).range([0,80]),o=W.c,c=W.g().size([80,80]).paddingInner(0).round(!1),i=W.b(t).sum(function(e){return e.value?1:0});c(i);var l=W.e("#chart").selectAll(".node").data(i.descendants()).enter().append("div").attr("class",function(e){return"node-small level-small-"+e.depth}).attr("title",function(e){return e.data.name?e.data.name:"null"}).attr("transform","translate(90 90)");l.attr("transform","translate(90 90)").style("left",function(e){return n(e.x0)+"%"}).style("top",function(e){return a(e.y0)+"%"}).style("width",function(e){return n(e.x1)-n(e.x0)+"%"}).style("height",function(e){return a(e.y1)-a(e.y0)+"%"}).style("background-image",function(e){return e.value?"url(".concat(e.data.value,")"):"none"}).style("background-color",function(e){for(;e.depth>2;)e=e.parent;return o(e.data.name)}).on("click",u).append("p").attr("class","label").text(function(e){return e.data.name?e.data.name:"---"}),l.filter(function(e){return e.depth>=5}).append("button").attr("class","button-detail").on("click",this.goDetail).style("border","50px solid #FFFFFF");var s=W.e(".up").datum(i).on("click",u);function u(t){e=t.depth,s.datum(t.parent||i),n.domain([t.x0,t.x1]),a.domain([t.y0,t.y1]);var r=W.f().duration(1200).ease(W.a);l.transition(r).style("left",function(e){return n(e.x0)+"%"}).style("top",function(e){return a(e.y0)+"%"}).style("width",function(e){return n(e.x1)-n(e.x0)+"%"}).style("height",function(e){return a(e.y1)-a(e.y0)+"%"}),l.filter(function(e){return e.ancestors()}).classed("hide",function(e){return!!e.children}),l.filter(function(t){return t.depth>e}).classed("hide",!1)}return r.a.createElement("div",{className:"father-small"},r.a.createElement("nav",{className:"nav-bar-d3-small"},r.a.createElement("div",{className:"up-small"},"mnemosine")),r.a.createElement("div",{className:"feature-small",id:"chart-small"}))}}]),t}(a.Component)),J=Object(F.a)(q),K=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={collection:{},treeData:{},data:{children:[{name:"Photo 1",value:"cgi-1.jpg"},{name:"Photo 1",value:"cgi-1.jpg"},{name:"Photo 5",value:"cgi-1.jpg"},{name:"Photo 1",value:"cgi-1.jpg"},{name:"Photo 1",value:"cgi-1.jpg"},{name:"Photo 1",value:"cgi-1.jpg"},{name:"Photo 1",value:"cgi-1.jpg"},{name:"Photo 1",value:"cgi-1.jpg"},{name:"Photo 1",value:"cgi-1.jpg"},{name:"Photo 1",value:"cgi-1.jpg"},{name:"Photo 1",value:"cgi-1.jpg"},{name:"Photo 1",value:"cgi-1.jpg"},{name:"Photo 5",value:"cgi-2.jpg"}]}},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this;console.log(this.props.match.params.id),v.a.get("".concat("https://mn3m0s1n3.herokuapp.com/api","/collection/").concat(this.props.match.params.id)).then(function(t){console.log(t.data);var n=I(t.data.pieces);console.log(n),e.setState(Object(d.a)({},e.state,{collection:t.data,treeData:n})),console.log("state",e.state)})}},{key:"render",value:function(){return console.log(this.props),r.a.createElement("div",{className:"CollectionDetail-style"}," ",r.a.createElement("div",{className:"CollectionDetail-top"}," ",r.a.createElement("div",{className:"CollectionDetail-buttons"},r.a.createElement("h1",null,this.state.collection.name),r.a.createElement("button",{onClick:this.props.history.goBack},"Close")),r.a.createElement("div",null,r.a.createElement(J,{data:this.state.treeData}))))}}]),t}(a.Component),V=Object(F.a)(K),X=(n(150),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).getUser=function(e){n.setState({loggedInUser:e})},n.logout=function(){n.service.logout().then(function(){n.setState({loggedInUser:null})})},n.state={loggedInUser:null,search:"",resultsId:[],resultsDetail:[],tree:{},loaded:!1},n.service=new b,n.fetchUser(),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"fetchUser",value:function(){var e=this;return this.service.loggedin().then(function(t){e.setState({loggedInUser:t})}).catch(function(t){e.setState({loggedInUser:!1})})}},{key:"searchMongo",value:function(e){var t=this;"Enter"===e.key&&v.a.get("".concat("https://mn3m0s1n3.herokuapp.com/api","/pieces/").concat(e.target.value)).then(function(e){if(e=e.data){var n=e;console.log("results filteredResults",e,n);var a=I(n);t.setState({resultsDetail:n,tree:a,loaded:!0})}})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"App"},r.a.createElement($,{data:this.state.tree}),r.a.createElement(j,{userInSession:this.state.loggedInUser,logout:this.logout,getUser:this.getUser}),r.a.createElement(m.a,null,r.a.createElement(p.a,{path:"/detail/:id",render:function(t){var n=t.match;return r.a.createElement(B,{user:e.state.loggedInUser,match:n})}}),r.a.createElement(p.a,{path:"/collection/:id",render:function(t){var n=t.match;return r.a.createElement(V,{user:e.state.loggedInUser,match:n})}}),r.a.createElement(p.a,{path:"/profile",render:function(t){return r.a.createElement(_,Object.assign({user:e.state.loggedInUser},t))}})),r.a.createElement(D,{searchMongo:function(t){return e.searchMongo(t)},tags:this.state.resultsDetail?this.state.resultsDetail:[]})))}}]),t}(a.Component)),Y=n(181);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Y.a,null,r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},92:function(e,t,n){e.exports=n(156)},97:function(e,t,n){},99:function(e,t,n){}},[[92,2,1]]]);
//# sourceMappingURL=main.b99ae891.chunk.js.map