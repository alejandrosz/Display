{"version":3,"sources":["components/auth/AuthService.js","components/auth/Login.js","components/auth/Signup.js","components/navbar/Navbar.js","components/slider/Slider.js","components/footer/Footer.js","components/collection/Collection.js","components/collection/Collections.js","components/profile/Profile.js","components/detailPiece/DetailPiece.js","components/D3Test/D3Test2.js","components/CollectionDetail/CollectionDetail.js","App.js","serviceWorker.js","index.js"],"names":["AuthService","_this","this","Object","classCallCheck","signup","username","password","service","post","then","response","data","login","loggedin","get","logout","axios","create","baseURL","concat","process","withCredentials","Login","props","possibleConstructorReturn","getPrototypeOf","call","handleFormSubmit","event","preventDefault","state","setState","error","getUser","catch","handleChange","_event$target","target","name","value","defineProperty","_this2","react_default","a","createElement","className","onSubmit","type","onChange","e","placeholder","Component","Signup","user","Navbar","handleLogout","loggedInUser","isSignup","nextProps","objectSpread","Fragment","Link","to","onClick","components_auth_Login","changeState","components_auth_Signup","useStyles","makeStyles","theme","root","width","spacing","margin","height","iOSBoxShadow","AirbnbSlider","withStyles","color","padding","thumb","backgroundColor","boxShadow","marginTop","marginLeft","&:focus,&:hover,&$active","@media (hover: none)","active","valueLabel","left","top","& *","background","track","rail","opacity","mark","markActive","Slider","border","borderRadius","& .bar","marginRight","AirbnbThumbComponent","CustomizedSlider","classes","ThumbComponent","getAriaLabel","index","defaultValue","Footer","tags","onKeyDown","searchMongo","form","id","min","max","step","Collection","console","log","collection","_id","Axios","delete","reFetch","deleteCollection","pieces","slice","map","piece","style","backgroundImage","imageUrl","Collections","newCollection","keyCode","sendName","updatedUser","_this3","collections","length","updateNewCollection","checkEnter","components_collection_Collection","Profile","profile","useUser","gotUser","setUserProfile","userData","next","getProfile","components_collection_Collections","DetailPiece","isSaved","addLike","bind","assertThisInitialized","match","params","pieceFound","_this4","put","pieceLiked","collectionId","_this5","pieceAdded","_this6","pieceDeleted","_this7","src","alt","rating","author","year","museum","class","addCollection","D3Test2","goDetail","d3","selectAll","remove","d","url","history","push","currentDepth","x","domain","range","y","c","treemap","size","paddingInner","round","nodes","sum","cells","descendants","enter","append","attr","depth","x0","y0","x1","y1","parent","on","zoom","text","filter","datum","t","duration","ease","transition","ancestors","classed","children","withRouter","CollectionDetail","components_D3Test_D3Test2","App","userObj","search","resultsId","resultsDetail","tree","fetchUser","err","key","results","filteredResults","nestByMuseum","filterResults","sortByRating","p","limit","sort","b","forEach","m","museumPieces","bestImg","nestedMuseum","nestByDate","childMuseum","mainDates","getDatesFromPieces","i","datePieces","Number","isInteger","nestedDates","nestByOrigin","childDate","allYears","piecesWithDate","piecesWithNoDate","years","Math","floor","origins","origin","newOrigin","includes","o","originPieces","nestedOrigins","nestByAuthor","authors","authorPieces","components_navbar_Navbar","userInSession","Switch","Route","path","render","_ref","components_detailPiece_DetailPiece","_ref2","components_CollectionDetail_CollectionDetail","components_profile_Profile","assign","components_footer_Footer","Boolean","window","location","hostname","ReactDOM","BrowserRouter","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.bf7025e2.chunk.js","sourcesContent":["// auth/auth-service.js\nimport axios from 'axios';\n// require('dotenv').config();\n\nclass AuthService {\n  constructor() {\n    this.service = axios.create({\n      baseURL: `${process.env.REACT_APP_API_URL}/auth`,\n      // baseURL: `http://localhost:3010/api/auth`,\n      withCredentials: true\n    });\n  }\n\n  signup = (username, password) => {\n    return this.service.post('/signup', {username, password})\n    .then(response => response.data)\n  }\n\n  login = (username, password) => {\n    return this.service.post('/login', {username, password})\n    .then(response => response.data)\n  }\n\n  loggedin = () => {\n    return this.service.get('/currentUser',)\n    .then(response => response.data)\n  }\n\n  logout = () => {\n    return this.service.get('/logout',)\n    .then(response => response.data)\n  }\n}\n\nexport default AuthService;","// auth/Signup.js\nimport React, { Component } from \"react\";\n// import { Link } from \"react-router-dom\";\nimport AuthService from \"./AuthService\";\nimport \"./Login.scss\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { username: \"\", password: \"\" };\n    this.service = new AuthService();\n  }\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    const username = this.state.username;\n    const password = this.state.password;\n\n    this.service\n      .login(username, password)\n      .then(response => {\n        this.setState({\n          username: username,\n          password: password,\n          error: false\n        });\n\n        this.props.getUser(response);\n      })\n      .catch(error => {\n        this.setState({\n          username: username,\n          password: password,\n          error: true\n        });\n      });\n  };\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  render() {\n    return (\n      <div className=\"login-form\">\n        <p>{this.state.error ? \"error \" : \"\"}</p>\n        <form className=\"loginForm\" onSubmit={this.handleFormSubmit}>\n          {/* <label>name</label> */}\n          <input\n            type=\"text\"\n            name=\"username\"\n            value={this.state.username}\n            onChange={e => this.handleChange(e)}\n            placeholder=\"name:\"\n          />\n\n          {/* <label>pass</label> */}\n          <input\n            type=\"password\"\n            name=\"password\"\n            value={this.state.password}\n            onChange={e => this.handleChange(e)}\n            placeholder=\"| password:\"\n          />\n\n          <input type=\"submit\" value=\"Login\" />\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","// auth/Signup.js\nimport React, { Component } from \"react\";\nimport AuthService from \"./AuthService\";\nimport \"./Signup.scss\";\n\n//signup y login son iguales a excepción de el html renderizado y el endpoint de nuestra API rest a la que llamamos\n//uno llama a /signup y el otro a /login usando nuestro AuthService\nclass Signup extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { username: \"\", password: \"\" };\n    this.service = new AuthService();\n  }\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    const username = this.state.username;\n    const password = this.state.password;\n\n    //aquí llamamos al endpoint /signup de nuestra API Rest usando nuestro AuthService\n    this.service\n      .signup(username, password)\n      .then(response => {\n        this.setState({\n          username: \"\",\n          password: \"\"\n        });\n        //aquí elevamos el nuevo usuario una vez creado a App usando getUser via props\n        //por tanto, informamos a App de que el nuevo usuario ha sido creado, provocando un re-render\n        //y mostrando la parte de contenidos. Mira la función getUser de App para más info (date cuenta de que establece el state de App)\n        this.props.getUser(response.user);\n      })\n      .catch(error => {\n        this.setState({\n          username: username,\n          password: password,\n          error: true\n        });\n      });\n  };\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  render() {\n    return (\n      <div className=\"signup-form\">\n        <p>{this.state.error ? \"error \" : \"\"}</p>\n        <form className=\"signupForm\" onSubmit={this.handleFormSubmit}>\n          {/* <label>name</label> */}\n          <input\n            type=\"text\"\n            name=\"username\"\n            value={this.state.username}\n            onChange={e => this.handleChange(e)}\n            placeholder=\"name:\"\n          />\n\n          {/* <label>pass</label> */}\n          <input\n            type=\"password\"\n            name=\"password\"\n            value={this.state.password}\n            onChange={e => this.handleChange(e)}\n            placeholder=\"| password:\"\n          />\n\n          <input type=\"submit\" value=\"Sign up\" />\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Signup;\n","// navbar/Navbar.js\n\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport AuthService from \"../auth/AuthService\";\nimport \"./Navbar.scss\";\nimport Login from \"../auth/Login\";\nimport Signup from \"../auth/Signup\";\n\nclass Navbar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loggedInUser: null, isSignup: false };\n    this.service = new AuthService();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ ...this.state, loggedInUser: nextProps[\"userInSession\"] });\n  }\n\n  handleLogout = e => {\n    this.props.logout();\n  };\n\n  changeState() {\n    this.setState({\n      isSignup: !this.state.isSignup\n    });\n  }\n\n  render() {\n    // this.state.loggedInUser &&\n    //   console.log(\"navbar\", this.state.loggedInUser._id);\n    return (\n      <nav className=\"nav-style\">\n        {/* <input\n          type=\"text\"\n          onKeyDown={e => this.props.searchBar(e)}\n          placeholder=\"searchapi\"\n        ></input> */}\n\n        {this.state.loggedInUser ? (\n          <React.Fragment>\n            <div className=\"profile-navbar\">\n              {\" \"}\n              {/* <Link to={`/profile/${this.state.loogedInUser._id}`}> */}\n              <Link to=\"/profile\">\n                {\" \"}\n                <h1>{this.state.loggedInUser.username}</h1>\n              </Link>\n              <a onClick={this.handleLogout}>logout</a>\n            </div>\n          </React.Fragment>\n        ) : (\n          <ul>\n            {this.state.isSignup ? (\n              <div className=\"user-buttons\">\n                <Login getUser={this.props.getUser} />\n                <button\n                  className=\"change-style\"\n                  onClick={() => this.changeState()}\n                >\n                  or signup\n                </button>\n              </div>\n            ) : (\n              <div className=\"user-buttons\">\n                <Signup getUser={this.props.getUser} />\n                <button\n                  className=\"change-style\"\n                  onClick={() => this.changeState()}\n                >\n                  or login\n                </button>\n              </div>\n            )}\n          </ul>\n        )}\n      </nav>\n    );\n  }\n}\n\nexport default Navbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\nimport Slider from '@material-ui/core/Slider';\nimport Typography from '@material-ui/core/Typography';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: 300 + theme.spacing(3) * 2,\n  },\n  margin: {\n    height: theme.spacing(3),\n  },\n}));\n\nfunction ValueLabelComponent(props) {\n  const { children, open, value } = props;\n\n  return (\n    <Tooltip open={open} enterTouchDelay={0} placement=\"top\" title={value}>\n      {children}\n    </Tooltip>\n  );\n}\n\nValueLabelComponent.propTypes = {\n  children: PropTypes.element.isRequired,\n  open: PropTypes.bool.isRequired,\n  value: PropTypes.number.isRequired,\n};\n\nconst iOSBoxShadow =\n  '0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)';\n\nconst marks = [\n  {\n    value: 0,\n  },\n  {\n    value: 20,\n  },\n  {\n    value: 37,\n  },\n  {\n    value: 100,\n  },\n];\n\nconst IOSSlider = withStyles({\n  root: {\n    color: '#3880ff',\n    height: 2,\n    padding: '15px 0',\n  },\n  thumb: {\n    height: 28,\n    width: 28,\n    backgroundColor: '#fff',\n    boxShadow: iOSBoxShadow,\n    marginTop: -14,\n    marginLeft: -14,\n    '&:focus,&:hover,&$active': {\n      boxShadow: '0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)',\n      // Reset on touch devices, it doesn't add specificity\n      '@media (hover: none)': {\n        boxShadow: iOSBoxShadow,\n      },\n    },\n  },\n  active: {},\n  valueLabel: {\n    left: 'calc(-50% + 11px)',\n    top: -22,\n    '& *': {\n      background: 'transparent',\n      color: '#000',\n    },\n  },\n  track: {\n    height: 2,\n  },\n  rail: {\n    height: 2,\n    opacity: 0.5,\n    backgroundColor: '#bfbfbf',\n  },\n  mark: {\n    backgroundColor: '#bfbfbf',\n    height: 8,\n    width: 1,\n    marginTop: -3,\n  },\n  markActive: {\n    opacity: 1,\n    backgroundColor: 'currentColor',\n  },\n})(Slider);\n\nconst PrettoSlider = withStyles({\n  root: {\n    color: '#52af77',\n    height: 8,\n  },\n  thumb: {\n    height: 24,\n    width: 24,\n    backgroundColor: '#fff',\n    border: '2px solid currentColor',\n    marginTop: -8,\n    marginLeft: -12,\n    '&:focus,&:hover,&$active': {\n      boxShadow: 'inherit',\n    },\n  },\n  active: {},\n  valueLabel: {\n    left: 'calc(-50% + 4px)',\n  },\n  track: {\n    height: 8,\n    borderRadius: 4,\n  },\n  rail: {\n    height: 8,\n    borderRadius: 4,\n  },\n})(Slider);\n\nconst AirbnbSlider = withStyles({\n  root: {\n    color: '#3a8589',\n    height: 3,\n    padding: '13px 0',\n  },\n  thumb: {\n    height: 27,\n    width: 27,\n    backgroundColor: '#fff',\n    border: '1px solid currentColor',\n    marginTop: -12,\n    marginLeft: -13,\n    boxShadow: '#ebebeb 0px 2px 2px',\n    '&:focus,&:hover,&$active': {\n      boxShadow: '#ccc 0px 2px 3px 1px',\n    },\n    '& .bar': {\n      // display: inline-block !important;\n      height: 9,\n      width: 1,\n      backgroundColor: 'currentColor',\n      marginLeft: 1,\n      marginRight: 1,\n    },\n  },\n  active: {},\n  valueLabel: {\n    left: 'calc(-50% + 4px)',\n  },\n  track: {\n    height: 3,\n  },\n  rail: {\n    color: '#d8d8d8',\n    opacity: 1,\n    height: 3,\n  },\n})(Slider);\n\nfunction AirbnbThumbComponent(props) {\n  return (\n    <span {...props}>\n      <span className=\"bar\" />\n      <span className=\"bar\" />\n      <span className=\"bar\" />\n    </span>\n  );\n}\n\nexport default function CustomizedSlider() {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <AirbnbSlider\n        ThumbComponent={AirbnbThumbComponent}\n        getAriaLabel={index => (index === 0 ? 'Minimum price' : 'Maximum price')}\n        defaultValue={[20, 40]}\n      />\n    </div>\n  );\n}","import React, { Component } from \"react\";\n// import { Link } from \"react-router-dom\";\nimport \"./Footer.scss\";\n// import { Slider } from \"@material-ui/core\";\n// import noUiSlider from \"noUiSlider\"\n// import Nouislider from \"nouislider-react\";\n// import \"nouislider/distribute/nouislider.css\";\nimport Slider from \"../slider/Slider\";\n\nclass Footer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loggedInUser: null, isSignup: false, tags: [] };\n  }\n\n  // componentWillReceiveProps() {\n  //   this.getTags();\n  // }\n\n  // getTags() {\n  //   console.log(\"tags\", this.props.tags)\n  //   const tags = [];\n  //   this.props.tags.forEach(function(item) {\n  //     item.tags.forEach(function(tag) {\n  //       tags.push(tag.term);\n  //     });\n  //   });\n  //   const uniqueTags = [...new Set(tags)];\n  //   this.setState({ ...this.state, tags: uniqueTags });\n  // }\n\n  render() {\n    return (\n      <div className=\"footer-style\">\n        <input className=\"search-bar\"\n          type=\"text\"\n          onKeyDown={e => this.props.searchMongo(e)}\n          placeholder=\"search\"\n        ></input>\n        <select name=\"filterlist\" form=\"filterform\">\n          <option value=\"1\">Filters</option>\n          {/* {this.state.tags.map(tag => (\n            <option value={tag}>{tag}</option>\n          ))} */}\n        </select>\n        {/* const Slider = () => (\n        <Nouislider range={{ min: 0, max: 100 }} start={[20, 80]} connect />\n        ); */}\n        <input id=\"slider1\" type=\"range\" min=\"0\" max=\"2000\" step=\"1\"></input>\n        <Slider></Slider>\n      </div>\n    );\n\n    // let slider = document.getElementById(\"slider1\");\n\n    // noUiSlider.create(slider, {\n    //   start: [20, 80],\n    //   connect: true,\n    //   range: {\n    //     min: 0,\n    //     max: 100\n    //   }\n    // });\n  }\n}\n\nexport default Footer;\n","import React, { Component } from \"react\";\nimport \"./Collection.scss\";\nimport Axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n\nclass Collection extends Component {\n  // constructor(props) {}\n  deleteCollection() {\n    console.log(\"delete\", this.props.collection._id);\n    console.log(this.props);\n    Axios.delete(\n      `${process.env.REACT_APP_API_URL}/collection/${this.props.collection._id}`\n    ).then(() => {\n      console.log(\"callingrefetchcollection\", this.props.reFetch);\n      if (this.props.reFetch) {\n        this.props.reFetch();\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"collectionCard\">\n        <div className=\"collectionButtons\">\n          <h1>{this.props.collection.name}</h1>\n          <button onClick={() => this.deleteCollection()}>delete</button>\n        </div>\n        <Link to={`/collection/${this.props.collection._id}`}>\n          {\" \"}\n          <div className=\"collectionImages\">\n            {this.props.collection.pieces.slice(0, 4).map(piece => (\n              <div\n                className=\"imageSquare\"\n                style={{ backgroundImage: `url(${piece.imageUrl})` }}\n              ></div>\n            ))}\n          </div>\n        </Link>\n      </div>\n    );\n  }\n}\n\nexport default Collection;\n","import React, { Component } from \"react\";\nimport \"./Collections.scss\";\nimport Collection from \"./Collection\";\nimport Axios from \"axios\";\n\n\nclass Collections extends Component {\n  // constructor(props) {}\n  state = { newCollection: \"\" };\n\n  updateNewCollection(e) {\n    this.setState({\n      ...this.state,\n      newCollection: e.target.value\n    });\n  }\n\n  checkEnter(e) {\n    if (e.keyCode === 13) {\n      this.sendName();\n    }\n  }\n\n  sendName() {\n    Axios.post(\n      `${process.env.REACT_APP_API_URL}/collection/${this.props.user._id}`,\n      {\n        name: this.state.newCollection\n      }\n    ).then((updatedUser) => this.props.reFetch(updatedUser.data));\n  }\n\n  render() {\n    console.log(\"num collections\", this.props.collections.length);\n    return (\n      <div className=\"collections-style\">\n        <div className=\"add-field\">\n          <input\n            type=\"text\"\n            placeholder=\"create new collection\"\n            id=\"create-collection\"\n            value={this.state.newCollection}\n            onChange={e => this.updateNewCollection(e)}\n            onKeyDown={e => this.checkEnter(e)}\n          />\n          <button onClick={() => this.sendName()}>add</button>\n        </div>\n        {this.props.collections.map(collection => (\n          <Collection\n            collection={collection}\n            reFetch={this.props.reFetch}\n          ></Collection>\n        ))}\n      </div>\n    );\n  }\n}\n\nexport default Collections;\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./Profile.scss\";\nimport Axios from \"axios\";\nimport Collections from \"../collection/Collections\";\n// import * as IndexService from \"../../services/service\";\n\nclass Profile extends Component {\n  // constructor(props) {\n  //   super(props);\n  //   this.state = { profile: {} };\n  // }\n  state = { profile: {} };\n\n  getProfile(user) {\n    console.log(\"callingrefetchprofile\", user, this.props.user);\n    let useUser = user || this.props.user;\n    if (useUser) {\n      Axios.get(`${process.env.REACT_APP_API_URL}/profile/${useUser._id}`).then(\n        gotUser => {\n          this.setUserProfile(gotUser.data);\n        }\n      );\n    }\n  }\n\n  setUserProfile(userData) {\n    this.setState({ ...this.state, profile: userData });\n    console.log(\n      \"collections from back\",\n      userData && userData.collections && userData.collections.length\n    );\n  }\n\n  componentWillReceiveProps(next) {\n    this.getProfile(next.user);\n  }\n\n  componentDidMount() {\n    this.getProfile(this.props.user);\n  }\n\n  render() {\n    const { profile } = this.state;\n    // console.log(\"user\", this.props.user);\n    console.log(\n      \"profile collections\",\n      profile && profile.collections && profile.collections.length\n    );\n\n    if (this.props.user) {\n      return (\n        <div className=\"Profile-style\">\n          <div className=\"Profile-top\">\n            <div className=\"Profile-name\">\n              {\" \"}\n              <h1>perfil de {this.props.user.username}</h1>\n              <Link to=\"/\">\n                <h1>X</h1>\n              </Link>\n            </div>\n            <div>\n              {profile && profile.collections && (\n                <Collections\n                  user={this.props.user}\n                  collections={profile.collections}\n                  reFetch={() => this.getProfile()}\n                ></Collections>\n              )}\n            </div>\n          </div>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"Profile-style\">\n          <div className=\"Profile-top\">\n            <h1>perfil de </h1>\n            <Link to=\"/\">\n              <h1>X</h1>\n            </Link>\n          </div>\n          \n          <div className=\"Profile-body\"></div>\n        </div>\n      );\n    }\n  }\n}\n\nexport default Profile;\n","import React, { Component } from \"react\";\nimport \"./DetailPiece.scss\";\nimport { Link, useRouteMatch } from \"react-router-dom\";\n\nimport Axios from \"axios\";\n\n// import { useRouteMatch } from \"react-router-dom\";\n\n// function BlogPost() {\n\n//   // Do whatever you want with the match...\n//   return <div />;\n// }\n\nclass DetailPiece extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { piece: {}, user: {}, isSaved: false };\n    this.addLike = this.addLike.bind(this);\n  }\n\n  getProfile(user) {\n    console.log(\"callingrefetchprofile\", user, this.props.user);\n    let useUser = user || this.props.user;\n    if (useUser) {\n      Axios.get(`${process.env.REACT_APP_API_URL}/profile/${useUser._id}`).then(\n        gotUser => {\n          this.setUserProfile(gotUser.data);\n        }\n      );\n    }\n  }\n\n  setUserProfile(userData) {\n    this.setState({ ...this.state, user: userData });\n    console.log(\n      \"collections from back\",\n      userData && userData.collections && userData.collections.length\n    );\n  }\n\n  componentWillReceiveProps(next) {\n    this.getProfile(next.user);\n  }\n\n  componentDidMount() {\n    this.getProfile(this.props.user);\n    Axios.get(\n      `${process.env.REACT_APP_API_URL}/piece/${this.props.match.params.id}`\n    ).then(pieceFound => {\n      this.setState({ ...this.state, piece: pieceFound.data });\n      console.log(\"state\", this.state);\n    });\n  }\n\n  // componentDidMount() {\n  //   console.log(\"props\", this.props.match.params.id);\n  //   Axios.get(\n  //     `${process.env.REACT_APP_API_URL}/piece/${this.props.match.params.id}`\n  //   ).then(pieceFound => {\n  //     this.setState({ ...this.state, piece: pieceFound.data });\n  //     console.log(\"state\", this.state);\n  //   });\n  // }\n\n  // componentWillReceiveProps(nextProps) {\n  //   console.log(\"nextprops\", nextProps);\n  //   Axios.get(\n  //     `${process.env.REACT_APP_API_URL}/profile/${nextProps.user._id}`\n  //   ).then(userFound => {\n  //     this.setState({ ...this.state, user: userFound.data });\n  //     console.log(\"state\", this.state);\n  //   });\n  // }\n\n  addLike() {\n    console.log(\"like\", this.state);\n    Axios.put(\n      `${process.env.REACT_APP_API_URL}/piece/like/${this.state.piece._id}`\n    ).then(pieceLiked => {\n      console.log(\"pieceLiked\", pieceLiked.data);\n      this.setState({ piece: pieceLiked.data });\n    });\n  }\n  // /collection/add/:collectionId&:pieceId\n  addCollection(collectionId) {\n    console.log(\"collectionId\", collectionId, \"pieceid\", this.state.piece._id);\n    Axios.put(\n      `${process.env.REACT_APP_API_URL}/collection/add/${collectionId}&${this.state.piece._id}`\n    ).then(pieceAdded => {\n      console.log(\"pieceAdded\", pieceAdded.data);\n      this.setState({ isSaved: !this.state.isSaved });\n    });\n  }\n\n  deleteCollection(collectionId) {\n    console.log(\"collectionId\", collectionId, \"pieceid\", this.state.piece._id);\n    Axios.put(\n      `${process.env.REACT_APP_API_URL}/collection/del/${collectionId}&${this.state.piece._id}`\n    ).then(pieceDeleted => {\n      console.log(\"pieceDeleted\", pieceDeleted.data);\n      this.setState({ isSaved: !this.state.isSaved });\n    });\n  }\n\n  render() {\n    console.log(\"props user\", this.props.user);\n    console.log(\"image\", this.state.piece.imageUrl);\n\n    return (\n      <div className=\"detailPiece\">\n        <div className=\"detail-card\">\n          {\" \"}\n          <div className=\"detail-top\">\n            {\" \"}\n            <h1>Detail view</h1>\n            <Link to=\"/\">\n              <h1>X</h1>\n            </Link>\n          </div>\n          <img src={this.state.piece.imageUrl} alt=\"image\" />\n          <h1>&hearts;{this.state.piece.rating}</h1>\n          <p>{this.state.piece.name}</p>\n          <p>\n            {this.state.piece.author} {this.state.piece.year}\n          </p>\n          <p>{this.state.piece.museum}</p>\n          <button onClick={this.addLike}>like</button>\n          {this.state.isSaved ? <h1> saved</h1> : <h1>not saved</h1>}\n          {/* {this.state &&\n          this.state.user &&\n          this.state.user.collections &&\n          this.state.user.collections.some(collection =>\n            collection.pieces.find(this.state.piece._id)\n          ) ? ( */}\n          <div class=\"dropdown\">\n            <button class=\"dropbtn\">Delete</button>\n            <div class=\"dropdown-content\">\n              {this.state &&\n                this.state.user &&\n                this.state.user.collections &&\n                this.state.user.collections.map(collection => (\n                  <button\n                    onClick={() => this.deleteCollection(collection._id)}\n                    class=\"droppedbtn\"\n                  >\n                    {collection.name}\n                  </button>\n                ))}\n            </div>\n          </div>\n          {/* ) : ( */}\n          <div class=\"dropdown\">\n            <button class=\"dropbtn\">Add</button>\n            <div class=\"dropdown-content\">\n              {this.state &&\n                this.state.user &&\n                this.state.user.collections &&\n                this.state.user.collections.map(collection => (\n                  <button\n                    onClick={() => this.addCollection(collection._id)}\n                    class=\"droppedbtn\"\n                  >\n                    {collection.name}\n                  </button>\n                ))}\n            </div>\n          </div>\n          {/* )} */}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default DetailPiece;\n\n// Axios.get(`${process.env.REACT_APP_API_URL}/profile/${useUser._id}`).then(\n//   gotUser => {\n//     this.setUserProfile(gotUser.data);\n//   }\n// );\n","import React, { Component } from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport * as d3 from \"d3\";\nimport \"./D3Test2.scss\";\nimport { withRouter } from \"react-router-dom\";\n\n// import data from \"./Dataset1\";\n// import data2 from \"./Dataset2\";\n// import data from \"./Dataset3\";\n// import data from \"./Dataset4\";\n\n// import * as data2 from './Dataset2'\n\nclass D3Test2 extends Component {\n  constructor(props) {\n    super(props);\n    this.goDetail = this.goDetail.bind(this);\n  }\n  componentWillReceiveProps(nextProps) {\n    var chart = d3.select(\"#chart\");\n    chart.selectAll(\"*\").remove();\n  }\n\n  goDetail(d) {\n    let url = `/detail/${d.data._id}`;\n    return this.props.history.push(url);\n    // return <Route render={() => <Redirect to={url} />} />;\n  }\n\n  render() {\n    let data = this.props.data;\n    var width = 100, // % of the parent element\n      height = 100,\n      x = d3\n        .scaleLinear()\n        .domain([0, width])\n        .range([0, width]),\n      y = d3\n        .scaleLinear()\n        .domain([0, height])\n        .range([0, height]),\n      color = d3.scaleOrdinal().range(\n        d3.schemeDark2.map(function(c) {\n          // d3.schemeBlues.map(function(c) {\n          c = d3.rgb(c);\n          //c.opacity = 0.5;\n          return c;\n        })\n      ),\n      treemap = d3\n        .treemap()\n        .size([width, height])\n        //.tile(d3.treemapResquarify) // doesn't work - height & width is 100%\n        .paddingInner(0)\n        .round(false), //true\n      nodes = d3.hierarchy(data).sum(function(d) {\n        return d.value ? 1 : 0;\n      }),\n      //.sort(function(a, b) { return b.height - a.height || b.value - a.value });\n\n      currentDepth;\n\n    treemap(nodes);\n\n    var chart = d3.select(\"#chart\");\n    var cells = chart\n      .selectAll(\".node\")\n      .data(nodes.descendants())\n      .enter()\n      .append(\"div\")\n      .attr(\"class\", function(d) {\n        return \"node level-\" + d.depth;\n      })\n      .attr(\"title\", function(d) {\n        return d.data.name ? d.data.name : \"null\";\n      });\n\n    cells\n      .style(\"left\", function(d) {\n        return x(d.x0) + \"%\";\n      })\n      .style(\"top\", function(d) {\n        return y(d.y0) + \"%\";\n      })\n      .style(\"width\", function(d) {\n        return x(d.x1) - x(d.x0) + \"%\";\n      })\n      .style(\"height\", function(d) {\n        return y(d.y1) - y(d.y0) + \"%\";\n      })\n      //.style(\"background-image\", function(d) { return d.value ? imgUrl + d.value : \"\"; })\n      .style(\"background-image\", function(d) {\n        return d.value ? `url(${d.data.value})` : \"none\";\n      })\n\n      // .style(\"background-image\", function(d) { return d.value ? \"url(http://placekitten.com/g/300/300)\" : \"none\"; })\n      .style(\"background-color\", function(d) {\n        while (d.depth > 2) d = d.parent;\n        return color(d.data.name);\n      })\n      .on(\"click\", zoom)\n      .append(\"p\")\n      .attr(\"class\", \"label\")\n      .text(function(d) {\n        return d.data.name ? d.data.name : \"---\";\n      });\n    //.style(\"font-size\", \"\")\n    //.style(\"opacity\", function(d) { return isOverflowed( d.parent ) ? 1 : 0; });\n\n    // function goDetail(d) {\n    //   console.log(\"detail\", `${process.env.REACT_APP_URL}/detail/${d.data._id}`);\n    //   let url = `${process.env.REACT_APP_URL}/detail/${d.data._id}`;\n    //   return <Redirect to={url} />;\n    // }\n\n    cells // show this depth + 1 and below\n      .filter(function(d) {\n        return d.depth >= 5;\n      })\n      .append(\"button\")\n      .attr(\"class\", \"button-detail\")\n      .on(\"click\", this.goDetail)\n      .style(\"border\", \"50px solid #FFFFFF\");\n\n    // .append(\"a\")\n\n    // .append(\"rect\")\n    // .attr(\"x\", 50)\n    // .attr(\"y\", 50)\n    // .attr(\"height\", 50)\n    // .attr(\"width\", 50)\n    // .style(\"fill\", \"lightgreen\")\n    // .style(\"border\", \"50px solid #0000FF\");\n\n    // <Link to=`/detail/${d.data._id}`>\n    //   {\" \"}\n    // </Link>;\n\n    var parent = d3\n      .select(\".up\")\n      .datum(nodes)\n      .on(\"click\", zoom);\n    function zoom(d) {\n      // http://jsfiddle.net/ramnathv/amszcymq/\n\n      // console.log(\"clicked: \" + d.data.name + \", depth: \" + d.depth);\n\n      currentDepth = d.depth;\n\n      parent.datum(d.parent || nodes);\n\n      x.domain([d.x0, d.x1]);\n      y.domain([d.y0, d.y1]);\n\n      var t = d3\n        .transition()\n        // .duration(Math.floor(Math.random() * 2200) + 1200)\n        .duration(1200)\n\n        .ease(d3.easeCubicOut);\n\n      cells\n        .transition(t)\n        .style(\"left\", function(d) {\n          return x(d.x0) + \"%\";\n        })\n        .style(\"top\", function(d) {\n          return y(d.y0) + \"%\";\n        })\n        .style(\"width\", function(d) {\n          return x(d.x1) - x(d.x0) + \"%\";\n        })\n        .style(\"height\", function(d) {\n          return y(d.y1) - y(d.y0) + \"%\";\n        });\n\n      cells // hide this depth and above\n        .filter(function(d) {\n          return d.ancestors();\n        })\n        .classed(\"hide\", function(d) {\n          return d.children ? true : false;\n        });\n\n      cells // show this depth + 1 and below\n        .filter(function(d) {\n          return d.depth > currentDepth;\n        })\n        .classed(\"hide\", false);\n    }\n\n    return (\n      <div className=\"father\">\n        <nav className=\"nav-bar-d3\">\n          <div className=\"up\">zoom out</div>\n        </nav>\n        <div className=\"feature\" id=\"chart\"></div>\n      </div>\n    );\n  }\n}\nexport default withRouter(D3Test2);\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./CollectionDetail.scss\";\nimport Axios from \"axios\";\nimport D3Test2 from \"../../components/D3Test/D3Test2\";\n\nclass CollectionDetail extends Component {\n  state = {\n    // name: \"Identity\",\n    data: {\n      children: [\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 5\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 5\", value: \"cgi-2.jpg\" }\n      ]\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"CollectionDetail-style\">\n        {\" \"}\n        <div className=\"CollectionDetail-top\">\n          {\" \"}\n          <h1>Detalle de coleccion</h1>\n          <Link to=\"/profile\">\n            <h1>X</h1>\n          </Link>\n          <div id=\"treemap-detail\">\n            <D3Test2 data={this.state.data}></D3Test2>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default CollectionDetail;\n","import React, { Component } from \"react\";\nimport \"./App.scss\";\nimport \"../src/components/treeStyles.css\";\nimport { Switch, Route } from \"react-router-dom\";\nimport Navbar from \"./components/navbar/Navbar\";\nimport AuthService from \"./components/auth/AuthService\";\nimport axios from \"axios\";\nimport Footer from \"./components/footer/Footer\";\n// import * as d3 from \"d3\";\n// import \"../treeStyles.css\"\nimport Profile from \"./components/profile/Profile\";\nimport DetailPiece from \"./components/detailPiece/DetailPiece\";\nimport D3Test2 from \"./components/D3Test/D3Test2\";\nimport CollectionDetail from \"./components/CollectionDetail/CollectionDetail\";\n\n// d3.select(this.refs.myDiv).style(“background-color”, “blue”)\n// render(<div ref=”myDiv”></div>)\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loggedInUser: null,\n      search: \"\",\n      resultsId: [],\n      resultsDetail: [],\n      tree: {}\n    };\n    this.service = new AuthService();\n    this.fetchUser();\n  }\n\n  getUser = userObj => {\n    this.setState({\n      loggedInUser: userObj\n    });\n  };\n  logout = () => {\n    this.service.logout().then(() => {\n      this.setState({ loggedInUser: null });\n    });\n  };\n  fetchUser() {\n    return this.service\n      .loggedin()\n      .then(response => {\n        this.setState({\n          loggedInUser: response\n        });\n      })\n      .catch(err => {\n        this.setState({\n          loggedInUser: false\n        });\n      });\n  }\n\n  // searchBar(e) {\n  //   if (e.key === \"Enter\") {\n  //     axios\n  //       .get(\n  //         `https://collectionapi.metmuseum.org/public/collection/v1/search?q=${e.target.value}`\n  //       )\n  //       .then(results => {\n  //         results = results.data.objectIDs;\n  //         if (results) {\n  //           this.setState({ resultsId: results }, () => {\n  //             this.getResultsDetail(0);\n  //           });\n  //         }\n  //       });\n  //   }\n  // }\n\n  searchMongo(e) {\n    if (e.key === \"Enter\") {\n      axios\n        .get(`${process.env.REACT_APP_API_URL}/pieces/${e.target.value}`)\n        .then(results => {\n          results = results.data;\n          if (results) {\n            const filteredResults = results; //this.filterResults(results);\n            console.log(\"results filteredResults\", results, filteredResults);\n            const tree = this.nestByMuseum(filteredResults);\n            this.setState({ resultsDetail: filteredResults, tree: tree });\n          }\n        });\n    }\n  }\n  // /////////////////////////////\n  filterResults(results) {\n    const limit = 100;\n    let filterResults = this.sortByRating(results).filter(p => !!p.imageUrl);\n    if (results.length > limit) {\n      filterResults = results.slice(0, limit + 1);\n    }\n    return filterResults;\n  }\n  sortByRating(pieces) {\n    const ratedPieces = pieces.sort((a, b) => b.rating - a.rating);\n    return ratedPieces;\n  }\n  nestByMuseum(pieces) {\n    const tree = { name: \"search\", value: \"\", children: [] };\n    const museums = [\"MET\", \"MOMA\", \"RMA\"];\n    museums.forEach(m => {\n      const museumPieces = pieces.filter(p => p.museum === m);\n      const bestImg = museumPieces[0] && museumPieces[0].imageUrl;\n      const nestedMuseum = museumPieces.length\n        ? this.nestByDate(museumPieces)\n        : [];\n      // console.log('nestByMuseum', nestedMuseum);\n      const childMuseum = {\n        name: m,\n        value: bestImg,\n        children: nestedMuseum,\n        size: museumPieces.length\n      };\n      tree.children.push(childMuseum);\n      // this.setState({ tree });\n    });\n    console.log(\"tree\", tree);\n    return tree;\n  }\n\n  nestByDate(museumPieces) {\n    const mainDates = this.getDatesFromPieces(museumPieces);\n    // console.log('mainDates', mainDates);\n    const nestedMuseum = [];\n    mainDates.forEach((d, i) => {\n      const datePieces = museumPieces.filter(p => {\n        if (d === \"noDate\") {\n          return !Number.isInteger(p.year);\n        }\n        return (\n          p.year >= d && (mainDates[i + 1] ? p.year < mainDates[i + 1] : true)\n        );\n      });\n      const bestImg = datePieces[0] && datePieces[0].imageUrl;\n      const nestedDates = datePieces.length\n        ? this.nestByOrigin(datePieces)\n        : [];\n      // console.log('nestedDates', nestedDates);\n      const childDate = {\n        name: d,\n        value: bestImg,\n        children: nestedDates || [],\n        size: datePieces.length\n      };\n      nestedMuseum.push(childDate);\n    });\n    return nestedMuseum;\n  }\n  getDatesFromPieces(museumPieces) {\n    const allYears = museumPieces.map(p => p.year);\n    const piecesWithDate = allYears\n      .filter(y => Number.isInteger(y))\n      .sort((a, b) => a - b);\n    const piecesWithNoDate = allYears.filter(y => !Number.isInteger(y));\n    // console.log('piecesWithDate', piecesWithDate, piecesWithNoDate);\n    const number = 4;\n    const years = [];\n    if (piecesWithDate.length >= number) {\n      const step = Math.floor(piecesWithDate.length / (number - 1));\n      for (let i = 0; i < piecesWithDate.length; i += step) {\n        if (piecesWithDate[i]) {\n          years.push(piecesWithDate[i]);\n        }\n      }\n      years.push(piecesWithDate[piecesWithDate.length - 1]);\n    }\n    if (piecesWithNoDate.length) {\n      years.push(\"noDate\");\n    }\n    console.log(\"years\", years);\n    return years;\n  }\n  nestByOrigin(datePieces) {\n    const origins = [\"noOrigin\"];\n    const nestedDates = [];\n    datePieces.forEach(p => {\n      if (p.origin.length) {\n        p.origin.forEach(newOrigin => {\n          if (!origins.includes(newOrigin)) {\n            origins.push(newOrigin);\n          }\n        });\n        origins.sort();\n      }\n    });\n    // console.log('--- origins', origins);\n    console.log(\"nestByOrigin All\", datePieces.length);\n    origins.forEach((o, i) => {\n      const prevOrigins = i > 0 ? origins.slice(0, i) : [];\n      const originPieces = datePieces.filter(p => {\n        if (p.origin.length <= 0 && o === \"noOrigin\") {\n          return true;\n        }\n        return p.origin.includes(\n          o\n        ) /* &&\n          !p.origin.reduce((ac, or) => ac || prevOrigins.includes[or]) */;\n      });\n      /* console.log('-- currOrigin', o, 'prevOrigins', prevOrigins, 'filtered', [\n        ...originPieces.map(p => p.origin)\n      ]); */\n      const bestImg = originPieces[0] && originPieces[0].imageUrl;\n      const nestedOrigins = originPieces.length\n        ? this.nestByAuthor(originPieces)\n        : [];\n      console.log(\"nestByOrigin\", nestedOrigins.length, o);\n      const childDate = {\n        name: o,\n        value: bestImg,\n        children: nestedOrigins || [],\n        size: originPieces.length\n      };\n      if (nestedOrigins.length > 0) {\n        nestedDates.push(childDate);\n      }\n    });\n    return nestedDates;\n  }\n  nestByAuthor(originPieces) {\n    const authors = [];\n    const nestedDates = [];\n    originPieces.forEach(p => {\n      if (p.author && !authors.includes(p.author)) {\n        authors.push(p.author);\n      }\n    });\n    authors.forEach((a, i) => {\n      const authorPieces = originPieces\n        .filter(p => p.author)\n        .map(p => {\n          p.value = p.imageUrl;\n          p.size = p.rating * 0.1;\n          // p.size = 1;\n          return p;\n        });\n      // console.log('nestByAuthor', authorPieces);\n      const bestImg = authorPieces[0] && authorPieces[0].imageUrl;\n      const childDate = {\n        name: a,\n        value: bestImg,\n        children: authorPieces || [],\n        size: authorPieces.length\n      };\n      if (authorPieces.length > 0) {\n        nestedDates.push(childDate);\n      }\n    });\n    return nestedDates;\n  }\n\n  // getData(results) {\n  //   let data = results.map(result => ({\n  //     name: result.name,\n  //     value: result.imageUrl\n  //   }));\n  //   this.setState({ resultsDetail: { children: data } });\n  //   console.log(\"state\", this.state.resultsDetail);\n  // }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"App\">\n          <D3Test2 data={this.state.tree}></D3Test2>\n\n          <Navbar\n            // searchBar={e => this.searchBar(e)}\n            userInSession={this.state.loggedInUser}\n            logout={this.logout}\n            getUser={this.getUser}\n          />\n          <Switch>\n            <Route\n              path=\"/detail/:id\"\n              render={({ match }) => (\n                <DetailPiece user={this.state.loggedInUser} match={match} />\n              )}\n            />\n            <Route\n              path=\"/collection/:id\"\n              render={({ match }) => (\n                <CollectionDetail\n                  user={this.state.loggedInUser}\n                  match={match}\n                />\n              )}\n            />\n            {/* <Route  path=\"/\" /> */}\n            <Route\n              // path=\"/profile/:id\"\n              path=\"/profile\"\n              render={props => (\n                <Profile user={this.state.loggedInUser} {...props} />\n              )}\n            />\n          </Switch>\n          <Footer\n            searchMongo={e => this.searchMongo(e)}\n            tags={this.state.resultsDetail ? this.state.resultsDetail : []}\n          ></Footer>\n        </div>\n        {/* <SimpleTreemapExample></SimpleTreemapExample> */}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Router><App /></Router>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}