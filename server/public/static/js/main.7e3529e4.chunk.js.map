{"version":3,"sources":["components/footer/TextField/TextField.js","components/auth/AuthService.js","components/auth/Login.js","components/auth/Signup.js","components/navbar/Navbar.js","components/footer/slider/Slider.js","components/footer/sendButton/UploadButtons.js","components/footer/CheckboxesGroup/CheckboxesGroup.js","components/footer/Footer.js","nestData.js","components/D3Test/BackgroundLoader.js","components/collection/Collection.js","components/collection/Collections.js","components/profile/Profile.js","components/detailPiece/DetailPiece.js","components/D3Test/D3Test2.js","components/D3Test/D3Test2small.js","components/CollectionDetail/CollectionDetail.js","InitialCard/InitialCard.js","App.js","serviceWorker.js","index.js","components/footer/ThemeProvider/Theme.js","components/footer/multipleSelect/MultipleSelect.js"],"names":["global","__webpack_require__","d","__webpack_exports__","BasicTextFields","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_1__","_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_2__","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_3__","_ThemeProvider_Theme__WEBPACK_IMPORTED_MODULE_5__","innerWidth","window","useStyles","makeStyles","theme","root","& > *","margin","spacing","width","props","classes","a","createElement","className","noValidate","autoComplete","Theme","onChange","onKeyPress","onKeyDown","id","label","AuthService","_this","this","Object","classCallCheck","signup","username","password","service","post","then","response","data","login","loggedin","get","logout","axios","create","baseURL","concat","process","withCredentials","Login","possibleConstructorReturn","getPrototypeOf","call","handleFormSubmit","event","preventDefault","state","setState","error","getUser","catch","handleChange","_event$target","target","name","value","defineProperty","_this2","react_default","onSubmit","type","e","placeholder","Component","Signup","user","Navbar","handleLogout","loggedInUser","isSignup","nextProps","objectSpread","Fragment","Link","to","onClick","components_auth_Login","changeState","components_auth_Signup","valuetext","RangeSlider","_React$useState","React","useState","_React$useState2","slicedToArray","setValue","ThemeProvider","Typography","gutterBottom","Slider","min","max","newValue","changeRange","valueLabelDisplay","aria-labelledby","getAriaValueText","input","display","UploadButtons","htmlFor","Button","sendResults","variant","component","formControl","CheckboxesGroup","_React$createElement","_React$createElement2","_React$createElement3","gilad","jason","antoine","checked","rijks","met","moma","prado","louvre","british","filter","v","length","FormControl","FormLabel","FormGroup","FormControlLabel","control","Checkbox","disabled","Footer","tags","textFieldValue","src","CheckboxesGroup_CheckboxesGroup","TextField","saveSearch","searchMongo","MultipleSelect","onSelectTag","multipleSelectResult","sliderResult","UploadButtons_UploadButtons","nestByMuseum","pieces","tree","children","forEach","m","museumPieces","p","museum","bestImg","imageUrl","nestedMuseum","mainDates","allYears","map","Math","abs","year","piecesWithDate","y","Number","isInteger","sort","b","piecesWithNoDate","years","step","floor","i","push","apply","toConsumableArray","Set","getDatesFromPieces","console","log","datePieces","nestedDates","origins","origin","newOrigin","includes","o","slice","originPieces","nestedOrigins","authors","author","authorPieces","size","rating","childDate","nestByAuthor","nestByOrigin","nestByDate","childMuseum","$","Collection","collection","_id","Axios","delete","reFetch","deleteCollection","piece","style","backgroundImage","Collections","newCollection","keyCode","sendName","updatedUser","_this3","collections","updateNewCollection","checkEnter","components_collection_Collection","Profile","profile","useUser","gotUser","setUserProfile","userData","next","getProfile","history","goBack","components_collection_Collections","withRouter","DetailPiece","isSaved","imageClass","addLike","bind","assertThisInitialized","some","find","match","params","_this4","pieceFound","aspectRatio","img","Image","onload","relation","height","_this5","put","pieceLiked","collectionId","_this6","pieceAdded","_this7","pieceDeleted","_this8","_this$state$piece","technic","description","culture","classification","department","museumId","index_es","icon","faHeart","class","every","addCollection","tag","jQuery","fn","bgLoaded","custom","settings","extend","afterLoaded","addClass","each","$this","bgImgs","css","split","key","replace","attr","load","remove","D3Test2","goDetail","d3","selectAll","url","currentDepth","x","domain","range","color","treemap","paddingInner","round","nodes","sum","cells","descendants","enter","append","depth","x0","y0","x1","y1","parent","on","zoom","text","html","datum","button","t","duration","ease","transition","ancestors","classed","CollectionDetail","treeData","collectionFound","treeCollection","D3Test_D3Test2small","InitialCard","closeInitialCard","Loader","require","App","userObj","search","searchText","filters","yearRange","dataBases","resultsId","resultsDetail","isLoaded","introOpen","fetchUser","sendSearch","randomSearch","results","filteredResults","nodeLength","err","loaded","setTimeout","src_InitialCard_InitialCard","options","lines","radius","scale","corners","fadeColor","speed","rotate","animation","direction","zIndex","top","left","shadow","position","components_D3Test_D3Test2","setLoaded","components_navbar_Navbar","userInSession","Switch","Route","path","render","_ref","components_detailPiece_DetailPiece","_ref2","components_CollectionDetail_CollectionDetail","components_profile_Profile","assign","components_footer_Footer","Boolean","location","hostname","ReactDOM","BrowserRouter","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister","_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_0__","createMuiTheme","palette","primary","light","main","dark","secondary","typography","htmlFontSize","fontSize","h1","fontsize","status","minWidth","maxWidth","chips","chip","noLabel","marginTop","MenuProps","PaperProps","maxHeight","ITEM_HEIGHT","names","getStyles","personName","fontWeight","indexOf","fontWeightRegular","fontWeightMedium","useTheme","_Users_laura_Documents_Ironhack_w8d1_mnemosyne_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","setPersonName","react__WEBPACK_IMPORTED_MODULE_1___default","_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5__","_material_ui_core_FormControl__WEBPACK_IMPORTED_MODULE_9__","_material_ui_core_InputLabel__WEBPACK_IMPORTED_MODULE_7__","_material_ui_core_Select__WEBPACK_IMPORTED_MODULE_10__","labelId","multiple","_material_ui_core_Input__WEBPACK_IMPORTED_MODULE_6__","renderValue","selected","_material_ui_core_Chip__WEBPACK_IMPORTED_MODULE_11__","_material_ui_core_MenuItem__WEBPACK_IMPORTED_MODULE_8__"],"mappings":"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","file":"static/js/main.7e3529e4.chunk.js","sourcesContent":["import React from 'react';\nimport { makeStyles, ThemeProvider } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport \"./TextField.scss\"\nimport Theme from \"../ThemeProvider/Theme\"\n\nconst { window } = global;\nconst { innerWidth } = window;\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    '& > *': {\n      margin: theme.spacing(1),\n      width: innerWidth/5,\n    },\n  },\n}));\n\nexport default function BasicTextFields(props) {\n  const classes = useStyles();\n\n  return (\n <div className=\"input-text-field\">   <form className={classes.root} noValidate autoComplete=\"off\">\n <ThemeProvider theme={Theme}> \n <TextField onChange={props.onChange} onKeyPress={props.onKeyDown} id=\"standard-basic\" label=\"Search\" />\n </ThemeProvider>\n</form></div>\n  );\n}","// auth/auth-service.js\nimport axios from 'axios';\n// require('dotenv').config();\n\nclass AuthService {\n  constructor() {\n    this.service = axios.create({\n      baseURL: `${process.env.REACT_APP_API_URL}/auth`,\n      // baseURL: `http://localhost:3010/api/auth`,\n      withCredentials: true\n    });\n  }\n\n  signup = (username, password) => {\n    return this.service.post('/signup', {username, password})\n    .then(response => response.data)\n  }\n\n  login = (username, password) => {\n    return this.service.post('/login', {username, password})\n    .then(response => response.data)\n  }\n\n  loggedin = () => {\n    return this.service.get('/currentUser',)\n    .then(response => response.data)\n  }\n\n  logout = () => {\n    return this.service.get('/logout',)\n    .then(response => response.data)\n  }\n}\n\nexport default AuthService;","// auth/Signup.js\nimport React, { Component } from \"react\";\n// import { Link } from \"react-router-dom\";\nimport AuthService from \"./AuthService\";\nimport \"./Login.scss\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { username: \"\", password: \"\" };\n    this.service = new AuthService();\n  }\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    const username = this.state.username;\n    const password = this.state.password;\n\n    this.service\n      .login(username, password)\n      .then(response => {\n        this.setState({\n          username: username,\n          password: password,\n          error: false\n        });\n\n        this.props.getUser(response);\n      })\n      .catch(error => {\n        this.setState({\n          username: username,\n          password: password,\n          error: true\n        });\n      });\n  };\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  render() {\n    return (\n      <div className=\"login-form\">\n        <p>{this.state.error ? \"error \" : \"\"}</p>\n        <form className=\"loginForm\" onSubmit={this.handleFormSubmit}>\n          {/* <label>name</label> */}\n          <input\n            autoComplete=\"off\"\n            type=\"text\"\n            name=\"username\"\n            value={this.state.username}\n            onChange={e => this.handleChange(e)}\n            placeholder=\"name:\"\n          />\n\n          {/* <label>pass</label> */}\n          <input\n            autoComplete=\"off\"\n            type=\"password\"\n            name=\"password\"\n            value={this.state.password}\n            onChange={e => this.handleChange(e)}\n            placeholder=\"| password:\"\n          />\n\n          <input type=\"submit\" value=\"Login\" />\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","// auth/Signup.js\nimport React, { Component } from \"react\";\nimport AuthService from \"./AuthService\";\nimport \"./Signup.scss\";\n\n//signup y login son iguales a excepción de el html renderizado y el endpoint de nuestra API rest a la que llamamos\n//uno llama a /signup y el otro a /login usando nuestro AuthService\nclass Signup extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { username: \"\", password: \"\" };\n    this.service = new AuthService();\n  }\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    const username = this.state.username;\n    const password = this.state.password;\n\n    //aquí llamamos al endpoint /signup de nuestra API Rest usando nuestro AuthService\n    this.service\n      .signup(username, password)\n      .then(response => {\n        this.setState({\n          username: \"\",\n          password: \"\"\n        });\n        //aquí elevamos el nuevo usuario una vez creado a App usando getUser via props\n        //por tanto, informamos a App de que el nuevo usuario ha sido creado, provocando un re-render\n        //y mostrando la parte de contenidos. Mira la función getUser de App para más info (date cuenta de que establece el state de App)\n        this.props.getUser(response.user);\n      })\n      .catch(error => {\n        this.setState({\n          username: username,\n          password: password,\n          error: true\n        });\n      });\n  };\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  render() {\n    return (\n      <div className=\"signup-form\">\n        <p>{this.state.error ? \"error \" : \"\"}</p>\n        <form className=\"signupForm\" onSubmit={this.handleFormSubmit}>\n          {/* <label>name</label> */}\n          <input\n            autoComplete=\"off\"\n            type=\"text\"\n            name=\"username\"\n            value={this.state.username}\n            onChange={e => this.handleChange(e)}\n            placeholder=\"name:\"\n          />\n\n          {/* <label>pass</label> */}\n          <input\n            autoComplete=\"off\"\n            type=\"password\"\n            name=\"password\"\n            value={this.state.password}\n            onChange={e => this.handleChange(e)}\n            placeholder=\"| password:\"\n          />\n\n          <input type=\"submit\" value=\"Sign up\" />\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Signup;\n","// navbar/Navbar.js\n\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport AuthService from \"../auth/AuthService\";\nimport \"./Navbar.scss\";\nimport Login from \"../auth/Login\";\nimport Signup from \"../auth/Signup\";\n\nclass Navbar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loggedInUser: null, isSignup: false };\n    this.service = new AuthService();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ ...this.state, loggedInUser: nextProps[\"userInSession\"] });\n  }\n\n  handleLogout = e => {\n    this.props.logout();\n  };\n\n  changeState() {\n    this.setState({\n      isSignup: !this.state.isSignup\n    });\n  }\n\n  render() {\n    return (\n      <nav className=\"nav-style\">\n        {this.state.loggedInUser ? (\n          <React.Fragment>\n            <div className=\"profile-navbar\">\n              {\" \"}\n              <Link to=\"/profile\">\n                {\" \"}\n                <h1 id=\"loggedname\">{this.state.loggedInUser.username}</h1>\n              </Link>\n              <a id=\"logoutlink\" onClick={this.handleLogout}>logout</a>\n            </div>\n          </React.Fragment>\n        ) : (\n          <ul>\n            {this.state.isSignup ? (\n              <div className=\"user-buttons\">\n                <Login getUser={this.props.getUser} />\n                <button\n                  className=\"change-style\"\n                  onClick={() => this.changeState()}\n                >\n                  or signup\n                </button>\n              </div>\n            ) : (\n              <div className=\"user-buttons\">\n                <Signup getUser={this.props.getUser} />\n                <button\n                  className=\"change-style\"\n                  onClick={() => this.changeState()}\n                >\n                  or login\n                </button>\n              </div>\n            )}\n          </ul>\n        )}\n      </nav>\n    );\n  }\n}\n\nexport default Navbar;\n","import React from \"react\";\nimport { makeStyles, ThemeProvider } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Slider from \"@material-ui/core/Slider\";\nimport \"./Slider.scss\";\nimport Theme from \"../ThemeProvider/Theme\";\n\nconst useStyles = makeStyles({\n  root: {\n    // color: black,\n    width: 200\n  }\n});\n\nfunction valuetext(value) {\n  return `${value}°C`;\n}\n\nexport default function RangeSlider(props) {\n  const classes = useStyles();\n  const [value, setValue] = React.useState([500, 1500]);\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n    props.changeRange(newValue);\n\n  };\n\n  return (\n    <div className={classes.root}>\n      <ThemeProvider theme={Theme}>\n        <Typography id=\"range-slider\" gutterBottom>\n          Year range\n        </Typography>\n        <Slider\n          min={0}\n          max={2020}\n          value={value}\n          onChange={handleChange}\n          valueLabelDisplay=\"auto\"\n          aria-labelledby=\"range-slider\"\n          getAriaValueText={valuetext}\n        />\n      </ThemeProvider>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { makeStyles, ThemeProvider } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport \"./UploadButtons.scss\";\nimport Theme from \"../ThemeProvider/Theme\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    \"& > *\": {\n      margin: theme.spacing(1)\n    }\n  },\n  input: {\n    display: \"none\"\n  }\n}));\n\nexport default function UploadButtons(props) {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <label htmlFor=\"outlined-button-file\">\n        <ThemeProvider theme={Theme}>\n          <Button\n            onClick={props.sendResults}\n            variant=\"outlined\"\n            component=\"span\"\n          >\n            FIND\n          </Button>\n        </ThemeProvider>\n      </label>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { makeStyles, useTheme, ThemeProvider } from \"@material-ui/core/styles\";\nimport FormLabel from \"@material-ui/core/FormLabel\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormGroup from \"@material-ui/core/FormGroup\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport \"./CheckboxesGroup.scss\";\nimport Theme from \"../ThemeProvider/Theme\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\"\n  },\n  formControl: {\n    margin: theme.spacing(3)\n  }\n}));\n\nexport default function CheckboxesGroup() {\n  const classes = useStyles();\n  const [state, setState] = React.useState({\n    gilad: true,\n    jason: false,\n    antoine: false\n  });\n\n  const handleChange = name => event => {\n    setState({ ...state, [name]: event.target.checked });\n  };\n\n  const { rijks, met, moma, prado, louvre, british } = state;\n  const error =\n    [rijks, met, moma, prado, louvre, british].filter(v => v).length !== 2;\n\n  return (\n    <div className={classes.root}>\n      <ThemeProvider theme={Theme}>\n        <FormControl component=\"fieldset\" className={classes.formControl}>\n          <FormLabel component=\"legend\">Pick Database</FormLabel>\n          <FormGroup>\n            <div className=\"two-columns\">\n              {\" \"}\n              <div className=\"one-column\">\n                {\" \"}\n                <FormControlLabel\n                  className=\"check-label\"\n                  control={\n                    <Checkbox\n                      checked={rijks}\n                      onChange={handleChange(\"rijks\")}\n                      value=\"rijks\"\n                      checked\n                      disabled\n                    />\n                  }\n                  label=\"Rijks\"\n                />\n                <FormControlLabel\n                  className=\"check-label\"\n                  control={\n                    <Checkbox\n                      checked={met}\n                      onChange={handleChange(\"met\")}\n                      value=\"met\"\n                      checked\n                      disabled\n                    />\n                  }\n                  label=\"MET\"\n                />\n              </div>\n              <div className=\"one-column\">\n                <FormControlLabel\n                  className=\"check-label\"\n                  control={\n                    <Checkbox\n                    checked={louvre}\n                    onChange={handleChange(\"louvre\")}\n                    value=\"louvre\"\n                    disabled\n                  />\n                  }\n                  label=\"Louvre\"\n                />{\" \"}\n                <FormControlLabel\n                  className=\"check-label\"\n                  control={\n                    <Checkbox\n                      checked={moma}\n                      onChange={handleChange(\"moma\")}\n                      value=\"moma\"\n                      checked\n                      disabled\n                    />\n                  }\n                  label=\"MoMA\"\n                />\n              </div>\n            </div>\n          </FormGroup>\n        </FormControl>\n      </ThemeProvider>\n    </div>\n  );\n}\n","import React, { Component } from \"react\";\n// import { Link } from \"react-router-dom\";\nimport \"./Footer.scss\";\nimport Slider from \"./slider/Slider\";\nimport MultipleSelect from \"./multipleSelect/MultipleSelect\";\n// import { TextField } from \"@material-ui/core\";\nimport TextField from \"./TextField/TextField\";\nimport UploadButtons from \"./sendButton/UploadButtons\";\nimport CheckboxesGroup from \"./CheckboxesGroup/CheckboxesGroup\";\n// import logo-mnemosine from \"../../../public/images/logo-mnemosine\";\n\nclass Footer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loggedInUser: null,\n      isSignup: false,\n      tags: [],\n      textFieldValue: \"\"\n    };\n  }\n\n  render() {\n    return (\n      <div className=\"footer-style\">\n        {/* <image url(\"\")/> */}\n        {/* <img src={logo-mnemosine} alt=\"logo\"/> */}\n\n        <img className=\"mnemosine-logo\" src=\"/images/logo-mnemosine.png\" />\n        {/* <h1 className=\"mnemosine-title\">mnemosine</h1> */}\n        <CheckboxesGroup></CheckboxesGroup>\n        <TextField\n          onChange={e => this.props.saveSearch(e)}\n          onKeyDown={e => this.props.searchMongo(e)}\n        ></TextField>\n        <MultipleSelect\n          onSelectTag={e => this.props.multipleSelectResult(e)}\n        ></MultipleSelect>\n        <Slider changeRange={e => this.props.sliderResult(e)}></Slider>\n        <UploadButtons sendResults={this.props.sendResults}></UploadButtons>\n      </div>\n    );\n  }\n}\n\nexport default Footer;\n","// export function filterResults(results) {\n//   const limit = 100;\n//   let filterResults = sortByRating(results).filter(p => !!p.imageUrl);\n//   if (results.length > limit) {\n//     filterResults = results.slice(0, limit + 1);\n//   }\n//   return filterResults;\n// }\n// export function sortByRating(pieces) {\n//   const ratedPieces = pieces.sort((a, b) => b.rating - a.rating);\n//   return ratedPieces;\n// }\nexport function nestByMuseum(pieces) {\n  const tree = { name: 'search', value: '', children: [] };\n  const museums = ['MET', 'MOMA', 'RMA'];\n  museums.forEach(m => {\n    const museumPieces = pieces.filter(p => p.museum === m);\n    const bestImg = museumPieces[0] && museumPieces[0].imageUrl;\n    const nestedMuseum = museumPieces.length ? nestByDate(museumPieces) : [];\n    // console.log('nestByMuseum', nestedMuseum);\n    const childMuseum = {\n      name: m,\n      value: bestImg,\n      children: nestedMuseum,\n      size: museumPieces.length\n    };\n    if (nestedMuseum.length) {\n      tree.children.push(childMuseum);\n    }\n    // nodeLentgh +=1\n    // setState({ tree });\n  });\n  console.log('tree', tree);\n  return tree;\n}\n\nexport function nestByDate(museumPieces) {\n  const mainDates = getDatesFromPieces(museumPieces);\n  console.log('mainDates', mainDates);\n  const nestedMuseum = [];\n  mainDates.forEach((d, i) => {\n    const datePieces = museumPieces.filter(p => {\n      if (d === 'noDate') {\n        return !Number.isInteger(p.year);\n      }\n      return p.year >= d && (mainDates[i + 1] ? p.year < mainDates[i + 1] : true);\n    });\n    const bestImg = datePieces[0] && datePieces[0].imageUrl;\n    const nestedDates = datePieces.length > 0 ? nestByOrigin(datePieces) : [];\n    // console.log('nestedDates', nestedDates);\n    const childDate = {\n      name: d,\n      value: bestImg,\n      children: nestedDates,\n      size: datePieces.length\n    };\n    if (nestedDates.length) {\n      nestedMuseum.push(childDate);\n    }\n  });\n  return nestedMuseum;\n}\nexport function getDatesFromPieces(museumPieces) {\n  const allYears = museumPieces.map(p => Math.abs(p.year));\n  const piecesWithDate = allYears.filter(y => Number.isInteger(y)).sort((a, b) => a - b);\n  const piecesWithNoDate = allYears.filter(y => !Number.isInteger(y));\n  // console.log('allYears', allYears);\n  // console.log('piecesWithDate', piecesWithDate, piecesWithNoDate);\n  const number = 4;\n  const years = [];\n  if (piecesWithDate.length >= number) {\n    const step = Math.floor(piecesWithDate.length / (number - 1));\n    for (let i = 0; i < piecesWithDate.length; i += step) {\n      if (piecesWithDate[i]) {\n        years.push(piecesWithDate[i]);\n      }\n    }\n    years.push(piecesWithDate[piecesWithDate.length - 1]);\n  } else {\n    years.push(...piecesWithDate);\n  }\n  if (piecesWithNoDate.length) {\n    years.push('noDate');\n  }\n  const uYears = [...new Set(years)];\n  // console.log(\"years\", years);\n  return uYears;\n}\nexport function nestByOrigin(datePieces) {\n  const origins = ['noOrigin'];\n  const nestedDates = [];\n  datePieces.forEach(p => {\n    if (p.origin.length) {\n      const newOrigin = p.origin[0];\n      if (!origins.includes(newOrigin)) {\n        origins.push(newOrigin);\n      }\n      origins.sort();\n    }\n  });\n  // console.log('--- origins', origins);\n  // console.log(\"nestByOrigin All\", datePieces.length);\n  origins.forEach((o, i) => {\n    const prevOrigins = i > 0 ? origins.slice(0, i) : [];\n    const originPieces = datePieces.filter(p => {\n      if (p.origin.length <= 0 && o === 'noOrigin') {\n        return true;\n      }\n      return (\n        p.origin[0] ===\n        o /* &&\n        !p.origin.reduce((ac, or) => ac || prevOrigins.includes[or]) */\n        /* return p.origin.includes(\n        o\n      ) */\n      );\n    });\n    /* console.log('-- currOrigin', o, 'prevOrigins', prevOrigins, 'filtered', [\n      ...originPieces.map(p => p.origin)\n    ]); */\n    const bestImg = originPieces[0] && originPieces[0].imageUrl;\n    const nestedOrigins = originPieces.length ?  nestByAuthor(originPieces)  : [];\n    // console.log(\"nestByOrigin\", nestedOrigins.length, o);\n    const childDate = {\n      name: o,\n      value: bestImg,\n      children: nestedOrigins || [],\n      size: originPieces.length\n    };\n    if (nestedOrigins.length > 0) {\n      nestedDates.push(childDate);\n    }\n  });\n  return nestedDates;\n}\nexport function nestByAuthor(originPieces) {\n  const authors = [];\n  const nestedDates = [];\n  originPieces.forEach(p => {\n    if (p.author && !authors.includes(p.author)) {\n      authors.push(p.author);\n    }\n  });\n  authors.forEach((a, i) => {\n    const authorPieces = originPieces\n      .filter(p => p.author === a)\n      .map(p => {\n        p.value = p.imageUrl;\n        p.size = p.rating * 0.1;\n        // p.size = 1;\n        return p;\n      });\n    // console.log('nestByAuthor', authorPieces);\n    const bestImg = authorPieces[0] && authorPieces[0].imageUrl;\n    const childDate = {\n      name: a,\n      value: bestImg,\n      children: authorPieces || [],\n      size: authorPieces.length\n    };\n    if (authorPieces.length > 0) {\n      nestedDates.push(childDate);\n    }\n  });\n  return nestedDates;\n}\n\nexport default { nestByMuseum };\n","/*\n * BG Loaded\n *\n *\n * Copyright (c) 2014 Jonathan Catmull\n * Licensed under the MIT license.\n */\n\nimport $ from \"jquery\";\nimport jQuery from \"jquery\";\n\n(function($) {\n  $.fn.bgLoaded = function(custom) {\n    var self = this;\n\n    // Default plugin settings\n    var defaults = {\n      afterLoaded: function() {\n        this.addClass(\"bg-loaded\");\n      }\n    };\n\n    // Merge default and user settings\n    var settings = $.extend({}, defaults, custom);\n    console.log(\"hola\");\n    \n    // Loop through element\n    self.each(function() {\n      var $this = $(this),\n        bgImgs = $this.css(\"background-image\").split(\", \");\n      $this.data(\"loaded-count\", 0);\n\n      $.each(bgImgs, function(key, value) {\n        var img = value.replace(/^url\\([\"']?/, \"\").replace(/[\"']?\\)$/, \"\");\n        $(\"<img/>\")\n          .attr(\"src\", img)\n          .load(function() {\n            $(this).remove(); // prevent memory leaks\n            $this.data(\"loaded-count\", $this.data(\"loaded-count\") + 1);\n            if ($this.data(\"loaded-count\") >= bgImgs.length) {\n              settings.afterLoaded.call($this);\n            }\n          });\n      });\n    });\n  };\n})(jQuery);\n","import React, { Component } from \"react\";\nimport \"./Collection.scss\";\nimport Axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n\nclass Collection extends Component {\n  // constructor(props) {}\n  deleteCollection() {\n    console.log(\"delete\", this.props.collection._id);\n    console.log(this.props);\n    Axios.delete(\n      `${process.env.REACT_APP_API_URL}/collection/${this.props.collection._id}`\n    ).then(() => {\n      console.log(\"callingrefetchcollection\", this.props.reFetch);\n      if (this.props.reFetch) {\n        this.props.reFetch();\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"collectionCard\">\n        <div className=\"collectionButtons\">\n          <h1>{this.props.collection.name}</h1>\n          <button className=\"button-moved-right\" onClick={() => this.deleteCollection()}>delete</button>\n        </div>\n        <Link to={`/collection/${this.props.collection._id}`}>\n          {\" \"}\n          <div className=\"collectionImages\">\n            {this.props.collection.pieces.slice(0, 4).map(piece => (\n              <div\n                className=\"imageSquare\"\n                style={{ backgroundImage: `url(${piece.imageUrl})` }}\n              ></div>\n            ))}\n          </div>\n        </Link>\n      </div>\n    );\n  }\n}\n\nexport default Collection;\n","import React, { Component } from \"react\";\nimport \"./Collections.scss\";\nimport Collection from \"./Collection\";\nimport Axios from \"axios\";\n\nclass Collections extends Component {\n  // constructor(props) {}\n  state = { newCollection: \"\" };\n\n  updateNewCollection(e) {\n    this.setState({\n      ...this.state,\n      newCollection: e.target.value\n    });\n  }\n\n  checkEnter(e) {\n    if (e.keyCode === 13) {\n      this.sendName();\n    }\n  }\n\n  sendName() {\n    Axios.post(\n      `${process.env.REACT_APP_API_URL}/collection/${this.props.user._id}`,\n      {\n        name: this.state.newCollection\n      }\n    ).then(updatedUser => this.props.reFetch(updatedUser.data));\n  }\n\n  render() {\n    console.log(\"num collections\", this.props.collections.length);\n    return (\n      <div className=\"collections-style\">\n        <div className=\"add-field\">\n          <input\n            autoComplete=\"off\"\n            type=\"text\"\n            placeholder=\"create new collection\"\n            id=\"create-collection\"\n            value={this.state.newCollection}\n            onChange={e => this.updateNewCollection(e)}\n            onKeyDown={e => this.checkEnter(e)}\n          />\n          <button onClick={() => this.sendName()}>add</button>\n        </div>\n        {this.props.collections.map(collection => (\n          <Collection\n            collection={collection}\n            reFetch={this.props.reFetch}\n          ></Collection>\n        ))}\n      </div>\n    );\n  }\n}\n\nexport default Collections;\n","import React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport \"./Profile.scss\";\nimport Axios from \"axios\";\nimport Collections from \"../collection/Collections\";\n// import * as IndexService from \"../../services/service\";\n\nclass Profile extends Component {\n  // constructor(props) {\n  //   super(props);\n  //   this.state = { profile: {} };\n  // }\n  state = { profile: {} };\n\n  getProfile(user) {\n    console.log(\"callingrefetchprofile\", user, this.props.user);\n    let useUser = user || this.props.user;\n    if (useUser) {\n      Axios.get(`${process.env.REACT_APP_API_URL}/profile/${useUser._id}`).then(\n        gotUser => {\n          this.setUserProfile(gotUser.data);\n        }\n      );\n    }\n  }\n\n  setUserProfile(userData) {\n    this.setState({ ...this.state, profile: userData });\n    console.log(\n      \"collections from back\",\n      userData && userData.collections && userData.collections.length\n    );\n  }\n\n  componentWillReceiveProps(next) {\n    this.getProfile(next.user);\n  }\n\n  componentDidMount() {\n    this.getProfile(this.props.user);\n  }\n\n  render() {\n    const { profile } = this.state;\n    // console.log(\"user\", this.props.user);\n    console.log(\n      \"profile collections\",\n      profile && profile.collections && profile.collections.length\n    );\n\n    if (this.props.user) {\n      return (\n        <div className=\"Profile-style\">\n          <div className=\"Profile-top\">\n            <div className=\"Profile-name\">\n              {\" \"}\n              <h1>Profile of {this.props.user.username}</h1>\n              <button onClick={this.props.history.goBack}>Close</button>\n\n            </div>\n            <div>\n              {profile && profile.collections && (\n                <Collections\n                  user={this.props.user}\n                  collections={profile.collections}\n                  reFetch={() => this.getProfile()}\n                ></Collections>\n              )}\n            </div>\n          </div>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"Profile-style\">\n          <div className=\"Profile-top\">\n            <h1>Profile of </h1>\n            <Link to=\"/\">\n              <h1>X</h1>\n            </Link>\n          </div>\n          \n          <div className=\"Profile-body\"></div>\n        </div>\n      );\n    }\n  }\n}\n\nexport default withRouter(Profile);\n","import React, { Component } from \"react\";\nimport \"./DetailPiece.scss\";\nimport { Link, useRouteMatch, withRouter } from \"react-router-dom\";\nimport Axios from \"axios\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faHeart } from \"@fortawesome/free-solid-svg-icons\";\nclass DetailPiece extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { piece: {}, user: {}, isSaved: false, imageClass: \"\" };\n    this.addLike = this.addLike.bind(this);\n  }\n\n  getProfile(user) {\n    let useUser = user || this.props.user;\n    if (useUser) {\n      Axios.get(`${process.env.REACT_APP_API_URL}/profile/${useUser._id}`).then(\n        gotUser => {\n          this.setUserProfile(gotUser.data);\n        }\n      );\n    }\n  }\n\n  setUserProfile(userData) {\n    let isSaved =\n      userData.collections &&\n      userData.collections.some(collection =>\n        collection.pieces.find(\n          piece => piece._id === this.props.match.params.id\n        )\n      );\n\n    this.setState({ ...this.state, user: userData, isSaved });\n  }\n\n  componentWillReceiveProps(next) {\n    this.getProfile(next.user);\n  }\n\n  componentDidMount() {\n    this.getProfile(this.props.user);\n    Axios.get(\n      `${process.env.REACT_APP_API_URL}/piece/${this.props.match.params.id}`\n    ).then(pieceFound => {\n      let aspectRatio = \"\";\n      var img = new Image();\n      img.src = pieceFound.data.imageUrl;\n      img.onload = () => {\n        let height = img.height;\n        let width = img.width;\n        let relation = height / width;\n        if (relation > 0.9 && relation < 1.1) {\n          aspectRatio = \"square-img\";\n        } else if (relation >= 1.1) {\n          aspectRatio = \"vertical-img\";\n        } else if (relation <= 0.9) {\n          aspectRatio = \"horizontal-img\";\n        }\n\n        this.setState({\n          ...this.state,\n          piece: pieceFound.data,\n          imageClass: aspectRatio\n        });\n      };\n\n      console.log(\"state\", this.state);\n    });\n  }\n\n  addLike() {\n    Axios.put(\n      `${process.env.REACT_APP_API_URL}/piece/like/${this.state.piece._id}`\n    ).then(pieceLiked => {\n      this.setState({ piece: pieceLiked.data });\n    });\n  }\n  addCollection(collectionId) {\n    Axios.put(\n      `${process.env.REACT_APP_API_URL}/collection/add/${collectionId}&${this.state.piece._id}`\n    ).then(pieceAdded => {\n      console.log(\"pieceAdded\", pieceAdded.data);\n      this.getProfile(this.state.user);\n    });\n  }\n\n  deleteCollection(collectionId) {\n    Axios.put(\n      `${process.env.REACT_APP_API_URL}/collection/del/${collectionId}&${this.state.piece._id}`\n    ).then(pieceDeleted => {\n      console.log(\"pieceDeleted\", pieceDeleted.data);\n      this.getProfile(this.state.user);\n    });\n  }\n\n  render() {\n    let {\n      origin,\n      technic,\n      tags,\n      museum,\n      name,\n      imageUrl,\n      description,\n      author,\n      year,\n      culture,\n      classification,\n      rating,\n      department,\n      museumId\n    } = this.state.piece;\n\n    return (\n      <div className=\"detailPiece\">\n        <div className=\"detail-card\">\n          <div className=\"detail-top\">\n            <h1>Detail view</h1>\n            <button onClick={this.props.history.goBack}>Close</button>\n          </div>\n          <div className=\"image-container\">\n            <img className={this.state.imageClass} src={imageUrl} />\n          </div>\n          <div className=\"detail-buttons\">\n            <h1>\n              <FontAwesomeIcon icon={faHeart} />\n              {rating}\n            </h1>\n            {/* {this.state.isSaved ? <h1> saved</h1> : <h1>not saved</h1>} */}\n            <button onClick={this.addLike}>like</button>\n            <div class=\"dropdown\">\n              <button class=\"dropbtn\">Add</button>\n              <div class=\"dropdown-content\">\n                {this.state &&\n                  this.state.user &&\n                  this.state.user.collections &&\n                  this.state.user.collections\n                    .filter(collection =>\n                      collection.pieces.every(\n                        p => p._id !== this.props.match.params.id\n                      )\n                    )\n                    .map(collection => (\n                      <button\n                        onClick={() => this.addCollection(collection._id)}\n                        class=\"droppedbtn\"\n                      >\n                        {collection.name}\n                      </button>\n                    ))}\n              </div>\n            </div>\n            {this.state.isSaved && (\n              <div class=\"dropdown\">\n                <button class=\"dropbtn\">Delete</button>\n                <div class=\"dropdown-content\">\n                  {this.state &&\n                    this.state.user &&\n                    this.state.user.collections &&\n                    this.state.user.collections\n                      .filter(collection =>\n                        collection.pieces.some(\n                          p => p._id === this.props.match.params.id\n                        )\n                      )\n                      .map(collection => (\n                        <button\n                          onClick={() => this.deleteCollection(collection._id)}\n                          class=\"droppedbtn\"\n                        >\n                          {collection.name}\n                        </button>\n                      ))}\n                </div>\n              </div>\n            )}\n          </div>\n          <div className=\"detail-text\">\n            {\" \"}\n            {<h1>{name}</h1>}\n            {author && <p>author: {author}</p>}\n            {year && <p>year: {year}</p>}\n            {museum === \"RMA\" ? (\n              <p>Rijksmuseum of Amsterdam</p>\n            ) : museum === \"MOMA\" ? (\n              <p>MoMA New York</p>\n            ) : (\n              <p>Metropolitan Museum of Art</p>\n            )}\n            {museumId && <p>museumId: {museumId}</p>}\n            {technic && <p>technic: {technic}</p>}\n            {origin && (\n              <p>\n                origin:\n                {origin && <p>{origin[0]}</p>}\n              </p>\n            )}\n            {tags && (\n              <p>\n                tags:\n                {tags && tags.map(tag => <p>{tag}</p>)}\n              </p>\n            )}\n            {description && <p>description: {description}</p>}\n            {culture && <p>culture: {culture}</p>}\n            {classification && <p>classification: {classification}</p>}\n            {department && <p>department: {department}</p>}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(DetailPiece);\n","import React, { Component } from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport * as d3 from \"d3\";\nimport \"./D3Test2.scss\";\nimport { withRouter } from \"react-router-dom\";\nimport $ from \"jquery\";\nimport \"./BackgroundLoader.js\";\n\n// import data from \"./Dataset1\";\n// import data2 from \"./Dataset2\";\n// import data from \"./Dataset3\";\n// import data from \"./Dataset4\";\n\n// import * as data2 from './Dataset2'\n\nclass D3Test2 extends Component {\n  constructor(props) {\n    super(props);\n    this.goDetail = this.goDetail.bind(this);\n  }\n  componentWillReceiveProps(nextProps) {\n    var chart = d3.select(\"#chart\");\n    chart.selectAll(\"*\").remove();\n  }\n\n  goDetail(d) {\n    let url = `/detail/${d.data._id}`;\n    return this.props.history.push(url);\n    // return <Route render={() => <Redirect to={url} />} />;\n  }\n\n  render() {\n    let data = this.props.data;\n    var width = 100, // % of the parent element\n      height = 100,\n      x = d3\n        .scaleLinear()\n        .domain([0, width])\n        .range([0, width]),\n      y = d3\n        .scaleLinear()\n        .domain([0, height])\n        .range([0, height]),\n      color = d3.rgb,\n      // d3.scaleOrdinal().range(\n      //   // d3.schemeGreys.map(function(c) {\n      //   d3.schemeSet1.map(function(c) {\n      //     // d3.schemeSet1.map(function(c) {\n      //     c = d3.rgb(c);\n      //     //c.opacity = 0.5;\n      //     return c;\n      //   })\n      // )\n      treemap = d3\n        .treemap()\n        .size([width, height])\n        //.tile(d3.treemapResquarify) // doesn't work - height & width is 100%\n        .paddingInner(0)\n        .round(false), //true\n      nodes = d3.hierarchy(data).sum(function(d) {\n        return d.value ? 1 : 0;\n      }),\n      //.sort(function(a, b) { return b.height - a.height || b.value - a.value });\n\n      currentDepth;\n\n    treemap(nodes);\n\n    var chart = d3.select(\"#chart\");\n    var cells = chart\n      .selectAll(\".node\")\n      .data(nodes.descendants())\n      .enter()\n      .append(\"div\")\n      .attr(\"class\", function(d) {\n        return \"node level-\" + d.depth;\n      })\n      .attr(\"title\", function(d) {\n        return d.data.name ? d.data.name : \"null\";\n      });\n\n    cells\n      .style(\"left\", function(d) {\n        return x(d.x0) + \"%\";\n      })\n      .style(\"top\", function(d) {\n        return y(d.y0) + \"%\";\n      })\n      .style(\"width\", function(d) {\n        return x(d.x1) - x(d.x0) + \"%\";\n      })\n      .style(\"height\", function(d) {\n        return y(d.y1) - y(d.y0) + \"%\";\n      })\n      //.style(\"background-image\", function(d) { return d.value ? imgUrl + d.value : \"\"; })\n      .style(\"background-image\", function(d) {\n        return d.value ? `url(${d.data.value})` : \"none\";\n      })\n\n      .style(\"background-color\", function(d) {\n        while (d.depth > 2) d = d.parent;\n        return color(d.data.name);\n      })\n      .on(\"click\", zoom)\n      .append(\"p\")\n      .attr(\"class\", \"label\")\n      .text(function(d) {\n        return d.data.name ? d.data.name : \"---\";\n      });\n\n    cells // show this depth + 1 and below\n      .filter(function(d) {\n        return d.depth >= 5;\n      })\n      .append(\"button\")\n      // .text(\"\")\n      .html(\"&#65291;\")\n      .attr(\"class\", \"button-detail\")\n      .on(\"click\", this.goDetail);\n\n    var parent = d3\n      .select(\".up\")\n      .datum(nodes)\n      .on(\"click\", zoom);\n    function zoom(d) {\n      // http://jsfiddle.net/ramnathv/amszcymq/\n\n      currentDepth = d.depth;\n      var button = d3\n        .select(\".up\")\n        .text(currentDepth <= 0 ? \"nested by museum\" : currentDepth <= 1 ? \"zoom out - nested by time\" : currentDepth <= 2 ? \"zoom out - nested by origin\" : currentDepth <= 3 ? \"zoom out - nested by author\" : \"zoom out - single piece\" );\n      console.log(\"button\", button);\n\n      parent.datum(d.parent || nodes);\n\n      x.domain([d.x0, d.x1]);\n      y.domain([d.y0, d.y1]);\n\n      var t = d3\n        .transition()\n        .duration(1200)\n\n        .ease(d3.easeCubicOut);\n\n      cells\n        .transition(t)\n        .style(\"left\", function(d) {\n          return x(d.x0) + \"%\";\n        })\n        .style(\"top\", function(d) {\n          return y(d.y0) + \"%\";\n        })\n        .style(\"width\", function(d) {\n          return x(d.x1) - x(d.x0) + \"%\";\n        })\n        .style(\"height\", function(d) {\n          return y(d.y1) - y(d.y0) + \"%\";\n        });\n\n      cells // hide this depth and above\n        .filter(function(d) {\n          return d.ancestors();\n        })\n        .classed(\"hide\", function(d) {\n          return d.children ? true : false;\n        });\n\n      cells // show this depth + 1 and below\n        .filter(function(d) {\n          return d.depth > currentDepth;\n        })\n        .classed(\"hide\", false);\n    }\n    let loadedCount = 0;\n\n    return (\n      <div className=\"father\">\n        <nav className=\"nav-bar-d3\">\n          <div className=\"up\">nested by museum</div>\n        </nav>\n        <div className=\"feature\" id=\"chart\"></div>\n      </div>\n    );\n  }\n}\nexport default withRouter(D3Test2);\n","import React, { Component } from \"react\";\n// import { Route, Redirect } from \"react-router-dom\";\nimport * as d3 from \"d3\";\nimport \"./D3Test2small.scss\";\nimport { withRouter } from \"react-router-dom\";\n\n// import data from \"./Dataset1\";\n// import data2 from \"./Dataset2\";\n// import data from \"./Dataset3\";\n// import data from \"./Dataset4\";\n\n// import * as data2 from './Dataset2'\n\nclass D3Test2 extends Component {\n  constructor(props) {\n    super(props);\n    this.goDetail = this.goDetail.bind(this);\n  }\n  componentWillReceiveProps(nextProps) {\n    var chart = d3.select(\"#chart-small\");\n    chart.selectAll(\"*\").remove();\n  }\n\n  goDetail(d) {\n    let url = `/detail/${d.data._id}`;\n    return this.props.history.push(url);\n  }\n\n  render() {\n    let data = this.props.data;\n    var width = 80, // % of the parent element\n      height = 80,\n      x = d3\n        .scaleLinear()\n        .domain([0, width])\n        .range([0, width]),\n      y = d3\n        .scaleLinear()\n        .domain([0, height])\n        .range([0, height]),\n      color =  d3.rgb\n \n      ,\n      treemap = d3\n        .treemap()\n        .size([width, height])\n        //.tile(d3.treemapResquarify) // doesn't work - height & width is 100%\n        .paddingInner(0)\n        .round(false), //true\n      nodes = d3.hierarchy(data).sum(function(d) {\n        return d.value ? 1 : 0;\n      }),\n      //.sort(function(a, b) { return b.height - a.height || b.value - a.value });\n\n      currentDepth;\n\n    treemap(nodes)\n    ;\n\n    var chart = d3.select(\"#chart-small\");\n    var cells = chart\n    .selectAll(\".node\")\n    .data(nodes.descendants())\n    .enter()\n    .append(\"div\")\n    \n    .attr(\"class\", function(d) {\n      return \"node-small level-small-\" + d.depth;\n    })\n    .attr(\"title\", function(d) {\n      return d.data.name ? d.data.name : \"null\";\n    })\n    .attr(\"transform\", \"translate(90 90)\")\n    \n    ;\n    \n    cells\n    .attr(\"transform\", \"translate(90 90)\")\n    .style(\"left\", function(d) {\n      return x(d.x0) + \"%\";\n      })\n      .style(\"top\", function(d) {\n        return y(d.y0) + \"%\";\n      })\n      .style(\"width\", function(d) {\n        return x(d.x1) - x(d.x0) + \"%\";\n      })\n      .style(\"height\", function(d) {\n        return y(d.y1) - y(d.y0) + \"%\";\n      })\n      .style(\"background-image\", function(d) {\n        return d.value ? `url(${d.data.value})` : \"none\";\n      })\n\n\n      .style(\"background-color\", function(d) {\n        while (d.depth > 2) d = d.parent;\n        return color(d.data.name);\n      })\n      .on(\"click\", zoom)\n      .append(\"p\")\n      .attr(\"class\", \"label\")\n      .text(function(d) {\n        return d.data.name ? d.data.name : \"---\";\n      });\n\n    cells // show this depth + 1 and below\n    .filter(function(d) {\n      return d.depth >= 5;\n    })\n    \n    .append(\"button\")\n    .attr(\"class\", \"button-detail\")\n    .on(\"click\", this.goDetail)\n    .html(\"&#65291;\")\n\n    // .style(\"border\", \"50px solid #FFFFFF\");\n    \n    var parent = d3\n    .select(\".up-small\")\n    .datum(nodes)\n    .on(\"click\", zoom);\n    function zoom(d) {\n      // http://jsfiddle.net/ramnathv/amszcymq/\n      \n      // console.log(\"clicked: \" + d.data.name + \", depth: \" + d.depth);\n      \n      currentDepth = d.depth;\n      var button = d3.select(\".up-small\").text(currentDepth <= 0 ? \"\" : \"zoom out\");\n\n\n      parent.datum(d.parent || nodes);\n      \n      x.domain([d.x0, d.x1]);\n      y.domain([d.y0, d.y1]);\n      \n      var t = d3\n      .transition()\n      // .duration(Math.floor(Math.random() * 2200) + 1200)\n        .duration(1200)\n\n        .ease(d3.easeCubicOut);\n\n      cells\n        .transition(t)\n        .style(\"left\", function(d) {\n          return x(d.x0) + \"%\";\n        })\n        .style(\"top\", function(d) {\n          return y(d.y0) + \"%\";\n        })\n        .style(\"width\", function(d) {\n          return x(d.x1) - x(d.x0) + \"%\";\n        })\n        .style(\"height\", function(d) {\n          return y(d.y1) - y(d.y0) + \"%\";\n        });\n\n      cells // hide this depth and above\n        .filter(function(d) {\n          return d.ancestors();\n        })\n        .classed(\"hide\", function(d) {\n          return d.children ? true : false;\n        });\n\n      cells // show this depth + 1 and below\n        .filter(function(d) {\n          return d.depth > currentDepth;\n        })\n        .classed(\"hide\", false);\n    }\n\n    return (\n      <div className=\"father-small\">\n        <nav className=\"nav-bar-d3-small\">\n          <div className=\"up-small\"></div>\n        </nav>\n        <div className=\"feature-small\" id=\"chart-small\"></div>\n      </div>\n    );\n  }\n}\nexport default withRouter(D3Test2);\n","import React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport \"./CollectionDetail.scss\";\nimport Axios from \"axios\";\nimport D3Test2small from \"../../components/D3Test/D3Test2small\";\nimport { nestByMuseum } from \"../../nestData\";\n\nclass CollectionDetail extends Component {\n  state = {\n    collection: {},\n    treeData: {},\n    data: {\n      children: [\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n        { name: \"Photo 1\", value: \"cgi-1.jpg\" },\n      ]\n    }\n  };\n\n  componentWillMount() {\n    Axios.get(\n      `${process.env.REACT_APP_API_URL}/collection/${this.props.match.params.id}`\n    ).then(collectionFound => {\n      const treeCollection = nestByMuseum(collectionFound.data.pieces);\n      this.setState({\n        ...this.state,\n        collection: collectionFound.data,\n        treeData: treeCollection\n      });\n    });\n  }\n\n  render() {\n    console.log(this.props);\n    return (\n      <div className=\"CollectionDetail-style\">\n        <div className=\"CollectionDetail-top\">\n          <div className=\"CollectionDetail-buttons\">\n            <h1>{this.state.collection.name}</h1>\n            <button onClick={this.props.history.goBack}>Close</button>\n          </div>\n          <div>\n            <D3Test2small data={this.state.treeData}></D3Test2small>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(CollectionDetail);\n","import React, { Component } from \"react\";\nimport \"./InitialCard.scss\";\nclass InitialCard extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className=\"initialcard\">\n        <button onClick={this.props.closeInitialCard}>&#8213;</button>\n        <p>\n          <span className=\"bold-text\">mnemosine</span> is a tool for browsing\n          media databases{\" \"}\n        </p>\n        <br />\n        <p>\n          At the beggining, random sample of the archive from the\n          Metropolitan Museum of Art, Museum of Modern Art and Rijksmuseum of\n          Amsterdam are showed. In total there are more than 1.230.000 pieces of art\n          reachable through their APIs and databases.\n        </p>\n        <br />\n        <p>\n          You can use the search bar in combination with the selector of tags\n          and the range of years to find more results according to your\n          interests.\n        </p>\n        <br />\n        <ul>\n          <li>The results are nested in 5 levels:</li>\n          <li>\n            <span className=\"bold-text\">1</span> Database to which they belong\n          </li>\n          <li>\n            <span className=\"bold-text\">2</span> Year of creation\n          </li>\n          <li>\n            <span className=\"bold-text\">3</span> Geographical origin\n          </li>\n          <li>\n            <span className=\"bold-text\">4</span> Author\n          </li>\n          <li>\n            <span className=\"bold-text\">5</span> Single piece\n          </li>\n        </ul>\n        <br />\n        <p>\n          In the last level, you can open a new tab and get full info of the\n          piece.\n        </p>\n        <br />\n        <p>\n          Sign up and create your own collections adding pieces to them.\n        </p>\n        <br />\n        <p>\n          You can like any item! They are showed bigger when they gain\n          likes.\n        </p>\n        <br />\n        <p>\n          The aim of the project is make possible connect more and more media\n          databases.\n        </p>\n      </div>\n    );\n  }\n}\n\nexport default InitialCard;\n","import React, { Component } from \"react\";\nimport \"./App.scss\";\nimport \"../src/components/treeStyles.css\";\nimport { Switch, Route } from \"react-router-dom\";\nimport Navbar from \"./components/navbar/Navbar\";\nimport AuthService from \"./components/auth/AuthService\";\nimport axios from \"axios\";\nimport Footer from \"./components/footer/Footer\";\nimport { nestByMuseum } from \"./nestData\";\nimport Profile from \"./components/profile/Profile\";\nimport DetailPiece from \"./components/detailPiece/DetailPiece\";\nimport D3Test2 from \"./components/D3Test/D3Test2\";\nimport CollectionDetail from \"./components/CollectionDetail/CollectionDetail\";\nimport InitialCard from \"./InitialCard/InitialCard\";\nvar Loader = require(\"react-loader\");\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loggedInUser: null,\n      search: \"\",\n      searchText: \"\",\n      filters: [],\n      yearRange: [],\n      dataBases: [\"RMA\", \"MOMA\", \"MET\"],\n      resultsId: [],\n      resultsDetail: [],\n      tree: {},\n      isLoaded: true,\n      introOpen: true\n    };\n    this.service = new AuthService();\n    this.fetchUser();\n    this.sendSearch = this.sendSearch.bind(this);\n    this.closeInitialCard = this.closeInitialCard.bind(this)\n\n  }\n  componentDidMount() {\n    this.randomSearch();\n  }\n\n  randomSearch() {\n    axios.get(`${process.env.REACT_APP_API_URL}/piecesrandom`).then(results => {\n      results = results.data;\n      if (results) {\n        const filteredResults = results; //this.filterResults(results);\n        console.log(\"results filteredResults\", results, filteredResults);\n        const tree = nestByMuseum(filteredResults, this.nodeLength);\n        console.log(tree);\n        this.setState({\n          resultsDetail: filteredResults,\n          tree: tree\n        });\n      }\n    });\n  }\n\n  getUser = userObj => {\n    this.setState({\n      loggedInUser: userObj\n    });\n  };\n  logout = () => {\n    this.service.logout().then(() => {\n      this.setState({ loggedInUser: null });\n    });\n  };\n  fetchUser() {\n    return this.service\n      .loggedin()\n      .then(response => {\n        this.setState({\n          loggedInUser: response\n        });\n      })\n      .catch(err => {\n        this.setState({\n          loggedInUser: false\n        });\n      });\n  }\n\n  setLoaded() {\n    console.log(\"isloaded\", this.state.loaded);\n    this.setState({ loaded: true });\n  }\n\n  searchMongo(e) {\n    if (e.key === \"Enter\") {\n      this.setState({ isLoaded: false });\n      setTimeout(\n        function() {\n          this.setState({ isLoaded: true });\n        }.bind(this),\n        4000\n      );\n      e.preventDefault();\n      axios\n        .get(`${process.env.REACT_APP_API_URL}/pieces/${e.target.value}`)\n        .then(results => {\n          results = results.data;\n          if (results) {\n            const filteredResults = results; //this.filterResults(results);\n            console.log(\"results filteredResults\", results, filteredResults);\n            const tree = nestByMuseum(filteredResults, this.nodeLength);\n            console.log(tree);\n            this.setState({\n              resultsDetail: filteredResults,\n              tree: tree\n            });\n          }\n        });\n    }\n  }\n\n  sliderResult(e) {\n    this.setState({ yearRange: e });\n  }\n  saveSearch(e) {\n    this.setState({ searchText: e.target.value });\n  }\n  multipleSelectResult(e) {\n    this.setState({ filters: e.target.value });\n  }\n  sendSearch() {\n    // axios\n    //   // .get(`${process.env.REACT_APP_API_URL}/pieces/${}`)\n    //   .then(results => {\n    //     results = results.data;\n    //     if (results) {\n    //       const filteredResults = results; //this.filterResults(results);\n    //       console.log(\"results filteredResults\", results, filteredResults);\n    //       const tree = nestByMuseum(filteredResults, this.nodeLength);\n    //       console.log(tree);\n    //       this.setState({\n    //         resultsDetail: filteredResults,\n    //         tree: tree\n    //       });\n    //     }\n    //   });\n\n    console.log(\n      \"send\",\n      this.state.yearRange,\n      this.state.searchText,\n      this.state.filters,\n      this.state.dataBases\n    );\n  }\n\n  // getData(results) {\n  //   let data = results.map(result => ({\n  //     name: result.name,\n  //     value: result.imageUrl\n  //   }));\n  //   this.setState({ resultsDetail: { children: data } });\n  //   console.log(\"state\", this.state.resultsDetail);\n  // }\n\n  closeInitialCard() {\n    console.log(\"close\");\n    this.setState({ introOpen: false });\n  }\n\n  render() {\n    var opts = {\n      lines: 13, // The number of lines to draw\n      length: 62, // The length of each line\n      width: 19, // The line thickness\n      radius: 39, // The radius of the inner circle\n      scale: 0.2, // Scales overall size of the spinner\n      corners: 1, // Corner roundness (0..1)\n      color: \"#ffffff\", // CSS color or array of colors\n      fadeColor: \"transparent\", // CSS color or array of colors\n      speed: 0.8, // Rounds per second\n      rotate: 0, // The rotation offset\n      animation: \"spinner-line-fade-default\", // The CSS animation name for the lines\n      direction: 1, // 1: clockwise, -1: counterclockwise\n      zIndex: 2e9, // The z-index (defaults to 2000000000)\n      className: \"spinner\", // The CSS class to assign to the spinner\n      top: \"48%\", // Top position relative to parent\n      left: \"50%\", // Left position relative to parent\n      shadow: \"0 0 5px black\", // Box-shadow for the lines\n      position: \"absolute\" // Element positioning\n    };\n\n    console.log(\"app render\", this.state.loaded);\n    return (\n      <React.Fragment>\n        <div className=\"App\">\n          \n          {this.state.introOpen && <InitialCard closeInitialCard={this.closeInitialCard}></InitialCard>}\n          <Loader loaded={this.state.isLoaded} options={opts}></Loader>\n          <D3Test2 setLoaded={this.setLoaded} data={this.state.tree}></D3Test2>\n          <Navbar\n            userInSession={this.state.loggedInUser}\n            logout={this.logout}\n            getUser={this.getUser}\n          />\n          <Switch>\n            <Route\n              path=\"/detail/:id\"\n              render={({ match }) => (\n                <DetailPiece user={this.state.loggedInUser} match={match} />\n              )}\n            />\n            <Route\n              path=\"/collection/:id\"\n              render={({ match }) => (\n                <CollectionDetail\n                  user={this.state.loggedInUser}\n                  match={match}\n                />\n              )}\n            />\n            <Route\n              path=\"/profile\"\n              render={props => (\n                <Profile user={this.state.loggedInUser} {...props} />\n              )}\n            />\n          </Switch>\n          <Footer\n            sendResults={this.sendSearch}\n            sliderResult={e => this.sliderResult(e)}\n            multipleSelectResult={e => this.multipleSelectResult(e)}\n            saveSearch={e => this.saveSearch(e)}\n            searchMongo={e => this.searchMongo(e)}\n            tags={this.state.resultsDetail ? this.state.resultsDetail : []}\n          ></Footer>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Router><App /></Router>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import { createMuiTheme } from \"@material-ui/core/styles\";\n// import purple from \"@material-ui/core/colors/purple\";\n// import green from \"@material-ui/core/colors/green\";\nimport { withStyles } from \"@material-ui/core/styles\";\n\nconst Theme = createMuiTheme({\n  palette: {\n    type: \"dark\",\n    primary: {\n      light: \"#7986cb\",\n      main: \"#FFFFFF\",\n      dark: \"#303f9f\"\n    },\n    secondary: {\n      light: \"#7986cb\",\n      main: \"#7986cb\",\n      dark: \"#7986cb\"\n    },\n    typography: {\n      htmlFontSize: 1,\n      fontSize: 1\n    },\n    h1:{\n      fontsize:\"5rem\"\n    }\n  },\n  status: {\n    // danger: \"orange\"\n  }\n});\n\nexport default Theme;\n","import React from \"react\";\nimport clsx from \"clsx\";\nimport { makeStyles, useTheme, ThemeProvider } from \"@material-ui/core/styles\";\nimport Input from \"@material-ui/core/Input\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Select from \"@material-ui/core/Select\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Chip from \"@material-ui/core/Chip\";\nimport \"./MultipleSelect.scss\";\nimport Theme from \"../ThemeProvider/Theme\";\n\nconst { window } = global;\nconst { innerWidth } = window;\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: innerWidth / 4,\n    maxWidth: innerWidth / 4\n  },\n  chips: {\n    display: \"flex\"\n    // flexWrap: \"wrap\"\n  },\n  chip: {\n    margin: 0\n  },\n  noLabel: {\n    marginTop: theme.spacing(0)\n  }\n}));\n\nconst ITEM_HEIGHT = 40;\nconst ITEM_PADDING_TOP = 0;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: innerWidth / 4\n    }\n  }\n};\n\nconst names = [\n  \"Oliver\",\n  \"Van\",\n  \"April\",\n  \"Ralph\",\n  \"Omar\",\n  \"Carlos\",\n  \"Miriam\",\n  \"Bradley\",\n  \"Virginia\",\n  \"Kelly\"\n];\n\nfunction getStyles(name, personName, theme) {\n  return {\n    fontWeight:\n      personName.indexOf(name) === -1\n        ? theme.typography.fontWeightRegular\n        : theme.typography.fontWeightMedium\n  };\n}\n\nexport default function MultipleSelect(props) {\n  const classes = useStyles();\n  const theme = useTheme();\n  const [personName, setPersonName] = React.useState([]);\n\n  const handleChange = event => {\n    setPersonName(event.target.value);\n    props.onSelectTag(event);\n  };\n\n  const handleChangeMultiple = event => {\n    const { options } = event.target;\n    const value = [];\n    for (let i = 0, l = options.length; i < l; i += 1) {\n      if (options[i].selected) {\n        value.push(options[i].value);\n      }\n    }\n    setPersonName(value);\n  };\n\n  return (\n    <div>\n      <ThemeProvider theme={Theme}>\n        <FormControl className={classes.formControl}>\n          <InputLabel id=\"demo-mutiple-chip-label\">Filters</InputLabel>\n          <Select\n            labelId=\"demo-mutiple-chip-label\"\n            id=\"demo-mutiple-chip\"\n            multiple\n            value={personName}\n            onChange={handleChange}\n            input={<Input id=\"select-multiple-chip\" />}\n            renderValue={selected => (\n              <div className={classes.chips}>\n                {selected.map(value => (\n                  <Chip key={value} label={value} className={classes.chip} />\n                ))}\n              </div>\n            )}\n            MenuProps={MenuProps}\n          >\n            {names.map(name => (\n              <MenuItem\n                key={name}\n                value={name}\n                style={getStyles(name, personName, theme)}\n              >\n                {name}\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n      </ThemeProvider>\n    </div>\n  );\n}\n"],"sourceRoot":""}